(window.webpackJsonp=window.webpackJsonp||[]).push([["weather-data-connector"],{"/FrS":function(e,t,i){"use strict";var n,a;i.d(t,"k",(function(){return n})),i.d(t,"j",(function(){return a})),i.d(t,"h",(function(){return r})),i.d(t,"g",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"f",(function(){return c})),i.d(t,"m",(function(){return u})),i.d(t,"l",(function(){return d})),i.d(t,"i",(function(){return l})),i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return g})),i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f})),function(e){e.overviewRequestStart="OverviewRequest.start",e.overviewRequestDuration="OverviewRequest.duration",e.overviewRequestInternal="OverviewRequest.internal",e.overviewRequestNetwork="OverviewRequest.network",e.pdpRequestStart="pdpRequest.start",e.pdpRequestDuration="pdpRequest.duration"}(n||(n={})),function(e){e[e.HomeFromCookie=1]="HomeFromCookie",e[e.HomeFromPdp=2]="HomeFromPdp",e[e.HomeFromUserSet=3]="HomeFromUserSet",e[e.HomeFromServerCookie=4]="HomeFromServerCookie"}(a||(a={}));const r="WeatherCondition";var o,s,c,u,d;!function(e){e[e.normal=0]="normal",e[e.alert=1]="alert",e[e.nowcast=2]="nowcast"}(o||(o={})),function(e){e[e.DetectCurrentLocation=1]="DetectCurrentLocation",e[e.SpecifyLocation=2]="SpecifyLocation"}(s||(s={})),function(e){e[e.Start=1]="Start",e[e.WCComplete=2]="WCComplete"}(c||(c={})),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(u||(u={})),function(e){e[e.RainThreshold=11.9]="RainThreshold"}(d||(d={}));const l={WeatherSpartanHomeLocationCookie:"weaSpartanHomeLocation",WeatherHomeLocationCookie:"weaPeregrineHomeLocation",WeatherSpartanDegreeSettingCookie:"weaSpartanDegreeType",WeatherDegreeSettingCookie:"weaPeregrineDegreeType",WeatherSpartanDetectLocationSetting:"weaDetectLocation",WeatherDetectLocationSetting:"weaPeregrineDetectLocation",WeatherSpartanRecentLocationCookie:"weaSpartanRecentLocations",WeatherRecentLocationCookie:"weaPeregrineRecentLocations",WeatherSpartanFavoriteLocationCookie:"weaSpartanFavoriteLocations",WeatherFavoriteLocationCookie:"weaPeregrineFavoriteLocations",WeatherRecentLocationLocalStorage:"weaRecentLocation",EnglishLocationMarkets:"en-",cookieExpirationTimeInDays:365,AirQualityF0:["AQ","SM","DU","VO","AS"]};var h,g,p,f;!function(e){e[e.setHomeFail=1]="setHomeFail",e[e.exceedPinLocationLimit=2]="exceedPinLocationLimit"}(h||(h={})),function(e){e.Hurricane="Hurricane",e.NormalWeather="NormalWeather",e.Nowcast="Nowcast",e.SevereWeather="SevereWeather",e.GoodWeatherWeekend="GoodWeatherWeekend",e.Holiday="Holiday"}(g||(g={})),function(e){e.ImageContent="ImageContent"}(p||(p={})),function(e){e.L1Minimap="L1Minimap",e.CardMinimap="CardMinimap"}(f||(f={}))},"0Hfl":function(e,t,i){var n;e.exports=(n=i("Ni7E"),function(e){var t=n,i=t.lib,a=i.WordArray,r=i.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,a=e[n];e[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var r=this._hash.words,o=e[t+0],c=e[t+1],g=e[t+2],p=e[t+3],f=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],b=e[t+8],S=e[t+9],C=e[t+10],O=e[t+11],A=e[t+12],L=e[t+13],w=e[t+14],k=e[t+15],T=r[0],D=r[1],j=r[2],I=r[3];T=u(T,D,j,I,o,7,s[0]),I=u(I,T,D,j,c,12,s[1]),j=u(j,I,T,D,g,17,s[2]),D=u(D,j,I,T,p,22,s[3]),T=u(T,D,j,I,f,7,s[4]),I=u(I,T,D,j,v,12,s[5]),j=u(j,I,T,D,m,17,s[6]),D=u(D,j,I,T,y,22,s[7]),T=u(T,D,j,I,b,7,s[8]),I=u(I,T,D,j,S,12,s[9]),j=u(j,I,T,D,C,17,s[10]),D=u(D,j,I,T,O,22,s[11]),T=u(T,D,j,I,A,7,s[12]),I=u(I,T,D,j,L,12,s[13]),j=u(j,I,T,D,w,17,s[14]),T=d(T,D=u(D,j,I,T,k,22,s[15]),j,I,c,5,s[16]),I=d(I,T,D,j,m,9,s[17]),j=d(j,I,T,D,O,14,s[18]),D=d(D,j,I,T,o,20,s[19]),T=d(T,D,j,I,v,5,s[20]),I=d(I,T,D,j,C,9,s[21]),j=d(j,I,T,D,k,14,s[22]),D=d(D,j,I,T,f,20,s[23]),T=d(T,D,j,I,S,5,s[24]),I=d(I,T,D,j,w,9,s[25]),j=d(j,I,T,D,p,14,s[26]),D=d(D,j,I,T,b,20,s[27]),T=d(T,D,j,I,L,5,s[28]),I=d(I,T,D,j,g,9,s[29]),j=d(j,I,T,D,y,14,s[30]),T=l(T,D=d(D,j,I,T,A,20,s[31]),j,I,v,4,s[32]),I=l(I,T,D,j,b,11,s[33]),j=l(j,I,T,D,O,16,s[34]),D=l(D,j,I,T,w,23,s[35]),T=l(T,D,j,I,c,4,s[36]),I=l(I,T,D,j,f,11,s[37]),j=l(j,I,T,D,y,16,s[38]),D=l(D,j,I,T,C,23,s[39]),T=l(T,D,j,I,L,4,s[40]),I=l(I,T,D,j,o,11,s[41]),j=l(j,I,T,D,p,16,s[42]),D=l(D,j,I,T,m,23,s[43]),T=l(T,D,j,I,S,4,s[44]),I=l(I,T,D,j,A,11,s[45]),j=l(j,I,T,D,k,16,s[46]),T=h(T,D=l(D,j,I,T,g,23,s[47]),j,I,o,6,s[48]),I=h(I,T,D,j,y,10,s[49]),j=h(j,I,T,D,w,15,s[50]),D=h(D,j,I,T,v,21,s[51]),T=h(T,D,j,I,A,6,s[52]),I=h(I,T,D,j,p,10,s[53]),j=h(j,I,T,D,C,15,s[54]),D=h(D,j,I,T,c,21,s[55]),T=h(T,D,j,I,b,6,s[56]),I=h(I,T,D,j,k,10,s[57]),j=h(j,I,T,D,m,15,s[58]),D=h(D,j,I,T,L,21,s[59]),T=h(T,D,j,I,f,6,s[60]),I=h(I,T,D,j,O,10,s[61]),j=h(j,I,T,D,g,15,s[62]),D=h(D,j,I,T,S,21,s[63]),r[0]=r[0]+T|0,r[1]=r[1]+D|0,r[2]=r[2]+j|0,r[3]=r[3]+I|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var r=e.floor(n/4294967296),o=n;i[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var d=c[u];c[u]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,i,n,a,r,o){var s=e+(t&i|~t&n)+a+o;return(s<<r|s>>>32-r)+t}function d(e,t,i,n,a,r,o){var s=e+(t&n|i&~n)+a+o;return(s<<r|s>>>32-r)+t}function l(e,t,i,n,a,r,o){var s=e+(t^i^n)+a+o;return(s<<r|s>>>32-r)+t}function h(e,t,i,n,a,r,o){var s=e+(i^(t|~n))+a+o;return(s<<r|s>>>32-r)+t}t.MD5=r._createHelper(c),t.HmacMD5=r._createHmacHelper(c)}(Math),n.MD5)},"0km5":function(e,t,i){"use strict";i.r(t),i.d(t,"QueryParameterKeys_ExtendInformation",(function(){return l})),i.d(t,"QueryParameterKeys_WeaDegreeType",(function(){return h})),i.d(t,"QueryParameterKeys_EncryptedLocation",(function(){return g})),i.d(t,"QueryParameterKeys_SeriazliedLocation",(function(){return p})),i.d(t,"QueryParameterKeys_Ocid",(function(){return f})),i.d(t,"QueryParameterKeys_Latitude",(function(){return v})),i.d(t,"QueryParameterKeys_Longitude",(function(){return m})),i.d(t,"getLocalizedKeywordWeather",(function(){return y})),i.d(t,"getLocalizedKeywordToday",(function(){return b})),i.d(t,"getAllKeywordWeather",(function(){return S})),i.d(t,"buildTemplateLink",(function(){return C})),i.d(t,"buildLink",(function(){return O})),i.d(t,"buildWeatherMapLink",(function(){return A})),i.d(t,"buildWeatherAlertLink",(function(){return L})),i.d(t,"Params2UNIT_MAPS",(function(){return k})),i.d(t,"parseUnitFromLink",(function(){return T})),i.d(t,"setCommonQuery",(function(){return D})),i.d(t,"addUnit",(function(){return j})),i.d(t,"buildQuery",(function(){return P})),i.d(t,"getMsnCompatibleLocationName",(function(){return F}));var n=i("/FrS"),a=i("rvYQ"),r=i("I6Lx"),o=i("W+kI"),s=i("vEDr"),c=i("Vy2U"),u=i("HDSB");const d={default:["weather","today"],"es-xl":["el-tiempo","pronostico"],"es-ar":["el-tiempo","hoy"],"es-mx":["el-tiempo","pronostico"],"es-pe":["el-tiempo","pronostico"],"es-us":["el-tiempo","pronostico"],"es-ve":["el-tiempo","pronostico"],"es-cl":["el-tiempo","hoy"],"es-co":["el-tiempo","pronostico"],"fr-xl":["meteo","previsions"],"fr-be":["meteo","previsions"],"fr-fr":["meteo","previsions"],"it-it":["meteo","oggi"],"fr-ch":["meteo","aujourd-hui"],"fr-ca":["meteo","aujourd-hui"],"de-de":["wetter","heute"],"de-at":["wetter","heute"],"de-ch":["wetter","heute"],"nl-be":["weer","weerbericht"],"nl-nl":["weer","vandaag"],"cs-cz":["pocasi","today"],"pt-br":["clima","previsao-do-tempo"],"da-dk":["vejr","i-dag"],"es-es":["eltiempo","prevision"],"hu-hu":["idojaras","today"],"id-id":["cuaca","hariini"],"pt-pt":["meteorologia","hoje"],"fi-fi":["saa","tanaan"],"nb-no":["weather","idag"],"sv-se":["vader","idag"],"tr-tr":["havadurumu","bugun"],"pl-pl":["pogoda","dzisiaj"]},l="weaext0",h="weadegreetype",g="el",p="loc",f="ocid",v="lat",m="lon";function y(e){return(e&&d[e.toLocaleLowerCase()]||d.default)[0]}function b(e){return(e&&d[e.toLocaleLowerCase()]||d.default)[1]}function S(){return Object.keys(Object.keys(d).map(e=>d[e][0]).reduce((e,t)=>(e[t]=1,e),{}))}function C(e,t,i){const n=c.a.toDetailShortInfo(t),r=["","F","C"][i||0]||"",o=e,s={};return o&&t&&Object.keys(o).reduce((e,i)=>(e[i]=(o[i]||"").replace("{locale}",a.a.CurrentMarket).replace("{latitude}",t.latitude).replace("{longitude}",t.longitude).replace("{weadegreetype}",r).replace("{weaext0}",encodeURIComponent(n)),e),s),s}function O(e,t,i){return I("ct",e,t,i)}function A(e,t,i){return I("cm",e,t,i)}function L(e,t,i){return I("ca",e,t,i)}const w={F:n.m.Fahrenheit,C:n.m.Celsius,f:n.m.Fahrenheit,c:n.m.Celsius},k=new Map([[n.m.Fahrenheit,"F"],[n.m.Celsius,"C"]]);function T(e){if(e){const t=Object(s.b)(e,h,["weaDegreeType"]);return t&&w[t]||void 0}}function D(e,t,i){if(t&&e){if(!i||!i.excludeItem){const i=e.getAll("item");for(let e=0;e<i.length;++e)t.append("item",i[e])}if(!i||!i.excludeOcid){const i=Object(s.a)(e);i&&t.set(f,i)}}return t||void 0}function j(e,t){const i=["","F","C"][t||0]||"";return i&&e&&e.set(h,i),e}function I(e,t,i,n){const a=r.b.Locale,o=`${t.latitude},${t.longitude}`,s=[t.locality,t.region,t.country].map(e=>e||"").join(","),u=(",,"!==s&&encodeURIComponent(s),P(i,n)),d=c.a.toDetailShortInfo(t);d&&u.set(l,d);const h=u.toString(),g=`https://a.msn.com/54/${a}/${e}${o}`;return h?g+"?"+h:g}function P(e,t){return!Object(u.a)()&&t&&t.locationHref?D(new URL(t.locationHref).searchParams,j(new URLSearchParams,e),t):D(Object(o.a)(),j(new URLSearchParams,e),t)}function F(e){return[e.locality,e.region,e.country].filter(e=>!!e).join(",").replace(/[&#\s]+/g,"-").replace(".","")}},"3s0V":function(e,t,i){var n,a,r,o,s,c,u,d,l;e.exports=(l=i("Ni7E"),i("77dk"),i("ZxLh"),a=(n=l).lib,r=a.Base,o=a.WordArray,s=n.algo,c=s.SHA1,u=s.HMAC,d=s.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=u.create(i.hasher,e),a=o.create(),r=o.create([1]),s=a.words,c=r.words,d=i.keySize,l=i.iterations;s.length<d;){var h=n.update(t).finalize(r);n.reset();for(var g=h.words,p=g.length,f=h,v=1;v<l;v++){f=n.finalize(f),n.reset();for(var m=f.words,y=0;y<p;y++)g[y]^=m[y]}a.concat(h),c[0]++}return a.sigBytes=4*d,a}}),n.PBKDF2=function(e,t,i){return d.create(i).compute(e,t)},l.PBKDF2)},"4a5f":function(e,t,i){var n;e.exports=(n=i("Ni7E"),i("i3c9"),i("0Hfl"),i("Cf/K"),i("heQk"),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,a=[],r=[],o=[],s=[],c=[],u=[],d=[],l=[],h=[],g=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,a[i]=p,r[p]=i;var f=e[i],v=e[f],m=e[v],y=257*e[p]^16843008*p;o[i]=y<<24|y>>>8,s[i]=y<<16|y>>>16,c[i]=y<<8|y>>>24,u[i]=y,y=16843009*m^65537*v^257*f^16843008*i,d[p]=y<<24|y>>>8,l[p]=y<<16|y>>>16,h[p]=y<<8|y>>>24,g[p]=y,i?(i=f^e[e[e[m^f]]],n^=e[e[n]]):i=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],f=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],o=0;o<n;o++)if(o<i)r[o]=t[o];else{var s=r[o-1];o%i?i>6&&o%i==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=p[o/i|0]<<24),r[o]=r[o-i]^s}for(var c=this._invKeySchedule=[],u=0;u<n;u++)o=n-u,s=u%4?r[o]:r[o-4],c[u]=u<4||o<=4?s:d[a[s>>>24]]^l[a[s>>>16&255]]^h[a[s>>>8&255]]^g[a[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,u,a)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,l,h,g,r),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,a,r,o,s){for(var c=this._nRounds,u=e[t]^i[0],d=e[t+1]^i[1],l=e[t+2]^i[2],h=e[t+3]^i[3],g=4,p=1;p<c;p++){var f=n[u>>>24]^a[d>>>16&255]^r[l>>>8&255]^o[255&h]^i[g++],v=n[d>>>24]^a[l>>>16&255]^r[h>>>8&255]^o[255&u]^i[g++],m=n[l>>>24]^a[h>>>16&255]^r[u>>>8&255]^o[255&d]^i[g++],y=n[h>>>24]^a[u>>>16&255]^r[d>>>8&255]^o[255&l]^i[g++];u=f,d=v,l=m,h=y}f=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^i[g++],v=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^i[g++],m=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^i[g++],y=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^i[g++],e[t]=f,e[t+1]=v,e[t+2]=m,e[t+3]=y},keySize:8});e.AES=t._createHelper(f)}(),n.AES)},"54Lz":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("CEfT");const n=[];function a(e){for(const t of n)t(e)}},"59wa":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n,a=i("Am8i");!function(e){e.WeatherSettingCard="WeatherSettingCard",e.DetectRadio="weathercard_customization_location",e.SpecifyRadio="weathercard_customization_location",e.FahrenheitRadio="weathercard_customization_unit",e.CelsiusRadio="weathercard_customization_unit",e.DetectLocationButton="detectmylocation",e.SaveButton="save",e.CancelButton="cancel",e.LocationSearchInput="searchLocation",e.LocatonSuggest="autosuggestresults",e.Vertical="weather",e.Category="setting"}(n||(n={}));const r=(e,t,i)=>{if(!e)return;const r=e.addOrUpdateChild({name:n.WeatherSettingCard,content:{type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),o=r.addOrUpdateChild({name:n.DetectRadio,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.locationDetect,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),s=r.addOrUpdateChild({name:n.SpecifyRadio,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.locationSpecify,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),c=r.addOrUpdateChild({name:n.FahrenheitRadio,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.unitsFahrenheit,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),u=r.addOrUpdateChild({name:n.CelsiusRadio,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.unitsCelsius,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),d=r.addOrUpdateChild({name:n.DetectLocationButton,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.detectLocationActionLabel,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),l=r.addOrUpdateChild({name:n.SaveButton,behavior:a.b.Save,type:a.e.ActionButton,content:{headline:t.saveText,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),h=r.addOrUpdateChild({name:n.CancelButton,behavior:a.b.Cancel,type:a.e.ActionButton,content:{headline:t.cancelText,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i}),g=r.addOrUpdateChild({name:n.LocationSearchInput,type:a.e.InputBox,content:{vertical:n.Vertical,category:n.Category},ext:i}),p=r.addOrUpdateChild({name:n.LocatonSuggest,type:a.e.DropDown,content:{type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:i});return{componentRoot:e,weatherSettingCard:r,detectRadio:o,specifyRadio:s,fahrenheitRadio:c,celsiusRadio:u,saveButton:l,cancelButton:h,locationSearchInput:g,locationSuggest:p,detectLocationButton:d}}},"5xIM":function(e,t,i){var n,a,r;a=[t,e],void 0===(r="function"==typeof(n=function(e,t){"use strict";var i=5e3,n="callback";function a(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=e,c=t.timeout||i,u=t.jsonpCallback||n,d=void 0;return new Promise((function(i,n){var l=t.jsonpCallbackFunction||a(),h=u+"_"+l;window[l]=function(e){i({ok:!0,json:function(){return Promise.resolve(e)}}),d&&clearTimeout(d),o(h),r(l)},s+=-1===s.indexOf("?")?"?":"&";var g=document.createElement("script");g.setAttribute("src",""+s+u+"="+l),t.charset&&g.setAttribute("charset",t.charset),g.id=h,document.getElementsByTagName("head")[0].appendChild(g),d=setTimeout((function(){n(new Error("JSONP request to "+e+" timed out")),r(l),o(h),window[l]=function(){r(l)}}),c),g.onerror=function(){n(new Error("JSONP request to "+e+" failed")),r(l),o(h),d&&clearTimeout(d)}}))}})?n.apply(t,a):n)||(e.exports=r)},"6ADy":function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return h}));var n=i("rvYQ"),a=i("I6Lx"),r=i("kN1G"),o=i("tMmC");let s,c;function u(){const e=Object(n.b)();if(!s){!function(e){s=new URL("",e),g(s)}(Object(r.j)()&&Object(r.k)()?e.EnterpriseServiceUrlBase:e.ServiceUrlBase)}return s}function d(){const e=Object(n.b)();if(!c){!function(e){c=new URL("",e),g(c)}(Object(r.j)()&&Object(r.k)()?e.EnterpriseServiceUrlBase:e.FeedServiceUrlBase)}return c}function l(e,t=u()){return new URL(e+(null==t?void 0:t.search),t)}function h(e,t=d()){return new URL(e+(null==t?void 0:t.search),t)}function g(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&Object(a.a)().UserIsSignedIn&&(t=!0),o.a.log("u-si: "+Object(n.b)().UserId),o.a.log("a-si: "+t),o.a.log("ss-si: "+Object(a.a)().UserIsSignedIn)}},"77dk":function(e,t,i){var n,a,r,o,s,c,u,d;e.exports=(d=i("Ni7E"),a=(n=d).lib,r=a.WordArray,o=a.Hasher,s=n.algo,c=[],u=s.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],a=i[1],r=i[2],o=i[3],s=i[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var d=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=d<<1|d>>>31}var l=(n<<5|n>>>27)+s+c[u];l+=u<20?1518500249+(a&r|~a&o):u<40?1859775393+(a^r^o):u<60?(a&r|a&o|r&o)-1894007588:(a^r^o)-899497514,s=o,o=r,r=a<<30|a>>>2,a=n,n=l}i[0]=i[0]+n|0,i[1]=i[1]+a|0,i[2]=i[2]+r|0,i[3]=i[3]+o|0,i[4]=i[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(u),n.HmacSHA1=o._createHmacHelper(u),d.SHA1)},"7oW3":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));var n=i("G82u");class a{}function r(){a.updateLocationDisplayName.unregisterObservers(),a.fetchWeatherSummarySuccess.unregisterObservers(),a.fetchWeatherSummaryFailure.unregisterObservers(),a.patchHourlyForecastSuccess.unregisterObservers(),a.updateLocationDetectionState.unregisterObservers(),a.updateWeatherUserProfile.unregisterObservers(),a.updateCurrentLocation.unregisterObservers(),a.updateWeatherSettings.unregisterObservers(),a.updateNonmapComponmentsReadiness.unregisterObservers(),a.updateOperationFailure.unregisterObservers(),a.updateFallbackStatus.unregisterObservers(),a.updateHyperlocal.unregisterObservers(),a.openEditLocation.unregisterObservers()}a.updateLocationDisplayName=new n.a("UpdateLocationDisplayName"),a.fetchWeatherSummarySuccess=new n.a("FetchWeatherSummarySuccess"),a.fetchWeatherSummaryFailure=new n.a("FetchWeatherSummaryFailure"),a.patchHourlyForecastSuccess=new n.a("FetchHourlyForecastSuccess"),a.updateLocationDetectionState=new n.a("UpdateLocationDetectionState"),a.updateWeatherUserProfile=new n.a("UpdateWeatherUserProfile"),a.updateCurrentLocation=new n.a("UpdateCurrentLocation"),a.updateWeatherSettings=new n.a("UpdateWeatherSettings"),a.updateNonmapComponmentsReadiness=new n.a("UpdateNonmapComponmentsReadiness"),a.updateOperationFailure=new n.a("updateOperationFailure"),a.updateFallbackStatus=new n.a("updateFallbackStatus"),a.updateHyperlocal=new n.a("updateHyperlocal"),a.openEditLocation=new n.a("editLocationName")},"8CFJ":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{static latlonToPixelXY(e,t,i){const n=this.clip(e,this.MinLatitude,this.MaxLatitude),a=(this.clip(t,this.MinLongitude,this.MaxLongitude)+180)*this.ReciprocalOf360,r=Math.sin(n*this.PerDegree),o=.5-Math.log((1+r)/(1-r))*this.ReciprocalOf4Pi;return[this.modPositive(a*i,i),this.modPositive(o*i,i)]}static modPositive(e,t){return(e%=t)<0?e+t:e}static clip(e,t,i){return Math.min(i,Math.max(t,e))}static MapSize(e){return 256<<e}static latLonsToPixel(e,t,i,a=n.zoomLevelMap){return n.toPixelArray(e,t,i,n.widthCardHalf,n.heightCardHalf,a)}static latLonsToPixelLandingPage(e,t,i,a=1600,r=210,o=n.zoomLevelMap){return n.toPixelArray(e,t,i,(a-1)/2,(r-1)/2,o)}static latLonToPixel(e,t,i=1600,a=210,r=n.zoomLevelMap){const o=e[0],s=e[1],c=n.latlonToPixelXY(o,s,n.getMapSizePixel(r));return[c[0]-t[0]+(i-1)/2,c[1]-t[1]+(a-1)/2]}static latLonToPixelCard(e,t,i=n.zoomLevelMap){const a=e[0],r=e[1],o=n.latlonToPixelXY(a,r,n.getMapSizePixel(i));return[o[0]-t[0]+n.widthCardHalf,o[1]-t[1]+n.heightCardHalf]}static toPixelArray(e,t,i,a,r,o=n.zoomLevelMap){const s=n.getMapSizePixel(o),c=n.latlonToPixelXY(t,i,s),u=[];return e.forEach(e=>{const t=e[1],i=e[0],o=n.latlonToPixelXY(t,i,s),d=o[0]-c[0]+a,l=o[1]-c[1]+r;u.push([d,l])}),u}static getMapSizePixel(e=7){return 256<<e}static getRad(e){return e*Math.PI/180}static getDistance(e,t,i,a){let r=0;try{const o=n.getRad(e),s=n.getRad(i),c=n.getRad(e)-n.getRad(i),u=n.getRad(t)-n.getRad(a);r=2*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(o)*Math.cos(s)*Math.pow(Math.sin(u/2),2))),r*=n.EARTH_RADIUS}catch(e){r=0}return Math.round(r)}static convertKm2Mile(e){const t=.62137*e;return Math.round(t)}}n.MinLongitude=-180,n.MaxLongitude=180,n.MinLatitude=-85.05112878,n.MaxLatitude=85.05112878,n.ReciprocalOf360=1/360,n.TwoPi=2*Math.PI,n.ReciprocalOfPi=1/Math.PI,n.ReciprocalOf4Pi=1/(4*Math.PI),n.PerDegree=Math.PI/180,n.widthMap=1600,n.heightMap=210,n.maxHeightMap=400,n.widthMapCard=1200,n.heightMapCard=400,n.zoomLevelMap=7,n.widthHalf=(n.widthMap-1)/2,n.heightHalf=(n.heightMap-1)/2,n.widthCardHalf=(n.widthMapCard-1)/2,n.heightCardHalf=(n.heightMapCard-1)/2,n.mapSizePixel=256<<n.zoomLevelMap,n.EARTH_RADIUS=6378.137},B9v6:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o}));var n=i("Uw7R");const a=Object(n.b)();function r(e,t){const i=performance.now();t&&t.logStart&&o(e+"-start",i);const n=t&&t.perfTimeline,a=n&&n.startMeasure(e).endMeasure;return function(){const n=performance.now();t&&t.logEnd&&o(e+"-end",n),t&&!t.logDuration||o(e,n-i),a&&a()}}function o(e,t=performance.now()){return a[e]=Math.round(10*t)/10,t}},"Cf/K":function(e,t,i){var n,a,r,o,s,c,u,d;e.exports=(d=i("Ni7E"),i("77dk"),i("ZxLh"),a=(n=d).lib,r=a.Base,o=a.WordArray,s=n.algo,c=s.MD5,u=s.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=i.hasher.create(),a=o.create(),r=a.words,s=i.keySize,c=i.iterations;r.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var d=1;d<c;d++)u=n.finalize(u),n.reset();a.concat(u)}return a.sigBytes=4*s,a}}),n.EvpKDF=function(e,t,i){return u.create(i).compute(e,t)},d.EvpKDF)},CgWR:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.AutosMarketplaceCard="autosmarketplaceCardEnabled",e.HoroscopeCard="horoscopeCardEnabled",e.WeatherCard="weatherCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.OnThisDayCard="onthisdayCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.TrafficCard="trafficCardEnabled",e.EsportsCard="esportsCardEnabled",e.ElectionsCard="genericelectionCardEnabled",e.LotteryCard="lotteryCardEnabled",e.QnaCard="qnaCardEnabled",e.RecipesCard="recipeCardEnabled",e.TravelCard="travelCardEnabled",e.HealthCard="healthCardEnabled",e.TopStoriesCard="topstoriesCardEnabled",e.LocalGuideCard="localGuideCardEnabled"}(n||(n={}))},"F+I8":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o}));var n=i("ilNR");const a={23:"RainShowersDay",26:"SnowShowersDay",6:"BlowingHail",5:"Cloudy",20:"LightSnow",91:"Windy",27:"Thunderstorms",10:"FreezingRain",77:"RainSnowDay",12:"HazeSmoke",39:"HazeSmokeNightV2_106",24:"RainSnow",78:"RainSnowShowersNight",9:"Fog",3:"PartlyCloudyDay",43:"HailNight",16:"HailDay",8:"LightRain",15:"HeavySnow",28:"ClearNight",30:"PartlyCloudyNight",14:"ModerateRain",1:"SunnyDay",7:"BlowingSnow",50:"RainShowersNight",82:"SnowShowersNight",2:"MostlySunnyDay",29:"MostlyClearNight",4:"MostlyCloudy",31:"MostlyCloudy",17:"LightRainV3"},r={17:"17",31:"31",49:"14",41:"14",35:"8",4:"4",19:"17",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"2",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"39",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"29",102:"28",44:"17",46:"17",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"39",13:"8"};class o{static getWeatherGlyphCode(e){const t=Object.prototype.hasOwnProperty.call(r,e)?r[e]:e;return a[t]}static getWeatherNormalizedSkyCode(e,t=!1){return t&&n.a.includes(e)?e:Object.prototype.hasOwnProperty.call(r,e)?r[e]:e}}},GFO5:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),function(e){e[e.Size30=1]="Size30",e[e.Size50=2]="Size50",e[e.Size24=3]="Size24",e[e.Size40=4]="Size40",e[e.Size68=5]="Size68",e[e.Size106=6]="Size106"}(n||(n={}));const a={23:"AAekRsY.img",26:"AAekP1G.img",6:"AAekzfx.img",5:"AAekHbj.img",20:"AAeku2v.img",91:"AAekP1I.img",27:"AAekZha.img",10:"AAekwJU.img",77:"AAekHbm.img",12:"AAekU2D.img",24:"AAekJUc.img",78:"AAeku2w.img",9:"AAekrqP.img",3:"AAekwJT.img",43:"AAekzfy.img",16:"BBaRgH.img",8:"AAekBPS.img",15:"AAeku2u.img",28:"AAekU2E.img",30:"AAekErI.img",14:"AAekErH.img",1:"AAekoR7.img",7:"AAekmhd.img",50:"AAekRsZ.img",82:"AAekmhg.img"},r={23:"AAehOqC.img",26:"AAehE44.img",6:"AAehOqA.img",5:"AAehyQC.img",20:"AAehE45.img",91:"AAehWcc.img",27:"AAehOqE.img",10:"AAehGG5.img",77:"AAehWca.img",12:"AAehYNC.img",24:"AAehGG6.img",78:"AAei6xK.img",9:"AAei3XW.img",3:"AAehLNN.img",43:"AAei6xL.img",16:"BBaRgH.img",8:"AAehyQD.img",15:"AAei6xJ.img",28:"AAehwh2.img",30:"AAehOqD.img",14:"AAehOqB.img",1:"AAehR3S.img",7:"AAehYNB.img",50:"AAehYND.img",82:"AAehWcb.img"},o={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"12",13:"8"};class s{static getSkyCodeUrl(e,t){const i=Object.prototype.hasOwnProperty.call(o,e)?o[e]:e;switch(t){case n.Size30:return s.skyCodePath+a[i];case n.Size50:return s.skyCodePath+r[i];default:return null}}}s.skyCodePath="//img-s-msn-com.akamaized.net/tenant/amp/entityid/"},HcI6:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("D57K"),a=i("/FrS"),r=i("lVeH"),o=i("Vy2U"),s=i("u8F0"),c=i("CgWR"),u=i("hSGL"),d=i("XlyT"),l=i("HxRh"),h=i("I6Lx"),g=i("xYH4");function p(e){return!!e&&"null"!==e&&"undefined"!==e&&"false"!==e}function f(e,t){return new Date(t.updatedDateTime).valueOf()-new Date(e.updatedDateTime).valueOf()}class v{constructor(){this.PdpDefaultLocation="DefaultLocation",this.PdpFavoriteLocation="FavoriteLocation",this.locationPdpClient=new r.a,this.instance=u.a}read(e={},t=!0){return Object(n.a)(this,void 0,void 0,(function*(){let i=null;try{const n=yield this.instance.readPdpWithTargetType(s.a.Location,!1,void 0,e,t),{value:a=[]}=n||{value:[]};i=this.convertPdpDataToPdpResponse(a)}catch(e){Object(d.c)(e,l.xj,"Weather Profile graph action location Read Failed")}if(!i)try{const e=yield this.instance.getPdpUserPreference(),{value:t=[]}=e||{value:[]};i=this.parseUserProfileFromPdpData(t)}catch(e){Object(d.c)(e,l.yj,"Weather Profile User Read Failed")}return i||{}}))}setDisplayUnit(e,t={}){return Object(n.a)(this,void 0,void 0,(function*(){let i=!1;try{i=yield this.instance.updateWeatherSettings(e.toString(),null,t)}catch(e){Object(d.c)(e,l.vj,"Display unit Update failed"),i=!1}return i}))}updateUserSettings(e,t,i={},a){return Object(n.a)(this,void 0,void 0,(function*(){return this.locationPdpClient.updateUserSettings(e,t,i,a)}))}enableDisableWeatherCard(e){return Object(n.a)(this,void 0,void 0,(function*(){let t=!1;try{t=yield this.instance.updateSegmentCardsEnableStatus([{cardType:c.a.WeatherCard,enabled:e}])}catch(i){Object(d.c)(i,l.zj,(e?"Enable":"Disable")+" weather segment card failed"),t=!1}return t}))}setHomeLocation(e,t={},i){return Object(n.a)(this,void 0,void 0,(function*(){return this.locationPdpClient.setHomeLocation(e,t,i)}))}addFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){return this.locationPdpClient.addFavoriteLocation(e)}))}removeFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){return this.locationPdpClient.removeFavoriteLocation(e)}))}convertPdpDataToPdpResponse(e){if(e&&e[0]){const t=e.filter(e=>e.degree===this.PdpDefaultLocation).sort(f)[0],i=v.parseLocationFromPdpValue(t);return i&&(i.from=a.j.HomeFromPdp,i.displayName=o.a.getDisplayName(i)),Object.assign(Object.assign({},v.parseUnitAndMode(t)),{home:i,favorites:e.filter(e=>e.degree===this.PdpFavoriteLocation).map(v.parseLocationFromPdpValue).filter(e=>!!e),recents:void 0})}return null}parseUserProfileFromPdpData(e){if(e&&e[0]){const t=e.find(e=>e.weatherDisplayUnit);if(!(t&&(t.weatherDisplayUnit||t.userSettings&&t.userSettings.weatherLocationSettingMode)))return null;let i=void 0;t.weatherDisplayUnit&&(i="2"===t.weatherDisplayUnit?a.m.Celsius:a.m.Fahrenheit);let n=void 0;return t.userSettings&&t.userSettings.weatherLocationSettingMode&&(n="2"===t.userSettings.weatherLocationSettingMode?a.d.SpecifyLocation:a.d.DetectCurrentLocation),{home:void 0,unit:i,locationMode:n,favorites:void 0,recents:void 0}}return null}static buildMetaData(e){return r.a.buildMetaData(e)}static parseUnitAndMode(e){let t=0,i=0;return e&&e.metadata&&("2"!==e.metadata.displayunit&&"1"!==e.metadata.displayunit||(t="2"===e.metadata.displayunit?a.m.Celsius:a.m.Fahrenheit),"1"!==e.metadata.locationSettingMode&&"2"!==e.metadata.locationSettingMode||(i="1"===e.metadata.locationSettingMode?a.d.DetectCurrentLocation:a.d.SpecifyLocation)),{unit:t,locationMode:i}}static parseLocationFromPdpValue(e){let t=null;if(e&&e.definitionName&&e.metadata){t={latitude:e.definitionName.split(",")[0],longitude:e.definitionName.split(",")[1],addressLine:p(e.metadata.addressLine)?e.metadata.addressLine:void 0,locality:p(e.metadata.city)?e.metadata.city:void 0,subRegion:p(e.metadata.subRegion)?e.metadata.subRegion:void 0,region:p(e.metadata.state)?e.metadata.state:void 0,country:p(e.metadata.countryRegion)?e.metadata.countryRegion:void 0,displayName:"",isoCode:p(e.metadata.isoCode)?e.metadata.isoCode:void 0,locationTypeId:e.metadata.locationTypeId,postalCode:e.metadata.postalCode,language:(e.metadata.language||o.a.extractLanguageTag(e.metadata.locationTypeId)||h.b.Locale).toLocaleLowerCase(),definitionName:e.definitionName,readLink:p(e.metadata.readLink)?e.metadata.readLink:void 0},t.region=o.b.abbreviateUSState(t.region,t.language,t.isoCode),t.locationType=1,"number"!=typeof e.metadata.locationType&&void 0!==e.metadata.locationType||(t.locationType=e.metadata.locationType||1),"string"==typeof e.metadata.locationType&&p(e.metadata.locationType)&&(t.locationType=Object(g.a)(""+e.metadata.locationType,1));const i=e.metadata.geoCoordinates;!i||0===i.latitude&&0===i.longitude||(t.latitude=""+i.latitude,t.longitude=""+i.longitude),t.addressLine||t.locality||t.region||(t=null),t&&!o.a.isValid(t)&&(t=null),t&&"0"===t.latitude&&"0"===t.longitude&&(e.metadata.name||e.metadata.countryRegion||e.metadata.city||e.metadata.state||(t=null))}return t}}},I855:function(e,t,i){"use strict";i.r(t),i.d(t,"NEW_BACKGROUND_IMAGE_CODE",(function(){return p.a})),i.d(t,"MapProjection",(function(){return X.a})),i.d(t,"WeatherSchemaTranslator",(function(){return We.a})),i.d(t,"SkyConditionIconUtility",(function(){return he})),i.d(t,"WeatherDataActions",(function(){return J.a})),i.d(t,"resetWeatherDataActions",(function(){return J.b})),i.d(t,"WeatherDataConnector",(function(){return Ye})),i.d(t,"WeatherPerfMarkerIds",(function(){return h.k})),i.d(t,"WeatherDataReducer",(function(){return Xe})),i.d(t,"MiniMapUtils",(function(){return N.b})),i.d(t,"WeatherLocationFrom",(function(){return h.j})),i.d(t,"SettingUpdateStatus",(function(){return h.f})),i.d(t,"WeatherUnit",(function(){return h.m})),i.d(t,"LocationDetectionSetting",(function(){return h.d})),i.d(t,"WeatherDataConstants",(function(){return h.i})),i.d(t,"skyCodeMapping",(function(){return M.b})),i.d(t,"SkyConditionSvgIconUtility",(function(){return M.a})),i.d(t,"SkyConditionCardBackgroundUtility",(function(){return ee.a})),i.d(t,"ToolingInfo",(function(){return it})),i.d(t,"locationCrypto",(function(){return c.a})),i.d(t,"LocalizeLocationService",(function(){return Q.a})),i.d(t,"LocationUtils",(function(){return r.a})),i.d(t,"ServiceRequestOptions",(function(){return Z.c})),i.d(t,"WeatherBackgroundCodeUtility",(function(){return R})),i.d(t,"WeatherBackgroundCodeUtilityV2",(function(){return E})),i.d(t,"getAutoSuggestClient",(function(){return nt})),i.d(t,"WeatherDailyTrendClient",(function(){return G})),i.d(t,"WeatherMonthlyTrendClient",(function(){return z})),i.d(t,"getDailyTrendClient",(function(){return Y})),i.d(t,"getMonthlyTrendClient",(function(){return K})),i.d(t,"QueryParameterKeys_WeaDegreeType",(function(){return a.QueryParameterKeys_WeaDegreeType})),i.d(t,"Params2UNIT_MAPS",(function(){return a.Params2UNIT_MAPS})),i.d(t,"WeatherPdpClient",(function(){return ze.a})),i.d(t,"WeatherURLUtils",(function(){return N.d})),i.d(t,"WeatherURLUtilsWithCrypto",(function(){return n})),i.d(t,"StringUtils",(function(){return r.b})),i.d(t,"SkyConditionCarouselBackgroundUtility",(function(){return ae})),i.d(t,"FeedWeatherDataUtils",(function(){return N.a})),i.d(t,"OperationFailure",(function(){return h.e})),i.d(t,"ContentDataType",(function(){return h.c})),i.d(t,"ContentDataDisplayTypes",(function(){return h.a})),i.d(t,"ContentDataRenderPlaces",(function(){return h.b})),i.d(t,"WeatherConditionKey",(function(){return h.h})),i.d(t,"WeatherCondition",(function(){return h.g})),i.d(t,"isBotUserAgent",(function(){return B.a})),i.d(t,"WeatherCardTelemetryConstants",(function(){return Ze.a})),i.d(t,"mapWeatherCardTelemetry",(function(){return Ze.b})),i.d(t,"WeatherSettingCardTelemetryConstants",(function(){return et.a})),i.d(t,"mapWeatherSettingCardTelemetry",(function(){return et.b})),i.d(t,"WeatherFeedApiClient",(function(){return tt.a}));var n={};i.r(n),i.d(n,"buildEncryptedWeatherHomeLink",(function(){return d})),i.d(n,"parseWeatherLocationFromLink",(function(){return l}));var a=i("0km5"),r=i("Vy2U"),o=i("vEDr"),s=i("I6Lx"),c=i("KyXa");const u=/^.*(?:we-city-|\/)(-?\d*\.\d+),(-?\d*\.\d+)[\D]*$/;function d(e,t,i){const n=s.b.Locale,r=Object(a.buildQuery)(t,i);r.set(a.QueryParameterKeys_EncryptedLocation,c.a.encrypt(e));const o=Object(a.getLocalizedKeywordWeather)(n);return"zh-cn"==n?`https://www.msn.cn/zh-cn/${o}/?${r.toString()}`:`https://www.msn.com/${n}/${o}/?${r.toString()}`}function l(e,t){if(!e)return;const i=e.searchParams||new URLSearchParams(e.search),n=e.pathname,s=Object(o.b)(e.searchParams,a.QueryParameterKeys_EncryptedLocation);if(s&&t)return{el:s};const d=Object(o.b)(e.searchParams,a.QueryParameterKeys_SeriazliedLocation);let l={};if(s?l=c.a.decrypt(s):d&&(l=c.a.deserialize(d)),!l.latitude&&!l.longitude){const e=u.exec(n);e&&(l.latitude=e[1],l.longitude=e[2])}if(!l.latitude&&!l.longitude){const t=(Object(o.b)(e.searchParams,"q")||"").split(",");if(2===t.length){const e={latitude:""+parseFloat(t[0]),longitude:""+parseFloat(t[1])};r.a.isValid(e)&&(l=Object.assign(Object.assign({},l),e))}}return l.latitude||l.longitude||(l.latitude=Object(o.b)(e.searchParams,"lat"),l.longitude=Object(o.b)(e.searchParams,"lon")),l.latitude&&l.longitude&&(l=Object.assign(Object.assign(Object.assign({},l),r.a.normalizeLatLong(l.latitude,l.longitude)),r.a.parseDetailShortInfo(Object(o.b)(i,a.QueryParameterKeys_ExtendInformation))||{})),r.a.isValid(l)?l:void 0}var h=i("/FrS"),g=i("vLdU"),p=i("ilNR");const f="linear-gradient(180deg, #1360A7 20.83%, #1B7BC1 78.65%, rgba(27, 123, 193, 0) 100%)",v="linear-gradient(180deg, #1C54A7 20.83%, #4177C1 78.65%, rgba(65, 119, 193, 0) 100%)",m="linear-gradient(180deg, #2A5194 20.83%, #5173AF 78.65%, rgba(81, 115, 175, 0) 100%)",y="linear-gradient(180deg, #4F598D 20.83%, #6974A7 78.65%, rgba(105, 116, 167, 0) 100%)",b="linear-gradient(180deg, #5D5B75 20.83%, #7D8097 56.77%, rgba(125, 128, 151, 0) 92.71%)",S={background:"linear-gradient(159.97deg, #87CAF6 0%, #0970B2 100%)"},C={background:"rgba(126, 197, 244, 0.3)"},O={background:"linear-gradient(159.97deg, #7CAFEB 0%, #1C54A7 100%)"},A={background:"rgba(124, 175, 235, 0.3)"},L={background:"linear-gradient(159.97deg, #88A4D5 0%, #2A5194 100%)"},w={background:"rgba(136, 164, 213, 0.3)"},k={background:"linear-gradient(159.97deg, #A8B7E7 0%, #4F598D 100%)"},T={background:"rgba(168, 183, 231, 0.3)"},D={background:"linear-gradient(159.97deg, #A8AAC6 0%, #5D5B75 100%)"},j={background:"rgba(168, 170, 198, 0.3)"},I={23:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:"rainShowersGif"},26:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},6:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},5:{gradients:[v],contentBg:O,conditionBg:A,timelineGifName:"cloudyGif"},20:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},91:{gradients:[f],contentBg:S,conditionBg:C,timelineGifName:""},27:{gradients:["linear-gradient(180deg, #37368F 20.83%, #6267BA 78.65%, rgba(98, 103, 186, 0) 100%)"],contentBg:{background:"linear-gradient(159.97deg, #898DDC 0%, #37368F 100%)"},conditionBg:{background:"rgba(137, 141, 220, 0.3)"},timelineGifName:"stormGif"},10:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:""},77:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:"rainShowersGif"},12:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},39:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},24:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},78:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},9:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},3:{gradients:[v],contentBg:O,conditionBg:A,timelineGifName:"cloudyMostlyGif"},43:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},16:{gradients:[b],contentBg:D,conditionBg:j,timelineGifName:""},8:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:"rainLightGif"},15:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},28:{gradients:[f],contentBg:S,conditionBg:C,timelineGifName:""},30:{gradients:[v],contentBg:O,conditionBg:A,timelineGifName:"cloudyMostlyGif"},14:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:"rainGif"},1:{gradients:[f],contentBg:S,conditionBg:C,timelineGifName:""},7:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""},50:{gradients:[m],contentBg:L,conditionBg:w,timelineGifName:"rainShowersGif"},82:{gradients:[y],contentBg:k,conditionBg:T,timelineGifName:""}},P={1:"46, 97, 176",2:"34, 91, 172",3:"18, 85, 176",4:"78, 93, 123",5:"77, 87, 96",6:"59, 43, 23",7:"9, 81, 149",8:"51, 91, 148",9:"57, 57, 79",10:"28, 58, 96",13:"63, 91, 115",17:"46, 97, 176",19:"48, 75, 137",20:"9, 81, 149",24:"9, 81, 149",28:"23, 33, 60",29:"24, 38, 67",30:"32, 50, 89",31:"24, 38, 67",32:"26, 34, 57",34:"14, 42, 79",35:"28, 34, 70",37:"16, 37, 64",40:"39, 57, 93",41:"26, 34, 57",42:"14, 42, 79",44:"28, 34, 70",47:"10, 40, 87",51:"14, 42, 79",80:"28, 34, 70"},F={33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",15:"7",25:"7",26:"7",59:"7",22:"8",23:"8",79:"8",12:"9",18:"9",21:"9",36:"9",39:"9",45:"9",48:"9",63:"9",64:"9",89:"9",90:"9",11:"10",69:"10",71:"10",14:"13",27:"13",67:"13",81:"20",75:"24",77:"24",83:"24",85:"24",38:"37",70:"37",72:"37",54:"41",68:"41",52:"42",53:"42",60:"42",46:"44",49:"44",50:"44",82:"47",76:"51",78:"51",84:"51",86:"51"};function U(e,t=0){const i=100*t,n=1-t;return`linear-gradient(180deg,\n            rgba(${e}, 1) ${i+4.03*n}%,\n            rgba(${e}, 0.991353) ${i+10.43*n}%,\n            rgba(${e}, 0.96449) ${i+16.82*n}%,\n            rgba(${e}, 0.91834) ${i+23.22*n}%,\n            rgba(${e}, 0.852589) ${i+29.62*n}%,\n            rgba(${e}, 0.768225) ${i+36.02*n}%,\n            rgba(${e}, 0.668116) ${i+42.42*n}%,\n            rgba(${e}, 0.557309) ${i+48.82*n}%, \n            rgba(${e}, 0.442691) ${i+55.21*n}%,\n            rgba(${e}, 0.331884) ${i+61.61*n}%,\n            rgba(${e}, 0.231775) ${i+68.01*n}%,\n            rgba(${e}, 0.147411) ${i+74.41*n}%,\n            rgba(${e}, 0.0816599) ${i+80.81*n}%,\n            rgba(${e}, 0.03551) ${i+87.2*n}%,\n            rgba(${e}, 0.0086472) ${i+93.6*n}%,\n            rgba(${e}, 0) 100%)`}class R{static getBackgroudImage(e,t){let i=null;switch(e){case"1":case"91":i={background:`url('${t.sunnyImageUrl}') 0 0 / 100% 100% no-repeat`};break;case"28":i={background:`url('${t.nightImageUrl}') repeat-x`};break;case"5":i={background:`url('${t.cloudImageUrl}') repeat-x`,opacity:"60%"};break;case"3":case"30":i={background:`url('${t.cloudV2ImageUrl}') repeat-x`,opacity:"60%"};break;case"39":case"12":i={background:`url('${t.smokeImageUrl}') repeat-x`};break;case"9":i={background:`url('${t.fogImageUrl}') repeat-x`};break;case"23":case"10":case"77":case"8":case"14":case"50":i={background:`url('${t.rainImageUrl}') repeat-x`}}return i}static getAppImageBackgroud(e,t){const i=F[e]||e,n=t.midGradientMap||P;return{midImage:{"background-image":`url('${t.defaultMidImagePath}Mid${i}.png')`},midGradient:{background:U(n[i],.78)}}}static getBackgroudGradient(e){const t=I[e];return t&&t.gradients}static getContentBackgroud(e){const t=I[e];return t&&t.contentBg}static getConditionBackgroud(e){const t=I[e];return t&&t.conditionBg}static getWeatherBackgroud(e,t,i=!1){let n={};return p.a.indexOf(e)<0||!i?(n=I[e],n.bgImage=this.getBackgroudImage(e,t)):n=this.getAppImageBackgroud(e,t),n}static getWeatherGifName(e){const t=I[e];return t&&t.timelineGifName}}var N=i("X9Vi"),B=i("UAwG"),M=i("F+I8");const x={BG_SUNNY:"linear-gradient(180deg, #245494 0%, #1C4484 100%)",BG_SUNNY_NIGHT:"linear-gradient(180deg, #28456E 0%, #142444 100%)",BG_RAIN:"linear-gradient(180deg, #345C84 0%, #2C4C74 100%)",BG_RAIN_NIGHT:"linear-gradient(180deg, #2C466C 0%, #14243C 100%)",BG_SNOW:"linear-gradient(180deg, #295793 0%, #0C3C7C 100%)",BG_SNOW_NIGHT:"linear-gradient(180deg, #1C2C44 0%, #0B1A2C 100%)",BG_DUST:"linear-gradient(180deg, #65513F 0%, #4C3C2C 100%)",BG_DUST_NIGHT:"linear-gradient(180deg, #473F36 0%, #2C241D 100%)",BG_CLOUDY:"linear-gradient(180deg, #4C5C7A 0%, #344464 100%)",BG_CLOUDY_NIGHT:"linear-gradient(180deg, #244D72 0%, #07213B 100%)",BG_STORM:"linear-gradient(180deg, #506078 0%, #44546C 100%)",BG_STORM_NIGHT:"linear-gradient(180deg, #37314D 0%, #14142C 100%)",BG_FOG:"linear-gradient(180deg, #44446C 0%, #2C2C54 100%)",BG_FOG_NIGHT:"linear-gradient(180deg, #2D4156 0%, #1A1C24 100%)"},W={BG_SUNNY:"#1b4e97",BG_SUNNY_NIGHT:"#071a37",BG_RAIN:" #0e2745",BG_RAIN_NIGHT:"#191c25",BG_SNOW:"#0a397c",BG_SNOW_NIGHT:"#021023",BG_DUST:"#3d281f",BG_DUST_NIGHT:"#1f1511",BG_CLOUDY:"#41506d",BG_CLOUDY_NIGHT:"#0e2945",BG_STORM:"#40546b",BG_STORM_NIGHT:"#140c35",BG_FOG:"#302d55",BG_FOG_NIGHT:"#1c2933"};class E{static getBackgroudImage(e,t,i=""){return this.getBackgroudElement(e,t,!0,i).contentBackground}static getBackgroudGradient(e,t=!1){return this.getBackgroudElement(e,{},!1,"",t).contentBackground}static getCarouselBackgroudGradient(e){return this.getBackgroudElement(e,{},!1).carouselBackgroundColor}static getBackgroudElement(e,t,i,n="",a=!1){let r={};const o=a?W:x;switch(e){case"1":case"2":case"3":case"101":r={contentBackground:i?{"background-image":`url('${n+t.sunnyImageUrl}')`}:{background:o.BG_SUNNY},carouselBackgroundColor:{backgroundColor:"#214D86"}};break;case"28":case"29":case"102":r={contentBackground:i?{"background-image":`url('${n+t.sunnyNightImageUrl}')`}:{background:o.BG_SUNNY_NIGHT},carouselBackgroundColor:{backgroundColor:"#253F64"}};break;case"8":case"10":case"11":case"13":case"14":case"17":case"19":case"22":case"23":case"24":case"69":case"71":case"75":case"77":case"79":case"83":case"85":r={contentBackground:i?{"background-image":`url('${n+t.rainImageUrl}')`}:{background:o.BG_RAIN},carouselBackgroundColor:{backgroundColor:"#305477"}};break;case"35":case"37":case"38":case"40":case"41":case"44":case"46":case"49":case"50":case"51":case"70":case"72":case"76":case"78":case"80":case"84":case"86":r={contentBackground:i?{"background-image":`url('${n+t.rainNightImageUrl}')`}:{background:o.BG_RAIN_NIGHT},carouselBackgroundColor:{backgroundColor:"#284062"}};break;case"7":case"15":case"16":case"20":case"25":case"26":case"59":case"81":r={contentBackground:i?{"background-image":`url('${n+t.snowImageUrl}')`}:{background:o.BG_SNOW},carouselBackgroundColor:{backgroundColor:"#264F85"}};break;case"34":case"42":case"43":case"47":case"52":case"53":case"60":case"82":r={contentBackground:i?{"background-image":`url('${n+t.snowNightImageUrl}')`}:{background:o.BG_SNOW_NIGHT},carouselBackgroundColor:{backgroundColor:"#1A283E"}};break;case"6":case"61":case"87":case"91":case"93":case"95":r={contentBackground:i?{"background-image":`url('${n+t.dustImageUrl}')`}:{background:o.BG_DUST},carouselBackgroundColor:{backgroundColor:"#5C4A3A"}};break;case"33":case"62":case"88":case"92":case"94":case"96":r={contentBackground:i?{"background-image":`url('${n+t.dustNightImageUrl}')`}:{background:o.BG_DUST_NIGHT},carouselBackgroundColor:{backgroundColor:"#413A32"}};break;case"4":case"5":r={contentBackground:i?{"background-image":`url('${n+t.cloudyImageUrl}')`}:{background:o.BG_CLOUDY},carouselBackgroundColor:{backgroundColor:"#45546F"}};break;case"30":case"31":case"32":r={contentBackground:i?{"background-image":`url('${n+t.cloudyNightImageUrl}')`}:{background:o.BG_CLOUDY_NIGHT},carouselBackgroundColor:{backgroundColor:"#214667"}};break;case"27":case"67":r={contentBackground:i?{"background-image":`url('${n+t.stormImageUrl}')`}:{background:o.BG_STORM},carouselBackgroundColor:{backgroundColor:"#4A586E"}};break;case"54":case"68":r={contentBackground:i?{"background-image":`url('${n+t.stormNightImageUrl}')`}:{background:o.BG_STORM_NIGHT},carouselBackgroundColor:{backgroundColor:"#322D46"}};break;case"9":case"12":case"18":case"21":case"63":case"65":case"73":case"89":r={contentBackground:i?{"background-image":`url('${n+t.fogImageUrl}')`}:{background:o.BG_FOG},carouselBackgroundColor:{backgroundColor:"#3E3E62"}};break;case"36":case"39":case"45":case"48":case"64":case"66":case"74":case"90":r={contentBackground:i?{"background-image":`url('${n+t.fogNightImageUrl}')`}:{background:o.BG_FOG_NIGHT},carouselBackgroundColor:{backgroundColor:"#2A3C4F"}}}return r}}var _=i("D57K"),H=i("ADRF"),$=i("KETb");class G{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},G.defaultConfig),t)}getTrendResponse(e,t){return Object(_.a)(this,void 0,void 0,(function*(){const i={method:"GET",headers:{},credentials:"include"},n=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"market",value:null==e?void 0:e.region},{key:"locale",value:s.b.Locale},{key:"region",value:null==e?void 0:e.region},{key:"lon",value:null==e?void 0:e.longitude},{key:"lat",value:null==e?void 0:e.latitude},{key:"units",value:t===h.m.Fahrenheit?"F":"C"}],a=new URL(this.cfg.path,this.cfg.endpoint);a.search=H.a.keyValueArrayToQueryString(n);const r=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,i);if(!e.ok)throw Error(e.statusText);return e.json()})),"getWeatherDailyTrend");return this.getWeatherDailyTrendFromResponse(r)}))}getWeatherDailyTrendFromResponse(e){var t,i;let n=(null==e?void 0:e.value)||[],a={height:"cm"};const r=[];return n[0]&&(a=n[0].units,n=(null===(i=null===(t=n[0].responses[0])||void 0===t?void 0:t.average[0])||void 0===i?void 0:i.days)||[],n.forEach(e=>{r.push({aggYears:e.aggYears,precipDays:e.precipDays,recPrecip:`${e.recPrecip} ${a.height}`,precipDate:e.precipDate,avgPrecip:`${e.avgPrecip}  ${a.height}`,snowDays:e.snowDays,recSnow:`${e.recSnow} ${a.height}`,snowDate:e.snowDate,avgSnow:`${e.avgSnow}  ${a.height}`,recHi:e.recHi,recLo:e.recLo,tempHi:e.tempHi,tempLo:e.tempLo,hiDate:e.hiDate,loDate:e.loDate})})),r}}G.defaultConfig={endpoint:"https://api.msn.com",path:"weather/dailytrend",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};class z{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},z.defaultConfig),t)}getTrendResponse(e,t){return Object(_.a)(this,void 0,void 0,(function*(){const i={method:"GET",headers:{},credentials:"include"},n=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"market",value:null==e?void 0:e.region},{key:"locale",value:s.b.Locale},{key:"region",value:null==e?void 0:e.region},{key:"lon",value:null==e?void 0:e.longitude},{key:"lat",value:null==e?void 0:e.latitude},{key:"units",value:t===h.m.Fahrenheit?"F":"C"}],a=new URL(this.cfg.path,this.cfg.endpoint);a.search=H.a.keyValueArrayToQueryString(n);const r=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,i);if(!e.ok)throw Error(e.statusText);return e.json()})),"getWeatherMonthlyTrend");return this.getWeatherMonthlyTrendFromResponse(r)}))}getWeatherMonthlyTrendFromResponse(e){var t,i;let n=(null==e?void 0:e.value)||[],a={height:"cm"};const r=[];return n[0]&&(a=n[0].units,n=(null===(i=null===(t=n[0].responses[0])||void 0===t?void 0:t.average[0])||void 0===i?void 0:i.Months)||[],n.forEach(e=>{r.push({avgPrecipUnit:`${e.avgPrecip} ${a.height}`,avgPrecip:e.avgPrecip,snowDays:e.snowDays,recHi:e.recHi,recLo:e.recLo,tempHi:e.tempHi,tempLo:e.tempLo,hiDate:e.hiDate,loDate:e.loDate,validTime:e.valid,monthIndex:e.monthIndex})})),r}}z.defaultConfig={endpoint:"https://api.msn.com",path:"weather/monthlytrend",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};var V=i("HDSB"),q=i("VbA2");function K(e){const t=Object(V.a)()?window.fetch.bind(window):q.b;return new z(t,e)}function Y(e){const t=Object(V.a)()?window.fetch.bind(window):q.b;return new G(t,e)}var J=i("7oW3"),Q=i("x/PH"),X=i("8CFJ"),Z=i("yewK"),ee=i("foc0");const te={1:"linear-gradient(180deg, #1974BA 0%, #1B7BC1 100%)",4:"linear-gradient(180deg, #376DBA 0%, #4177C1 100%)",8:"linear-gradient(180deg, #476AA8 0%, #5173AF 100%)",27:"linear-gradient(180deg, #5D5EB3 0%, #6B6DC0 100%)",7:"linear-gradient(180deg, #626DA0 0%, #6974A7 100%)",9:"linear-gradient(180deg, #6D6D87 0%, #73738D 100%)",6:"linear-gradient(180deg, #7C6648 0%, #846D4D 100%)"},ie={1:"25,116,186",4:"55,109,186",8:"71,106,168",27:"93,94,179",7:"98,109,160",9:"109,109,135",6:"124,102,72"},ne={1:"1",2:"1",3:"1",4:"4",5:"4",6:"6",7:"7",8:"8",9:"9",10:"8",11:"8",12:"9",13:"8",14:"8",15:"7",16:"7",17:"8",18:"9",19:"8",20:"7",21:"9",22:"8",23:"8",24:"7",25:"7",26:"7",27:"27",28:"1",29:"1",30:"4",31:"4",32:"4",33:"6",34:"7",35:"8",36:"9",37:"8",38:"8",39:"9",40:"8",41:"8",42:"7",43:"7",44:"8",45:"9",46:"8",47:"7",48:"9",49:"8",50:"8",51:"8",52:"7",53:"7",54:"27",57:"7",58:"7",59:"7",60:"7",61:"6",62:"6",63:"9",64:"9",65:"9",66:"9",67:"27",68:"27",69:"8",70:"8",71:"8",72:"8",73:"9",74:"9",75:"8",76:"8",77:"8",78:"8",79:"8",80:"8",81:"7",82:"7",83:"8",84:"8",85:"8",86:"8",87:"6",88:"6",89:"9",90:"9",91:"6",92:"6",93:"6",94:"6",95:"9",96:"9",101:"1",102:"1"};class ae{static getSkyCodeBackgroundGradientColors(e){const t=Object.prototype.hasOwnProperty.call(ne,e)?ne[e]:e;return te[t]||te[1]}static getSkyCodeBackgroundGradientColorsForChevron(e){const t=Object.prototype.hasOwnProperty.call(ne,e)?ne[e]:e;return ie[t]||ie[1]}}var re=i("GFO5");const oe={1:"BBih5H.img",3:"BB1kvzy.img",5:"BB1kc8s.img",6:"BBimeH.img",7:"BBiAT6.img",8:"BBi9ul.img",9:"BBi9v6.img",10:"BBiyB9.img",12:"BBihcA.img",14:"BBiyCq.img",15:"BBiyD0.img",16:"BB1kvEj.img",20:"BBiAZc.img",23:"BB1kvFq.img",24:"BBi9D1.img",26:"BB1kKUu.img",27:"BBhZsN.img",28:"BBiwNf.img",30:"BB1kKVy.img",43:"BB1kPhF.img",50:"BB1kMP0.img",77:"BB1kllo.img",78:"BB1kj0A.img",82:"BB1kvLx.img",91:"BBiclk.img"},se={17:"8",31:"30",49:"14",41:"14",35:"8",4:"3",19:"8",22:"14",23:"23",40:"8",25:"15",34:"7",47:"20",52:"15",53:"26",57:"7",58:"7",59:"7",60:"7",81:"26",11:"10",37:"10",38:"10",51:"24",65:"16",66:"43",69:"10",70:"10",71:"10",72:"10",73:"16",74:"43",89:"12",92:"91",32:"5",2:"1",101:"1",42:"15",33:"6",61:"6",62:"6",87:"6",88:"6",93:"6",94:"6",95:"6",96:"6",54:"27",67:"27",68:"27",90:"12",18:"9",21:"9",36:"9",45:"9",48:"9",63:"9",64:"9",29:"28",102:"28",44:"8",46:"8",79:"23",80:"50",76:"24",75:"24",83:"77",84:"78",85:"24",86:"24",39:"12",13:"8"},ce={6:"AA2FLEn.img",46:"AA2Vf8S.img",34:"AA2UZTY.img",28:"AA2SEPB.img",30:"AA2FOda.img",3:"AA2FOcb.img",92:"AA2UPD7.img",19:"AA2UELK.img",35:"AA2FrcC.img",4:"AA35sdN.img",39:"AA2UMEF.img",33:"AA2UMNK.img",12:"AA2FOco.img",37:"AA2FrcG.img",32:"AA2URWn.img",31:"BBaI7S.img",8:"AA2G17I.img",76:"AA2FBBm.img",91:"AA2FGJd.img",1:"AA2FDUe.img",27:"AA2UMTN.img",40:"AA2FBxU.img",10:"AA2G17Q.img",7:"AA2FQNo.img",36:"AA2UKl3.img",15:"AA2FLEO.img",13:"AA2FBqu.img",42:"AA2V2cP.img",5:"AA2FYSh.img",0:"AA2FwdJ.img",54:"AA2FW7R.img",75:"AA2FOlF.img",9:"AA2FtKC.img"},ue={6:"26201d",46:"12191c",34:"161c26",28:"061723",30:"00173f",3:"00173f",92:"1c1b0f",19:"0e2230",35:"0e1421",4:"001f4e",39:"0a0a12",33:"26201d",12:"050403",37:"111b16",32:"131a28",31:"022332",8:"111b16",76:"121919",91:"00173f",1:"021a56",27:"1e191c",40:"0e1421",10:"111b16",7:"161e33",36:"161e33",15:"161e33",13:"0e1421",42:"000000",5:"00173f",0:"161e33",54:"060519",75:"121919",9:"00173f"},de={6:"AA2IQVk.img",46:"AA2XO1P.img",34:"AA2J3Sb.img",28:"AA2XYnz.img",30:"AA2IYDF.img",3:"AA2JbD3.img",2:"AA2JbCv.img",19:"AA2XDFT.img",35:"AA2ITBO.img",4:"BB47P5d.img",39:"AA2XlvE.img",33:"AA2ILM4.img",12:"AA2Jjtm.img",37:"AA2IYHX.img",32:"AA2ITzB.img",31:"AA2J3Pd.img",8:"AA2IOkD.img",76:"AA2J3Rp.img",91:"AA2J6vU.img",1:"AA2IJ5n.img",27:"AA2JgV3.img",40:"AA2ILJp.img",10:"AA2IW8j.img",7:"AA2XTae.img",36:"AA2IWbe.img",15:"AA2IQUQ.img",13:"AA2Jefs.img",42:"AA2XB3J.img",5:"AA2J96r.img",54:"AA2JbJP.img",75:"AA2IOk1.img",9:"AA2IOox.img",11:"AA2JjsU.img"},le={2:"1",101:"1",29:"28",102:"28",14:"13",22:"13",23:"13",41:"40",49:"40",50:"40",44:"35",17:"8",79:"19",80:"46",11:"10",16:"10",24:"10",65:"10",69:"10",71:"10",73:"10",38:"37",43:"37",51:"37",66:"37",70:"37",72:"37",74:"37",61:"6",87:"6",93:"6",95:"6",62:"33",88:"33",94:"33",96:"33",89:"12",67:"27",68:"54",20:"7",25:"7",26:"7",57:"7",59:"7",81:"7",47:"34",52:"34",53:"34",58:"34",60:"34",82:"34",90:"39",18:"9",21:"9",63:"9",45:"36",48:"36",64:"36",77:"75",83:"75",85:"75",78:"76",84:"76",86:"76"};class he{static getSkyCodeV2Url(e,t){const i=Object.prototype.hasOwnProperty.call(se,e)?se[e]:e;switch(t){case re.a.Size24:return he.skyCodeV2Path+"24/"+re.b[i];case re.a.Size40:return he.skyCodeV2Path+"40/"+re.b[i];case re.a.Size68:return he.skyCodeV2Path+"68/"+re.b[i];case re.a.Size106:return he.skyCodeV2Path+"106/"+re.b[i];default:return null}}static getMiniNavSkyCodeUrl(e){const t=Object.prototype.hasOwnProperty.call(se,e)?se[e]:e;return he.skyCodePath+oe[t]}static getSkyCodeBackgroundUrl(e){const t=Object.prototype.hasOwnProperty.call(le,e)?le[e]:e;return he.skyCodePath+ce[t]}static getSkyCodeThemeColor(e){const t=Object.prototype.hasOwnProperty.call(le,e)?le[e]:e;return ue[t]}static getSkyCodeGradientUrl(e){const t=Object.prototype.hasOwnProperty.call(le,e)?le[e]:e;return he.skyCodePath+de[t]}}he.skyCodePath="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",he.skyCodeV2Path="//assets.msn.com/weathermapdata/1/static/icons/";var ge=i("cYI1"),pe=i("nwfF"),fe=i("1I/+"),ve=i("zfSW"),me=i("SHdd"),ye=i("rvYQ"),be=i("dTwT"),Se=i("54Lz"),Ce=i("tERu"),Oe=i("4wjP"),Ae=i("HxRh"),Le=i("XlyT"),we=i("tMmC"),ke=i("/+Un"),Te=i("5Uqz"),De=i("1w6q"),je=i("3Amp"),Ie=i("msIb");class Pe{constructor(e,t){this.fetchImpl=e,this.config=t,this.ocid="Peregrine",this.currentWeatherApi="weather/current"}getSingleLocationWeather(e,t){return Object(_.a)(this,void 0,void 0,(function*(){if(!r.a.isValid(e))return;const i=yield Ie.a.getBaseRequestData("GET"),n=[...Ie.a.getCommonParams2(this.ocid),{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"locale",value:ye.a.CurrentMarket},{key:"units",value:t===h.m.Fahrenheit?"F":"C"}],a=new URL(`${this.currentWeatherApi}${ye.a.ServiceUrlBase.search}`,ye.a.ServiceUrlBase);let o;n.forEach(e=>{e.value&&a.searchParams.set(e.key,e.value)}),a.searchParams.delete("fdhead"),a.searchParams.delete("user"),a.searchParams.delete("activityId");try{const e=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,i);if(!e.ok)throw o=`code=${e.status}, ${e.statusText}`,Error(e.statusText);return e.json()})),"getCurrentWeather");return Pe.convertResponse(e,a.href)}catch(e){o||(o=e&&e.toString()),Object(Le.c)(e,Ae.mj,o+","+this.currentWeatherApi,a.href)}}))}static convertResponse(e,t){var i,n,a,r,o,s,c,u;const d=null===(s=null===(o=null===(r=null===(a=null===(n=null===(i=null==e?void 0:e.value)||void 0===i?void 0:i[0])||void 0===n?void 0:n.responses)||void 0===a?void 0:a[0])||void 0===r?void 0:r.weather)||void 0===o?void 0:o[0])||void 0===s?void 0:s.current;if(d)return{currentTemperature:null===(c=null==d?void 0:d.temp)||void 0===c?void 0:c.toString(),pvdrIcon:null!==(u=null==d?void 0:d.pvdrIcon)&&void 0!==u?u:""+(null==d?void 0:d.icon)};Object(Le.b)(Ae.mj,"Unable to get current weather info",t)}getWeatherInOneCall(e,t){return Object(_.a)(this,void 0,void 0,(function*(){const{appId:i,apiKey:n,ocid:a,endpoint:o}=this.config,c={method:"GET",headers:{}},u=ye.a.CurrentRequestTargetScope.locale,d=[{key:"latLongList",value:e.filter(r.a.isValid).map(e=>r.a.toLatLong(e)).join("|")},{key:"locale",value:u.language+"-"+u.market},{key:"units",value:t===h.m.Fahrenheit?"F":"C"},{key:"appId",value:i},{key:"apiKey",value:n},{key:"ocid",value:a},{key:"wrapOData",value:"false"}],l=new URL(this.currentWeatherApi,o);let g;d.forEach(e=>{e.value&&l.searchParams.set(e.key,e.value)}),"zh-cn"==s.b.Locale&&1==this.config.apiGetCmaRegionAlert&&l.searchParams.set("getCmaAlert","true");try{const t=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,c);if(!e.ok)throw g=`code=${e.status}, ${e.statusText}`,Error(e.statusText);return e.json()})),"getCurrentWeather");return Pe.convertResponseForOneCall(t,l.href,e)}catch(e){g||(g=e&&e.toString()),Object(Le.c)(e,Ae.mj,g+","+this.currentWeatherApi,l.href)}}))}static convertResponseForOneCall(e,t,i){var n,a,o,s,c,u,d,l,h,g,p,f,v,m,y,b,S,C,O,A,L,w,k,T,D;const j=Array.isArray(e)?e:[e],I=null===(n=null==j?void 0:j[0])||void 0===n?void 0:n.latLongIdMap;if(!I)return void Object(Le.b)(Ae.mj,"Unable to get current weather info",t);const P={};for(const e of j){const t={currentTemperature:null===(d=null===(u=null===(c=null===(s=null===(o=null===(a=null==e?void 0:e.responses)||void 0===a?void 0:a[0])||void 0===o?void 0:o.weather)||void 0===s?void 0:s[0])||void 0===c?void 0:c.current)||void 0===u?void 0:u.temp)||void 0===d?void 0:d.toString(),pvdrIcon:null===(f=null===(p=null===(g=null===(h=null===(l=null==e?void 0:e.responses)||void 0===l?void 0:l[0])||void 0===h?void 0:h.weather)||void 0===g?void 0:g[0])||void 0===p?void 0:p.current)||void 0===f?void 0:f.pvdrIcon,alertSignificance:null===(S=null===(b=null===(y=null===(m=null===(v=null==e?void 0:e.responses)||void 0===v?void 0:v[0])||void 0===m?void 0:m.weather)||void 0===y?void 0:y[0])||void 0===b?void 0:b.current)||void 0===S?void 0:S.alertSignificance,alertCount:null===(w=null===(L=null===(A=null===(O=null===(C=null==e?void 0:e.responses)||void 0===C?void 0:C[0])||void 0===O?void 0:O.weather)||void 0===A?void 0:A[0])||void 0===L?void 0:L.current)||void 0===w?void 0:w.alertCount},i=null===(D=null===(T=null===(k=null==e?void 0:e.responses)||void 0===k?void 0:k[0])||void 0===T?void 0:T.source)||void 0===D?void 0:D.id;P[i]=t}return i.map(e=>r.a.toLatLong(e)).map(e=>P[I[e]])}getWeather(e,t){return this.config.fetchAllInOneCall?this.getWeatherInOneCall(e,t):Promise.all(e.map(e=>this.getSingleLocationWeather(e,t)))}}var Fe=i("u5KZ");class Ue{constructor(e,t){this.dc=e,this.defaultConfigUnit=t,this.getGeoLocation=()=>this.dc.getGeoLocation(),this.getRecentLocations=()=>this.dc.getRecentLocations(),this.getHomeLocationfromCookies=()=>this.dc.getHomeLocationfromCookies()}fetchWeather(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){!e||r.a.isValid(e)||e.el||(we.a.log("ignore Invalid input location: "+JSON.stringify(e)),e=null),t&&t!==h.m.Celsius&&t!==h.m.Fahrenheit&&(t=null);const{activeWeatherLocation:n,activeUnit:a,activeFetchOptions:o,activeOptions:c}=yield this.mapToRequestParams(e,t,i);return c.partialHourly=null==i?void 0:i.partialHourly,c.hourlyStartDay=null==i?void 0:i.hourlyStartDay,c.hourlyDataOnly=null==i?void 0:i.hourlyDataOnly,c.hourlyDataDays=null==i?void 0:i.hourlyDataDays,c.userProfileFetch=null==i?void 0:i.userProfileFetch,n?this.dc.fetchWeatherDataAndLocationName(n,a,o,c):(Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.rj),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},Ae.rj.pb),{customMessage:`Geo Latitude = ${s.b.ClientSettings&&s.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${s.b.ClientSettings&&s.b.ClientSettings.geo_long}`})})),!1)}))}updateWeather(e,t){return Object(_.a)(this,void 0,void 0,(function*(){const i=this.dc.getCurrentState().unit;return yield this.fetchWeather(e,i,t)}))}loadPartialUserProfleInLocal(){let e=this.readPartialUserProfileInLocal();return e=N.e.validateFix(e),e}setHome(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=[];t.push(this.dc.pdpserviceClient.setHomeLocation(e));const i=this.dc.getCurrentState().profile;(null==i?void 0:i.locationMode)!==h.d.SpecifyLocation&&t.push(this.dc.pdpserviceClient.updateUserSettings(null,h.d.SpecifyLocation.toString()));const n=(yield Promise.all(t)).every(e=>!!e);if(n){let t=this.dc.getCurrentState().profile;const i=t.home;t.home=e,t.home.from=h.j.HomeFromUserSet,t.locationMode=h.d.SpecifyLocation,i&&(delete i.from,t=N.e.visit(t,i),this.dc.setRecentLocations(t.recents)),J.a.updateWeatherUserProfile.getActionSender(this.dc).send(N.e.validateFix(t))}return n}))}addFavorite(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=yield this.dc.pdpserviceClient.addFavoriteLocation(e);if(t){const t=N.e.favor(this.dc.getCurrentState().profile,e);J.a.updateWeatherUserProfile.getActionSender(this.dc).send(t)}return t}))}removeFavorite(e,t=!0){return Object(_.a)(this,void 0,void 0,(function*(){const i=yield this.dc.pdpserviceClient.removeFavoriteLocation(e);if(i){const i=N.e.disfavor(this.dc.getCurrentState().profile,e,t);J.a.updateWeatherUserProfile.getActionSender(this.dc).send(i)}return i}))}}class Re extends Ue{mapToRequestParams(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){let n,a;const r=i||{},o=new Z.c;return e&&t?(n=e,a=t):(o.up=!0,e&&!t?(n=e,a=this.defaultConfigUnit,o.usePreference(Z.a.Unit)):!e&&t?(n=this.getGeoLocation(),a=t,o.usePreference(Z.a.Location)):(n=this.getGeoLocation(),a=this.defaultConfigUnit,o.usePreference(Z.a.LocationAndUnit)),(null==r?void 0:r.disableFetchRegionData)&&o.setClientRequestInfo(Object.assign(Object.assign({},o.clientRequestInfo),{disableFetchRegionData:null==r?void 0:r.disableFetchRegionData}))),(null==r?void 0:r.filterRuleValue)&&o.setFilterRule(null==r?void 0:r.filterRuleValue),{activeWeatherLocation:n,activeUnit:a,activeFetchOptions:r,activeOptions:o}}))}updateUnitAndFetchWeather(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().currentLocation,i=e!==this.dc.getCurrentState().unit;yield this.fetchWeather(t,e),i&&(this.dc.pdpserviceClient.setDisplayUnit(e),Object(ve.d)({id:me.a.InvalidateWeatherPdp,type:"command"}),Object(ke.e)()||this.dc.setDisplayUnitCookie(e))}))}readPartialUserProfileInLocal(){const e=this.dc.getCurrentState().profile||{};return e.recents=this.getRecentLocations(),e.signIn=Object(ke.e)(),e.signIn?e.unit=e.unit||this.defaultConfigUnit:e.unit=e.unit||this.dc.getDisplayUnitFromCookie()||this.defaultConfigUnit,e}}class Ne extends Ue{mapToRequestParams(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){let n,a;const r=i||{},o=new Z.c;return e&&t?(n=e,a=t):(o.up=!0,e&&!t?(n=e,a=this.defaultConfigUnit,o.usePreference(Z.a.Unit)):!e&&t?(n=this.getGeoLocation(),a=t,o.usePreference(Z.a.Location)):(n=this.getGeoLocation(),a=this.defaultConfigUnit,o.usePreference(Z.a.LocationAndUnit))),(null==r?void 0:r.disableFetchRegionData)&&o.setClientRequestInfo(Object.assign(Object.assign({},o.clientRequestInfo),{disableFetchRegionData:null==r?void 0:r.disableFetchRegionData})),(null==r?void 0:r.filterRuleValue)&&o.setFilterRule(null==r?void 0:r.filterRuleValue),{activeWeatherLocation:n,activeUnit:a,activeFetchOptions:r,activeOptions:o}}))}updateUnitAndFetchWeather(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=this.dc.getCurrentState().currentLocation;yield this.fetchWeather(t,e),this.dc.pdpserviceClient.setDisplayUnit(e),Object(ve.d)({id:me.a.InvalidateWeatherPdp,type:"command"})}))}readPartialUserProfileInLocal(){const e=this.dc.getCurrentState().profile||{};return e.recents=this.getRecentLocations(),e.signIn=!0,e.unit=e.unit||this.defaultConfigUnit,e}}var Be=i("y+Kz"),Me=i("Uw7R"),xe=i("B9v6"),We=i("oilT");class Ee{constructor(e,t,i){this.fetchImpl=e,this.config=t,this.locationHref=i,this.schemaTranslator=new We.a(t.truncateTimezone,i)}}class _e extends Ee{constructor(){super(...arguments),this.HEADER_KEY_ALU="x-weather-alu",this.HEADER_KEY_ONESERVICE_LATENCY="onewebservicelatency",this.weatherApiPath="weather/overview",this.weatherHourlyApiPath="weather/hourlyForecast",this.HEADER_KEY_PREFERENCE="x-weather-preference"}shouldAttachCookie(e,t){return!this.config.isFailOverHost&&("zh-cn"!==e&&!(!t||!t.readChoice&&!t.saveChoice))}getWeather(e,t,i){var n,a;return Object(_.a)(this,void 0,void 0,(function*(){if(!r.a.isValid(e)&&!e.el)return null;const{appId:o,apiKey:c,ocid:u,endpoint:d,path:l,hourlyPath:g,includenowcasting:p,days:f,partialHours:v,noDynamicQueryParams:m,includemapsmetadata:y,nowcastingv2:b,alertDistanceinkm:S,bypassCache:C,nowcastingapi:O,cutHour:A,regionCategories:L,features:w,fdhead:k}=this.config.weatherApi;let T;const D=!(null==i?void 0:i.userProfileFetch);T=(null==i?void 0:i.hourlyDataOnly)?g||this.weatherHourlyApiPath:D&&(null==l?void 0:l.endsWith("user"))?this.weatherApiPath:l||this.weatherApiPath;const j=ye.a.CurrentRequestTargetScope.locale,I=j.language+"-"+j.market,P=yield Ie.a.getBaseRequestData("GET");this.shouldAttachCookie(I,i)&&(P.credentials="include"),P.referrerPolicy="no-referrer-when-downgrade";const F=new URL(T,d);Ie.a.getCommonParams2(u,!1).forEach(e=>{F.searchParams.set(e.key,e.value)}),F.searchParams.set("locale",I),F.searchParams.set("inclup","1"),e.el?F.searchParams.set("el",e.el):(F.searchParams.set("lat",e.latitude),F.searchParams.set("lon",e.longitude)),(null==i?void 0:i.up)&&F.searchParams.set("up","1"),F.searchParams.set("units",t===h.m.Fahrenheit?"F":"C"),F.searchParams.set("region",j.market),o&&F.searchParams.set("appId",o),F.searchParams.set(Be.s.market,e.isoCode||j.market),F.searchParams.set(Be.s.apiKey,c),F.searchParams.set(Be.s.wrapOData,"false"),y&&F.searchParams.set("includemapsmetadata","true"),L&&F.searchParams.set("regioncategories",L),k?F.searchParams.set("fdhead",k):F.searchParams.delete("fdhead");const U=(w||[]).join(",");w&&F.searchParams.set("feature",U),(null===(n=null==i?void 0:i.clientRequestInfo)||void 0===n?void 0:n.disableFetchRegionData)||(S?F.searchParams.set("distanceinkm",S):F.searchParams.set("distanceinkm","10"),F.searchParams.set("regionDataCount","20"),F.searchParams.set("orderby","distance"));const R=i&&i.clientRequestInfo&&i.clientRequestInfo.experience;if(f){F.searchParams.set("days",f);const e=Ie.a.getOneServiceOCID(ye.a.TrackInfo,"peregrine");if(F.searchParams.set("pageOcid",e),R){const e=R+(i.clientRequestInfo.isStaleRefresh?"1":"0");F.searchParams.set("source",e)}}else F.searchParams.set("source",`${s.b.ClientSettings.verticalKey}_${Object(V.a)()?"csr":"ssr"}`);const N=v&&(null==i?void 0:i.partialHourly)&&!(null==i?void 0:i.hourlyDataOnly),M=N&&(null==i?void 0:i.hourlyStartDay)>1;N&&F.searchParams.set("hours",v),M&&F.searchParams.set("startday",((null==i?void 0:i.hourlyStartDay)-1).toString()),(null==i?void 0:i.hourlyDataDays)&&!f&&F.searchParams.set("days",i.hourlyDataDays),i&&i.readChoice&&F.searchParams.set("preference",""+i.readChoice),i&&i.saveChoice&&F.searchParams.set("setpreference",""+i.saveChoice),i&&i.filterRuleValue&&F.searchParams.set("filterRule",""+i.filterRuleValue),"zh-cn"==s.b.Locale&&1==this.config.apiGetCmaRegionAlert&&F.searchParams.set("getCmaAlert","true"),p&&F.searchParams.set("includenowcasting","true"),C&&F.searchParams.set("bypassCache","true"),b&&F.searchParams.set("nowcastingv2","true"),O&&F.searchParams.set("nowcastingapi",""+O),A&&D&&F.searchParams.set("cuthour",""+A),m&&(F.searchParams.delete("user"),F.searchParams.delete("activityId")),this.setParameterForMockDataApi(F);let x,W,E=Object.assign({},e);try{let t;if(x=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){let n;try{const e=Object(Me.a)();Object(xe.a)(h.k.overviewRequestStart,e),n=yield this.fetchImpl(F.href,P),t=Object(Me.a)()-e,Object(xe.a)(h.k.overviewRequestDuration,t)}catch(e){throw W=e&&e.toString(),e}if(!n.ok){if(W=`code=${n.status}, ${n.statusText}`,n.status>=400&&n.status<=500&&408!=n.status)return{isError:!0,errorCode:n.status};throw Error(n.statusText)}if(!Object(V.a)()&&n.headers){const e=n.headers.get(this.HEADER_KEY_ONESERVICE_LATENCY),i=e?+e:-1;-1!=i&&(Object(xe.a)(h.k.overviewRequestInternal,i),Object(xe.a)(h.k.overviewRequestNetwork,t-i))}const a=yield n.json(),o=Array.isArray(a)?a[0]:a,c=Array.isArray(a)?a[1]:void 0,u=c&&(c.ElTokens||c.elTokens);(e.el&&u||this.config.enableMockWeatherApiV2&&u)&&(E=Object.assign({latitude:u[0],longitude:u[1]},r.a.parseDetailShortInfo(u[2])),"0"===E.language&&(E.language=s.b.Locale),E.region=r.b.abbreviateUSState(E.region,E.language,E.isoCode));const d=(null==i?void 0:i.up)?_e.convert(c&&c.default):this.parseDefaultLocation(n.headers);return E=this.parseActualUsedSimpleLocation(n.headers,E,d),o})),T),null==x?void 0:x.isError)throw Error(W)}catch(t){if(null==i?void 0:i.preventLogExceptionOnFailure)return null;W||(W=t&&t.toString()),R&&(W=R+":"+W);const n=`Request url: [${F.href}]. Error detail: [${t&&t.toString()}]`,r=Object(V.a)()?navigator.userAgent:null;if(Object(B.a)(r))Object(Le.c)(t,Ae.nj,W+","+T,n);else if(422===(null==x?void 0:x.errorCode)){const i=`Request url: [${F.href}]. Error detail: [${t&&t.toString()}]. Location: [el=${e.el}, lat=${e.latitude}, lon=${e.longitude}]`;Object(Le.c)(t,Ae.sj,W+","+T,i)}else{let e=null;e=(null==i?void 0:i.hourlyDataOnly)?Ae.oj:"scard"===(null===(a=null==i?void 0:i.clientRequestInfo)||void 0===a?void 0:a.experience)?Ae.oi:Object(V.a)()?Ae.Bj:Ae.Cj,Object(Le.c)(t,e,W+","+T,n)}return null}if(W&&Object(V.a)()){const e=(null==i?void 0:i.hourlyDataOnly)?Ae.pj:Ae.Dj;Object(Le.c)(Error("Request failure but retry success"),e,W+","+T,`Request url: [${F.href}].`)}const H=(null==i?void 0:i.hourlyDataOnly)?this.schemaTranslator.TranslateToHourlyForecast(x):this.schemaTranslator.TranslateToWeatherOverview(x,E,this.config,N,M);return{home:void 0,location:E,forecast:H}}))}setParameterForMockDataApi(e){if(this.config.enableMockWeatherApiV1){const t=new URL(this.locationHref);e.searchParams.set("isMock","true");const i=t.searchParams.get("isMockTime");e.searchParams.set("isMockTime",i||"true")}if(this.config.enableMockWeatherApiV2){const t=new URL(this.locationHref).searchParams.get("testCaseId");t&&e.searchParams.set("id",t)}}parseDefaultLocation(e){const t=e&&e.get(this.HEADER_KEY_PREFERENCE),i=N.c.decodeCookieValue(t);if(i&&i.Weather&&i.Weather.DefaultWeatherLocation)return _e.convert(i.Weather.DefaultWeatherLocation)}static convert(e){if((e=r.b.toCamelCase(e,{ISOCode:"isoCode"}))&&e.geoCoordinates){const t=(e.language||r.a.extractLanguageTag(e.locationTypeId)||s.b.Locale).toLocaleLowerCase();return{addressLine:e.addressLine,subRegion:e.subRegion,locality:e.city,region:r.b.abbreviateUSState(e.state,t,e.isoCode),country:e.countryRegion,postalCode:e.postalCode,isoCode:e.isoCode,locationTypeId:e.locationTypeId,from:h.j.HomeFromServerCookie,language:t,latitude:""+e.geoCoordinates.latitude,longitude:""+e.geoCoordinates.longitude}}}parseActualUsedSimpleLocation(e,t,i){const n=e&&e.get(this.HEADER_KEY_ALU);let a,o=t;return n&&(a=(n||"").split(","))&&3===a.length&&(t.latitude!==a[1]||t.longitude!==a[2])&&r.a.isValid({latitude:a[1],longitude:a[2]})&&(o={latitude:a[1],longitude:a[2]}),!r.a.isValidLocationNameStructure(o)&&r.a.isSameLocationPoint(o,i,!0)&&(o=i),o}}class He{constructor(e,t){this.fetchImpl=e,this.config=t,this.API_PATH="weather/cookie"}getResolvedProfile(){return Object(_.a)(this,void 0,void 0,(function*(){const{appId:e,apiKey:t,ocid:i,endpoint:n}=this.config.weatherApi,a=this.API_PATH,r=yield Ie.a.getBaseRequestData("GET");r.credentials="include";const o=[...Ie.a.getCommonParams2(i,!1),{key:"appId",value:e},{key:Be.s.apiKey,value:t},{key:Be.s.wrapOData,value:"false"},{key:"inclup",value:"1"}],s=new URL(a,n);let c,u;o.forEach(e=>{s.searchParams.set(e.key,e.value)});try{u=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(s.href,r);if(!e.ok){c=`code=${e.status}, ${e.statusText}`;const t=`Error from 1s Status: ${e.status} ${e.statusText}`;throw Error(t)}const t=yield e.text(),i=t.indexOf("{"),n=t.lastIndexOf("}");if(i>0&&n>i){const e=JSON.parse(t.substring(i,n+1));return{home:_e.convert(e.default),unit:e.unit,locationMode:e.mode}}})),a)}catch(e){Object(Le.c)(e,Ae.Aj,c+","+this.API_PATH+", GET Home",s.href)}return u}))}}class $e extends Ue{constructor(e,t){super(e,t);const i=Object(V.a)()?window.fetch.bind(window):fetch;this.cookieClient=new He(i,e.config)}use1Call(){return this.dc.config&&this.dc.config.use1callForUnsignIn}mapToRequestParams(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){let n,a;const r=i||{},o=new Z.c;return e&&t?(n=e,a=t):(o.up=!0,e&&!t?(n=e,a=this.defaultConfigUnit,o.usePreference(Z.a.Unit)):!e&&t?(n=this.getGeoLocation(),a=t,o.usePreference(Z.a.Location)):(n=this.getGeoLocation(),a=this.defaultConfigUnit,o.usePreference(Z.a.LocationAndUnit))),r.saveUnit&&o.savePreference(Z.b.Unit),(null==r?void 0:r.disableFetchRegionData)&&o.setClientRequestInfo(Object.assign(Object.assign({},o.clientRequestInfo),{disableFetchRegionData:null==r?void 0:r.disableFetchRegionData})),(null==r?void 0:r.filterRuleValue)&&o.setFilterRule(null==r?void 0:r.filterRuleValue),{activeWeatherLocation:n,activeUnit:a,activeFetchOptions:r,activeOptions:o}}))}updateUnitAndFetchWeather(e){return Object(_.a)(this,void 0,void 0,(function*(){this.calledPdp=!1;const t=this.dc.getCurrentState().currentLocation,i=e!==this.dc.getCurrentState().unit;this.dc.pdpserviceClient.setDisplayUnit(e),yield this.fetchWeather(t,e,{saveUnit:i,userProfileFetch:!0})}))}readPartialUserProfileInLocal(){const e=this.dc.getCurrentState().profile||{};return e.recents=this.getRecentLocations(),e.signIn=!1,e}}var Ge,ze=i("HcI6");!function(e){e[e.SummaryApi=0]="SummaryApi",e[e.OverviewApi=1]="OverviewApi",e[e.DailyTrendApi=2]="DailyTrendApi",e[e.MonthlyTrendApi=3]="MonthlyTrendApi"}(Ge||(Ge={}));class Ve extends Ee{constructor(){super(...arguments),this.weatherSummaryApi="view/v1/weathersummary/"}getWeather(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){if(!e||!e.latitude||!e.longitude)return null;if(this.config.weatherApi){const{apiClientType:n,appId:a,apiKey:r,ocid:o,endpoint:s}=this.config.weatherApi;if(n==Ge.SummaryApi&&a&&r&&o&&s&&s.includes("api.msn.com"))return{location:e,forecast:yield this.getWeatherSummaryNew(e,t,i)}}return{location:e,forecast:yield this.getWeatherSummaryLegacy(e,t,i)}}))}getWeatherSummaryLegacy(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){const n={method:"GET",headers:{}},a=[{key:"units",value:t===h.m.Fahrenheit?"F":"C"},{key:"days",value:"5"}],r=new URL(this.weatherSummaryApi+ye.a.CurrentMarket+"/"+e.latitude+","+e.longitude+ye.a.ContentServiceUrlBase.search,ye.a.ContentServiceUrlBase);let o,s;a.forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{s=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,n);if(!e.ok)throw o=`code=${e.status}, ${e.statusText}`,Error(e.statusText);return e.json()})),"getWeatherSummary")}catch(e){return(null==i?void 0:i.preventLogExceptionOnFailure)||(o||(o=e&&e.toString()),Object(Le.c)(e,Ae.Bj,o+","+this.weatherSummaryApi,r.href)),null}return this.schemaTranslator.TranslateToWeatherForecast(s,e)}))}getWeatherSummaryNew(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){const{appId:n,apiKey:a,ocid:r,endpoint:o}=this.config.weatherApi,s={method:"GET",headers:{},credentials:"include"},c=ye.a.CurrentRequestTargetScope.locale,u=[{key:"locale",value:c.language+"-"+c.market},{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"units",value:t===h.m.Fahrenheit?"F":"C"},{key:"days",value:"5"},{key:"market",value:e.country},{key:"region",value:e.isoCode},{key:"appId",value:n},{key:"apiKey",value:a},{key:"ocid",value:r},{key:"wrapOData",value:"false"}],d=new URL("weather/summary",o);let l;u.forEach(e=>{e.value&&d.searchParams.set(e.key,e.value)});try{l=yield Object($.b)(()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,s);if(!e.ok)throw Error(e.statusText);return e.json()})),"getWeatherSummaryV2")}catch(e){return(null==i?void 0:i.preventLogExceptionOnFailure)||Object(Le.c)(e,Ae.Bj,void 0+",weather/summary",d.href),null}return this.schemaTranslator.TranslateToWeatherForecast(l,e)}))}}var qe=i("UDwi"),Ke=i("Z3LZ");class Ye extends De.a{constructor(e,t,i,n,a,r,s){super(e,t,i,n,a,r,s),this.filledUserProfile=!1,this.locationHyperCache=new Map;const c=Object(pe.a)();this.url=Object(fe.c)(s),Object(o.c)(this.url)&&(r.enableServerSettings=!0),this.cookieDomain=this.url&&/.cn$/i.test(new URL(this.url).hostname)?"msn.cn":"msn.com",this.serviceClient=function(e,t,i){return t.weatherApi&&t.weatherApi.apiClientType===Ge.OverviewApi?new _e(e,t,i):new Ve(e,t,i)}(c,r,this.url),this.localizeLocationService=new Q.a(c,r.weatherApi),this.multiLocationWeatherService=new Pe(c,Object.assign(Object.assign(Object.assign({},r.weatherApi),r.multiLocationWeather),r)),this.autoSuggestService=Object(g.a)(r&&r.autoSuggest),this.dailyTrendService=Y(r&&r.dailyTrend),this.monthlyTrendService=K(r&&r.monthlyTrend),this.pdpserviceClient=new ze.a,this.signInStatus=Ce.c.Unknown,this.defaultConfigUnit=this.config.setDefaultUnitToCelsius?h.m.Celsius:h.m.Fahrenheit,this.getWeatherCookies(),Object(Ke.j)().then(()=>this.deleteStaleCookies()),"msn.cn"===this.cookieDomain?this.operation=new Ne(this,this.defaultConfigUnit):r.enableServerSettings?this.operation=new Re(this,this.defaultConfigUnit):Object(ke.e)()?this.operation=new Ne(this,this.defaultConfigUnit):this.operation=new $e(this,this.defaultConfigUnit)}sendFetchWeatherSummaryFailureAction(){J.a.fetchWeatherSummaryFailure.getActionSender(this).send(Ae.Bj)}getAutoSuggestResponse(e,t=!0){return Object(_.a)(this,void 0,void 0,(function*(){try{const i=yield this.autoSuggestService.getAutoSuggestResponse(e,t);if(i)return i.forEach(e=>e.autoSuggestionName=r.a.getAutoSuggestionName(e)),i}catch(e){t&&Object(Le.c)(e,Ae.dj,"Autosuggest service call exception, useAutoSuggestionV6="+(this.config.autoSuggest&&this.config.autoSuggest.useV6))}return null}))}geocodeLocation(e){return Object(_.a)(this,void 0,void 0,(function*(){try{const t=yield this.autoSuggestService.geocodeSuggestion(e);if(null!==t)return Object.assign(Object.assign({},e),{longitude:t.longitude,latitude:t.latitude});Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.dj),{message:"failed to fetch location latitude and longitude in auto suggestion v6",pb:Object.assign(Object.assign({},Ae.dj.pb),{customMessage:e.searchText})}))}catch(e){Object(Le.c)(e,Ae.dj,"Geocoder exception for autosuggestion v6")}return null}))}getWeatherLocSearchMoreData(e){return Object(_.a)(this,void 0,void 0,(function*(){try{const t=yield this.autoSuggestService.getLocationSearchResponse(e);if(null!==t)return t.forEach(e=>e.autoSuggestionName=r.a.getAutoSuggestionName(e)),t;Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.uj),{message:"Msn location search returned no data",pb:Object.assign(Object.assign({},Ae.uj.pb),{customMessage:"UserInput: "+e})}))}catch(e){Object(Le.c)(e,Ae.tj,"Msn location search service call exception")}return null}))}getLocalizedDetectedLocation(){return Object(_.a)(this,void 0,void 0,(function*(){let e=r.a.headLocation();return e&&!r.a.isCurrentLocaleName(e)&&(e=yield this.localizeLocationService.getLocalisedLocationDetails(e)),e}))}fetchWeather(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){return!this.fetchWeatherPromise||(null==i?void 0:i.hourlyDataOnly)||(null==i?void 0:i.historyFetch)?this.fetchWeatherPromise=this.operation.fetchWeather(e,t,i):this.fetchWeatherPromise}))}getMultiLocationWeather(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=yield this.multiLocationWeatherService.getWeather(e,this.getCurrentState().profile.unit),i={};for(let n=0;n<e.length;n++)(null==t?void 0:t[n])&&(i[r.a.toLatLong(e[n])]=t[n]);return i}))}fetchWeatherDataAndLocationName(e,t,i,n){return Object(_.a)(this,void 0,void 0,(function*(){const o=yield new Promise((i,a)=>{let o=0;const s={},c=()=>s.forecast&&s.location?i(s):2===o?Object(V.a)()?i(s):a(new Error("Failed to fetch Weather forecast or location")):void 0;this.resolveWeatherData(e,t,n).then(e=>{++o,s.forecast=e&&e.forecast,s.home=e&&e.home,s.location=e&&e.location||s.location,e||this.sendFetchWeatherSummaryFailureAction(),c()}).catch(i=>{var a;let s=Object(V.a)()?Ae.Bj:Ae.Cj;"scard"===(null===(a=null==n?void 0:n.clientRequestInfo)||void 0===a?void 0:a.experience)&&(s=Ae.oi),this.sendFetchWeatherSummaryFailureAction(),Object(Le.c)(i,s,"Unexpected process weather summary data error",`${r.a.toDebugString(e)}, unit=${t}`),++o,c()}),this.resolveLocationName(e).then(e=>{++o,s.location=s.location||e,c()}).catch(t=>{Object(Le.c)(t,Ae.qj,"Unexpected process localize display name error",""+r.a.toDebugString(e)),++o,c()})});if(null==i?void 0:i.hourlyDataOnly)return J.a.patchHourlyForecastSuccess.getActionSender(this).send(o.forecast),!0;if(o&&o.forecast&&o.location){if(Object(V.a)())o.forecast.currentCondition.deepLink=Object(a.buildLink)(o.location,o.forecast.unit);else{const e=Object(fe.b)(this.requestContext.data.locationHref,"locationHref");o.forecast.currentCondition.deepLink=Object(a.buildLink)(o.location,o.forecast.unit,{locationHref:e})}o.location.displayName=r.a.getDisplayName(o.location),J.a.fetchWeatherSummarySuccess.getActionSender(this).send(o.forecast,o.location,o.forecast.unit);let e=this.getCurrentState().profile;return e.unit=o.forecast.unit,o.location.from?e.home=o.location:o.home&&(e.home=o.home),e.home&&(e.home.displayName=r.a.getDisplayName(e.home)),Object(V.a)()&&(i.bySearch&&(e=N.e.visit(e,o.location),this.setRecentLocations(e.recents)),this.updateHyperlocal()),J.a.updateWeatherUserProfile.getActionSender(this).send(e),!0}return!1}))}updateHyperlocal(){return Object(_.a)(this,void 0,void 0,(function*(){if(this.config.checkHyperlocal&&this.config.weatherApi.includenowcasting&&this.config.autoSuggest.useV6){const e=this.getCurrentState().currentLocation;this.checkLocationHyper().then(t=>{null!==t&&(Fe.a.sendClientLogEvent({message:`Visited location with name ${r.a.getDisplayName(e)}, hyperlocal check: ${t}`,type:"information"}),r.a.isSameLocationPoint(e,this.getCurrentState().currentLocation)&&J.a.updateHyperlocal.getActionSender(this).send(t))})}}))}checkLocationHyper(){return Object(_.a)(this,void 0,void 0,(function*(){const e=this.getCurrentState().currentLocation;if(r.a.hyperlocalLabeled(e))return r.a.isHyperlocal(e);{const t=r.a.getDisplayName(e);if(this.locationHyperCache.has(t))return this.locationHyperCache.get(t);this.locationHyperCache.set(t,null);const i=yield this.getAutoSuggestResponse(t,!1);if(i){for(const n of i)if(r.a.isSameLocationPoint(n,e)||r.a.getDisplayName(n)===t){const e=r.a.isHyperlocal(n);return this.locationHyperCache.set(t,e),e}this.locationHyperCache.set(t,!1)}return!1}}))}resolveLocationName(e){return Object(_.a)(this,void 0,void 0,(function*(){let t;if(r.a.getDisplayName(e)&&(t=e),t&&r.a.getDisplayName(t)||(t=N.e.find(this.getCurrentState().profile,e.latitude,e.longitude)),t&&r.a.getDisplayName(t)&&r.a.isCurrentLocaleName(t)||(t=yield this.localizeLocationService.getLocalisedLocationDetails(e)),t)return t.displayName=r.a.getDisplayName(t),t}))}resolveWeatherData(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){let n=yield this.getWeather(e,t,i);return n&&n.location&&(n.location=yield this.resolveLocationName(n.location)),n&&n.location||!this.config.defaultLocation?!r.a.isSameLocationPoint(n.location,r.a.headLocation())&&r.a.isSameLocationPoint(n.location,this.config.defaultLocation)?J.a.updateFallbackStatus.getActionSender(this).send(!0):J.a.updateFallbackStatus.getActionSender(this).send(!1):(i||(i=new Z.c),i.preventLogExceptionOnFailure=!0,n=yield this.getWeather(this.config.defaultLocation,t,i),n&&n.location&&(n.location=yield this.resolveLocationName(n.location)),J.a.updateFallbackStatus.getActionSender(this).send(!0)),n}))}updateUnitAndFetchWeather(e){return Object(_.a)(this,void 0,void 0,(function*(){J.a.updateWeatherUserProfile.getActionSender(this).send({unit:e}),yield this.operation.updateUnitAndFetchWeather(e)}))}updateWeather(e,t){return Object(_.a)(this,void 0,void 0,(function*(){return this.fetchWeatherPromise=null,yield this.operation.updateWeather(e,t)}))}setCurrentHomeLocation(){return Object(_.a)(this,void 0,void 0,(function*(){const e=this.getCurrentState().currentLocation,t=yield this.operation.setHome(e);return t||J.a.updateOperationFailure.getActionSender(this).send(h.e.setHomeFail),t}))}addFavoriteLocation(e){var t,i;return Object(_.a)(this,void 0,void 0,(function*(){if(((null===(i=null===(t=this.getCurrentState().profile)||void 0===t?void 0:t.favorites)||void 0===i?void 0:i.length)||0)>=N.e.MAX_FAVORITE_COUNT)return J.a.updateOperationFailure.getActionSender(this).send(h.e.exceedPinLocationLimit),!1;const n=yield this.operation.addFavorite(e);return this.setRecentLocations(this.getCurrentState().profile.recents),n}))}removeFavoriteLocation(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=yield this.operation.removeFavorite(e);return this.setRecentLocations(this.getCurrentState().profile.recents),t}))}removeLocation(e,t){return Object(_.a)(this,void 0,void 0,(function*(){if(t)return yield this.operation.removeFavorite(e,!1);{const t=this.getCurrentState().profile;return t.recents=r.a.removeLocation(t.recents,e),J.a.updateWeatherUserProfile.getActionSender(this).send(t),this.setRecentLocations(t.recents),!0}}))}findMyLocationAndFetchWeather(){const e=this.getGeoLocation();return this.updateWeather(e)}fetchActiveStateforWeather(e,t,i,n={}){return Object(_.a)(this,void 0,void 0,(function*(){return!1===t?this.fetchActiveLocationAndUnit(e).then(e=>e[0]):this.fetchSettingAndUpdateWeather(e,i,n).then(e=>e[0])}))}fetchSettingAndUpdateWeather(e,t,i={}){return Object(_.a)(this,void 0,void 0,(function*(){if(!e&&Ye.getWeatherLocationAndUnit&&Ye.getWeatherLocationAndUnitTime){if(Math.trunc((Date.now()-Ye.getWeatherLocationAndUnitTime)/6e4)<3)return Ye.getWeatherLocationAndUnit}Ye.getWeatherLocationAndUnitTime=Date.now();const n=this.getCurrentState().currentLocation;let a=n,r=this.defaultConfigUnit,o=this.isDetectLocationSetInCookie();return Ye.getWeatherLocationAndUnit=new Promise(e=>Object(_.a)(this,void 0,void 0,(function*(){try{a=this.getHomeLocationfromCookies()||this.getGeoLocation()||a,r=this.getDisplayUnitFromCookie()||r,yield this.updateSignedInStatus();const e=yield this.pdpserviceClient.read(i);e&&(e.locationMode&&(o=e.locationMode===h.d.DetectCurrentLocation),o?(a=this.getGeoLocation(),J.a.updateLocationDetectionState.getActionSender(this).send(h.d.DetectCurrentLocation,a)):e.home&&(a=e.home),e.unit&&(r=e.unit))}catch(e){Object(Le.c)(e,Ae.rj,"Weather Location fetch failed")}n&&n.displayName&&a&&n.latitude===a.latitude&&n.longitude===a.longitude&&n.locality===a.locality&&(a.displayName=n.displayName),e([a,r]),a||Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.rj),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},Ae.rj.pb),{customMessage:`Geo Latitude = ${s.b.ClientSettings&&s.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${s.b.ClientSettings&&s.b.ClientSettings.geo_long}`})})),a&&this.getWeatherForecastDataAndLocationName(a,r,t)}))),Ye.getWeatherLocationAndUnit}))}fetchActiveLocationAndUnit(e){return Object(_.a)(this,void 0,void 0,(function*(){if(Ye.getWeatherLocationAndUnit&&!e)return Ye.getWeatherLocationAndUnit;let t=this.getCurrentState().currentLocation,i=this.defaultConfigUnit;return Ye.getWeatherLocationAndUnit=new Promise(e=>Object(_.a)(this,void 0,void 0,(function*(){try{if(t=this.getHomeLocationfromCookies()||this.getGeoLocation()||t,i=this.getDisplayUnitFromCookie()||i,this.isDetectLocationSetInCookie()&&(t=this.getGeoLocation(),J.a.updateLocationDetectionState.getActionSender(this).send(h.d.DetectCurrentLocation,t)),t.displayName=r.a.getDisplayName(t),yield this.updateSignedInStatus(),this.isUserLoggedIn()){const e=yield this.pdpserviceClient.read();e&&(!this.isDetectLocationSetInCookie()&&e.home&&(t=e.home),e.unit&&(i=e.unit))}}catch(e){Object(Le.c)(e,Ae.rj,"Weather Location fetch failed")}e([t,i]),t||Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.rj),{message:"Weather Location fetch failed with empty activeWeatherLocation",pb:Object.assign(Object.assign({},Ae.rj.pb),{customMessage:`Geo Latitude = ${s.b.ClientSettings&&s.b.ClientSettings.geo_lat},\n                            & Geo Longitude =  ${s.b.ClientSettings&&s.b.ClientSettings.geo_long}`})})),t&&this.getWeatherForecastDataAndLocationName(t,i)}))),Ye.getWeatherLocationAndUnit}))}updateSettings(e,t,i,n,a,r={}){return Object(_.a)(this,void 0,void 0,(function*(){let o=e===h.d.SpecifyLocation&&t&&""!==t.latitude&&""!==t.longitude;o&&this.getCurrentState().currentLocation&&(o=!(t.latitude===this.getCurrentState().currentLocation.latitude&&t.longitude===this.getCurrentState().currentLocation.longitude));const s=i&&i!==this.getCurrentState().unit,c=e&&e!==this.getCurrentState().locationDetectionSetting;i||(i=this.getCurrentState().unit||this.defaultConfigUnit),t&&""!==t.latitude&&""!==t.latitude||(t=this.getCurrentState().currentLocation),e===h.d.DetectCurrentLocation?(t=this.getGeoLocation(),this.setDetectCurrentLocationCookies(),J.a.updateLocationDetectionState.getActionSender(this).send(h.d.DetectCurrentLocation,t),Object(Se.a)(t)):(this.RemoveDetectLocationCookies(),J.a.updateLocationDetectionState.getActionSender(this).send(e,t)),this.isUserLoggedIn()||(e===h.d.SpecifyLocation&&this.setHomeLocationInCookies(t),s&&this.setDisplayUnitCookie(i));const u=[];return!1!==n&&(o&&u.push(this.pdpserviceClient.setHomeLocation(t,r)),(s||c)&&u.push(this.pdpserviceClient.updateUserSettings(s?i.toString():null,c?e.toString():null,r))),yield Promise.all(u),J.a.updateWeatherSettings.getActionSender(this).send(h.f.Start),a||Object(ve.d)({id:me.a.InvalidateWeatherPdp,type:"command"}),t}))}updateSettingsAndFetch(e,t,i,n,a,r,o={}){return Object(_.a)(this,void 0,void 0,(function*(){return t=yield this.updateSettings(e,t,i,n,!0,o),yield this.getWeatherForecastDataAndLocationName(t,i,r),a||Object(ve.d)({id:me.a.InvalidateWeatherPdp,type:"command"}),t}))}updateSignedInStatus(){return Object(_.a)(this,void 0,void 0,(function*(){if(this.signInStatus===Ce.c.Unknown){const e=new Date;this.signInStatus=yield Object(ke.d)(),je.a.signedInStatus.registerObserver(t=>Object(_.a)(this,void 0,void 0,(function*(){if(!this.isUserLoggedIn()&&(this.signInStatus=yield Object(ke.d)(),this.isUserLoggedIn())){const t=new Date;we.a.log(`Time of login:${JSON.stringify((t.getTime()-e.getTime())/1e3)} seconds`),this.fetchActiveStateforWeather(!0)}})))}}))}isUserLoggedIn(){return this.signInStatus===Ce.c.SignedIn}updateLocationDisplayName(e){return Object(_.a)(this,void 0,void 0,(function*(){if(e&&r.a.getDisplayName(e)&&r.a.isCurrentLocaleName(e))return void J.a.updateLocationDisplayName.getActionSender(this).send(e);if(!r.a.isValid(e))return void Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.rj),{message:"No valid User location set "}));const t=yield this.localizeLocationService.getLocalisedLocationDetails(e);if(t){const e=N.e.visit(this.getCurrentState().profile,t);this.setRecentLocations(e.recents),J.a.updateWeatherUserProfile.getActionSender(this).send(e),J.a.updateLocationDisplayName.getActionSender(this).send(t)}}))}getWeatherForecastDataAndLocationName(e,t,i){var n;return Object(_.a)(this,void 0,void 0,(function*(){try{const n=yield this.getWeatherForecastData(e,t,i);return n&&this.updateLocationDisplayName(e),n}catch(e){let t=Ae.Bj;return"scard"===(null===(n=null==i?void 0:i.clientRequestInfo)||void 0===n?void 0:n.experience)&&(t=Ae.oi),Object(Le.c)(e,t,"Failure to parse weather response"),!1}}))}getWeatherForecastData(e,t,i){var n;return Object(_.a)(this,void 0,void 0,(function*(){if(!r.a.isValid(e))return Fe.a.sendAppErrorEvent(Object.assign(Object.assign({},Ae.rj),{message:"No valid User location set"})),!1;const a=yield this.getWeather(e,t,i);if(!a)return!1;const o=a.forecast,s=N.e.visit(this.getCurrentState().profile,e);s.unit=t,this.setRecentLocations(s.recents),J.a.updateWeatherUserProfile.getActionSender(this).send(s);return this.getCurrentState().settingUpdateStatus!=h.f.WCComplete&&("wcardwc"===(null===(n=null==i?void 0:i.clientRequestInfo)||void 0===n?void 0:n.experience)&&o&&(o.lastUpdated=Date.now().toString()),J.a.fetchWeatherSummarySuccess.getActionSender(this).send(o,e,t),!0)}))}updateWeatherDataState(e){const t=JSON.parse(e);if(!t||!t.userProfile||!t.userProfile.location)return;const i=t.userProfile,n=N.a.parseWeatherLocation(i.location),a=i.locationSettingMode?Number(i.locationSettingMode):h.d.DetectCurrentLocation,r=N.a.parseWeatherData(t,n);if(!r||!r.unit)return;const o=r.unit;J.a.updateLocationDetectionState.getActionSender(this).send(a,n),J.a.fetchWeatherSummarySuccess.getActionSender(this).send(r,n,o,h.f.WCComplete),Ye.getWeatherLocationAndUnit||(Ye.getWeatherLocationAndUnit=new Promise(e=>Object(_.a)(this,void 0,void 0,(function*(){e([n,o])}))),Ye.getWeatherLocationAndUnitTime=Date.now())}normalWeatherCondition(){return this.getWeatherCondition()==h.g.normal}getWeatherCondition(){var e,t,i,n,a,r;let o=h.g.normal;if(null===(e=this.config.minimapConfig)||void 0===e?void 0:e.enableMiniMap){const e=this.getCurrentState();if(this.config.minimapConfig.enableRainMap){this.config.minimapConfig.enableWeatherNowcast&&(null===(i=null===(t=null==e?void 0:e.nowcasting)||void 0===t?void 0:t.precipitation)||void 0===i?void 0:i.length)>0&&!!e.nowcasting.useNowcastSummary&&(o|=h.g.nowcast)}if(this.config.minimapConfig.minimapSevereWeatherType&&(null===(n=e.regionData)||void 0===n?void 0:n[0])){Object(qe.parseMapTypeFromFeatures)((null===(r=null===(a=e.regionData)||void 0===a?void 0:a[0])||void 0===r?void 0:r.eventclass)||"",this.config.minimapConfig.minimapSevereWeatherType)&&(o|=h.g.alert)}}return o}getGeoLocation(){let e=r.a.headLocation();return r.a.isValid(e)||(e=this.config.defaultLocation),e}getWeatherCookies(){switch(ye.a.CurrentRequestTargetScope&&ye.a.CurrentRequestTargetScope.pageType){case Oe.b.DHP:case Oe.b.NTP:this.cookieToUseForHomeLocation=h.i.WeatherSpartanHomeLocationCookie,this.cookieToUseForDegreeType=h.i.WeatherSpartanDegreeSettingCookie,this.cookieToUseForDetectLocation=h.i.WeatherSpartanDetectLocationSetting,this.cookieToUseForRecentLocations=h.i.WeatherSpartanRecentLocationCookie,this.cookieToUseForFavoriteLocations=h.i.WeatherSpartanFavoriteLocationCookie;break;default:this.cookieToUseForHomeLocation=h.i.WeatherHomeLocationCookie,this.cookieToUseForHomeLocationBackup=h.i.WeatherHomeLocationCookie+"Backup",this.cookieToUseForDegreeType=h.i.WeatherDegreeSettingCookie,this.cookieToUseForDetectLocation=h.i.WeatherDetectLocationSetting,this.cookieToUseForRecentLocations=h.i.WeatherRecentLocationCookie,this.cookieToUseForFavoriteLocations=h.i.WeatherFavoriteLocationCookie}}deleteStaleCookies(){const e=ye.a.CurrentRequestTargetScope&&ye.a.CurrentRequestTargetScope.pageType;if(this.cookieToUseForHomeLocation&&Object(Te.a)(this.cookieToUseForHomeLocation)&&this.deleteCookie(this.cookieToUseForHomeLocation),this.cookieToUseForHomeLocationBackup&&Object(Te.a)(this.cookieToUseForHomeLocationBackup)&&this.deleteCookie(this.cookieToUseForHomeLocationBackup),this.cookieToUseForRecentLocations&&Object(Te.a)(this.cookieToUseForRecentLocations))switch(e){case Oe.b.DHP:case Oe.b.NTP:this.deleteCookie(this.cookieToUseForRecentLocations);break;default:this.updateRecentLocationInLocalStorage(),Object(be.a)().getItem(h.i.WeatherRecentLocationLocalStorage)&&this.deleteCookie(this.cookieToUseForRecentLocations)}this.cookieToUseForFavoriteLocations&&Object(Te.a)(this.cookieToUseForFavoriteLocations)&&this.deleteCookie(this.cookieToUseForFavoriteLocations)}updateRecentLocationInLocalStorage(){const e=this.getRecentLocationsInCookies();this.setRecentLocations(e)}getHomeLocationfromCookies(e){const t=Object(Te.a)(e||this.cookieToUseForHomeLocation);return N.c.parseHomeCookieString(t)}getRecentLocations(){const e=Object(be.a)().getItem(h.i.WeatherRecentLocationLocalStorage);return e?JSON.parse(e):this.getRecentLocationsInCookies()}getRecentLocationsInCookies(){return N.c.parseCookieString(Object(Te.a)(this.cookieToUseForRecentLocations))}isDetectLocationSetInCookie(){const e=Object(Te.a)(this.cookieToUseForDetectLocation);return e&&e.length>0&&"1"===e}getDisplayUnitFromCookie(){const e=Object(Te.a)(this.cookieToUseForDegreeType);return e&&e.length>0?"F"===e?h.m.Fahrenheit:h.m.Celsius:null}setDisplayUnitCookie(e){const t=e===h.m.Celsius?"C":"F";Object(Te.c)(this.cookieToUseForDegreeType,t,h.i.cookieExpirationTimeInDays,this.cookieDomain,"/")}deleteCookie(e){return Object(Te.c)(e,"",-1,this.cookieDomain,"/")}setHomeLocationInCookies(e,t){const i=N.c.buildCookieString(e);return Object(Te.c)(t||this.cookieToUseForHomeLocation,i,h.i.cookieExpirationTimeInDays,this.cookieDomain,"/")}setRecentLocations(e){if(Object(be.a)().supported)Object(be.a)().setItem(h.i.WeatherRecentLocationLocalStorage,JSON.stringify(e));else if(Object(V.a)()){const t=N.c.buildCookieString(e);Object(Te.c)(this.cookieToUseForRecentLocations,t,h.i.cookieExpirationTimeInDays,this.cookieDomain,"/")}}setFavoritesLocationsInCookies(e){const t=N.c.buildCookieString(e);return Object(Te.c)(this.cookieToUseForFavoriteLocations,t,h.i.cookieExpirationTimeInDays,this.cookieDomain,"/")}setDetectCurrentLocationCookies(){Object(Te.c)(this.cookieToUseForDetectLocation,"1",h.i.cookieExpirationTimeInDays,this.cookieDomain,"/")}RemoveDetectLocationCookies(){Object(Te.c)(this.cookieToUseForDetectLocation,"0",-1,this.cookieDomain,"/")}fillUserProfile(){return Object(_.a)(this,void 0,void 0,(function*(){if(this.filledUserProfile)return!1;this.filledUserProfile=!0;const e=this.operation.loadPartialUserProfleInLocal();J.a.updateWeatherUserProfile.getActionSender(this).send(e);const{home:t,favorites:i,locationMode:n,unit:o}=yield this.pdpserviceClient.read();if(e.favorites=i,e.unit=Object(a.parseUnitFromLink)(new URL(this.url).searchParams)||o||this.defaultConfigUnit,e.home||(e.home=t),this.operation instanceof $e&&this.config.readFavoriteFromPdpForUnsignIn&&!e.home&&n!==h.d.DetectCurrentLocation&&(!i||i.length<=0)){const t=yield this.operation.cookieClient.getResolvedProfile();e.home=null==t?void 0:t.home}e.favorites&&e.favorites.forEach(e=>!e.displayName&&(e.displayName=r.a.getDisplayName(e))),e.home&&!e.home.displayName&&(e.home.displayName=r.a.getDisplayName(e.home)),e.recents&&e.recents.forEach(e=>!e.displayName&&(e.displayName=r.a.getDisplayName(e)));const s=N.e.validateFix(e);return J.a.updateWeatherUserProfile.getActionSender(this).send(s),!0}))}fillUserProfileFlyout(e){var t;return Object(_.a)(this,void 0,void 0,(function*(){const i=yield this.pdpserviceClient.read(void 0,!1);i.unit=(null===(t=this.getCurrentState().profile)||void 0===t?void 0:t.unit)||i.unit,i.favorites&&i.favorites.forEach(e=>!e.displayName&&(e.displayName=r.a.getDisplayName(e))),i.home&&!i.home.displayName&&(i.home.displayName=r.a.getDisplayName(i.home)),i.recents&&i.recents.forEach(e=>!e.displayName&&(e.displayName=r.a.getDisplayName(e)));const n=N.e.validateFix(i,e);return J.a.updateWeatherUserProfile.getActionSender(this).send(n),!0}))}addFavoriteLocationFlyout(e,t){return Object(_.a)(this,void 0,void 0,(function*(){const i=yield this.pdpserviceClient.addFavoriteLocation(e);if(i){const i=N.e.favor(this.getCurrentState().profile,e,t);J.a.updateWeatherUserProfile.getActionSender(this).send(i)}return i}))}getWeather(e,t,i){return Object(_.a)(this,void 0,void 0,(function*(){const n=yield this.serviceClient.getWeather(e,t,i);return n&&n.forecast?n:null}))}openLocationEditor(){J.a.openEditLocation.getActionSender(this).send()}}Ye.getWeatherLocationAndUnit=null;var Je=i("05Au");function Qe(e){if(e.currentLocation){const t=N.e.find(e.profile,e.currentLocation.latitude,e.currentLocation.longitude);t&&(t.displayName=r.a.getDisplayName(e.currentLocation))}}class Xe{constructor(){this.INITIAL_STATE={locationDetectionSetting:h.d.SpecifyLocation,unit:void 0,profile:{}}}reduce(e,t){if(!e)return this.INITIAL_STATE;if(!t)return e;let i=!1,n=null;return i=i||Je.a.handleAction(t,J.a.fetchWeatherSummarySuccess,(t,i,a,o)=>{n=Object.assign({},e),n.currentCondition=t.currentCondition,n.forecast=t.forecast,n.nowcasting=t.nowcasting,n.lastUpdated=t.lastUpdated,n.alertsInfo=t.alertsInfo,n.regionData=t.regionData,n.contentData=t.contentData,n.mapsMetaData=t.mapsMetaData,n.source=t.source,n.provider=t.provider,n.aqiProvider=t.aqiProvider,r.a.isValid(i)||(i=e.currentLocation),n.currentLocation=Object.assign({},i),Qe(n),n.unit=a,n.isPartialHour=t.isPartialHour,o&&(n.settingUpdateStatus=o)}),i=i||Je.a.handleAction(t,J.a.fetchWeatherSummaryFailure,t=>{n=Object.assign(Object.assign({},e),{error:Object.assign({},t),isPartialHour:!1})}),i=i||Je.a.handleAction(t,J.a.patchHourlyForecastSuccess,t=>{var i,a,r,o,s,c,u,d;if(n=Object.assign({},e),(null===(i=null==t?void 0:t.source)||void 0===i?void 0:i.id)===(null===(a=n.source)||void 0===a?void 0:a.id)&&(null==t?void 0:t.unit)===(null==n?void 0:n.unit)){const e=Math.min(null!==(o=null===(r=null==t?void 0:t.forecast)||void 0===r?void 0:r.length)&&void 0!==o?o:0,null!==(c=null===(s=n.forecast)||void 0===s?void 0:s.length)&&void 0!==c?c:0);for(let i=0;i<e;i++)this.getLength(null===(u=n.forecast[i])||void 0===u?void 0:u.hourly)<this.getLength(null===(d=t.forecast[i])||void 0===d?void 0:d.hourly)&&(n.forecast[i].hourly=t.forecast[i].hourly)}n.isPartialHour=!1}),i=i||Je.a.handleAction(t,J.a.updateCurrentLocation,t=>{n=Object.assign({},e),r.a.isValid(t)||(t=e.currentLocation),n.currentLocation=Object.assign({},t),Qe(n)}),i=i||Je.a.handleAction(t,J.a.updateLocationDisplayName,t=>{n=Object.assign({},e),r.a.isSameLocationPoint(e.currentLocation,t)&&(n.currentLocation=Object.assign(Object.assign({},t),{displayName:r.a.getDisplayName(t)}),Qe(n))}),i=i||Je.a.handleAction(t,J.a.updateLocationDetectionState,(t,i)=>{n=Object.assign({},e),n.locationDetectionSetting=t,n.currentLocation=i,Qe(n)}),i=i||Je.a.handleAction(t,J.a.updateWeatherSettings,t=>{n=Object.assign({},e),n.settingUpdateStatus=t}),i=i||Je.a.handleAction(t,J.a.updateWeatherUserProfile,t=>{n=Object.assign({},e),n.profile=Object.assign(Object.assign(Object.assign({},e.profile),t),{home:t.home||e.profile.home||void 0}),n.profile.home&&e.currentLocation&&r.a.isSameLocationPoint(n.profile.home,e.currentLocation)&&(n.currentLocation.from=h.j.HomeFromUserSet),Qe(n)}),i=i||Je.a.handleAction(t,J.a.updateOperationFailure,t=>{n=Object.assign(Object.assign({},e),{operationFailureId:t})}),i=i||Je.a.handleAction(t,J.a.updateFallbackStatus,t=>{n=Object.assign(Object.assign({},e),{fallbackedLocation:t})}),i=i||Je.a.handleAction(t,J.a.updateHyperlocal,t=>{n=Object.assign(Object.assign({},e),{isHyperlocal:t})}),i=i||Je.a.handleAction(t,J.a.updateNonmapComponmentsReadiness,()=>{}),n||e}getLength(e){return null==e?-1:e.length}}var Ze=i("Xb5i"),et=i("59wa"),tt=i("irMn");const it={experienceConfigSchema:ge.WeatherDataConfigSchema};function nt(e){return Object(g.a)(e)}},IKDi:function(e,t,i){var n;e.exports=(n=i("Ni7E"),i("heQk"),n.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},n.pad.ZeroPadding)},KETb:function(e,t,i){"use strict";i.d(t,"a",(function(){return P})),i.d(t,"b",(function(){return F}));var n=i("D57K"),a=i("XlyT"),r=i("IhCV"),o=i("z2Ro"),s=i("vq4Z"),c=i("VcDS");class u extends o.a{constructor(e,t,i,n){super(e,i,c.a.BeginActivity,r.a.newGuid(),new Date,t),this.LogLevel=s.a.Activity,this.Ended=!1,this.correlationVector=n}}var d=i("KSHU"),l=i("mRXR");class h extends o.a{constructor(e,t,i,n,a,o,u,d){super(e,d,c.a.BeginNetworkActivity,r.a.newGuid(),new Date,u),this.serviceName=t,this.LogLevel=s.a.Activity,this.Ended=!1,this.requestUri=i,this.requestHttpMethod=n,this.currentOperationName=a,this.correlationVector=o}}var g=i("9RHM");class p extends d.a{constructor(e,t){super(e),this.correlationVectorProvider=t}static getInstance(e,t){var i=e||"Default",n=p.InstancesMap[i];if(n)return n;var a=new l.a(i,s.a.Activity);return n=new p(a,t),p.InstancesMap[i]=n,n}isActivityEnabled(){return this.logger.isEnabledFor(s.a.Activity)}createActivity(e,t,i){if(this.isActivityEnabled()){let n,a;t&&(n=t.ActivityId,a=this.getVectorForNewActivity(t,!1));let r=new u(e,n,i,a);return this.logger.log(s.a.Activity,r),r}return t||null}createActivityCallback(e,t,i){return this.isActivityEnabled()?this.createActivity(e(),t,i):t||null}endActivity(e){if(this.isActivityEnabled()&&e&&!e.Ended){e.Ended=!0;const t=new Date,i=Object(g.a)(e);i.LogType=c.a.EndActivity,i.LogDateTime=t;const n=i.LogDateTime.getTime()-e.LogDateTime.getTime();i.Message=i.Message+" ElapsedTime (Milliseconds):"+n.toString(),i.elapsedTimeInMs=n,this.logger.log(s.a.Activity,i)}}createNetworkActivity(e,t,i,n,a,r,o,s){if(this.isActivityEnabled()){r||o||console.warn("'correlationVector' or 'parentActivity' is required to create network activity");let c=r||this.getVectorForNewActivity(o,!0),u=o?o.ActivityId:"";return new h(e,t,i,n,a,c,u,s)}return null}endSuccessfulNetworkActivity(e,t,i){this.endNetworkActivity(e,!0,t,i)}endFailedNetworkActivity(e,t,i,n){this.endNetworkActivity(e,!1,t,i,n)}endNetworkActivity(e,t,i,n,a){if(e&&!e.Ended){e.Ended=!0;let r=new Date,o=Object(g.a)(e);o.LogType=c.a.EndNetworkActivity,o.LogDateTime=r,o.elapsedTimeInMs=o.LogDateTime.getTime()-e.LogDateTime.getTime(),o.successful=t,o.responseSize=i,o.responseStatusCode=n,o.errorMessage=a,this.logger.log(s.a.Activity,o)}}getVectorForNewActivity(e,t){return e&&this.correlationVectorProvider?(e.latestChildCorrelationVector?e.latestChildCorrelationVector=this.correlationVectorProvider.incrementExternalVector(e.latestChildCorrelationVector):(e.latestChildCorrelationVector=this.correlationVectorProvider.extendExternalVector(e.correlationVector),t&&(e.latestChildCorrelationVector=this.correlationVectorProvider.incrementExternalVector(e.latestChildCorrelationVector))),e.latestChildCorrelationVector):""}}p.InstancesMap={};var f=i("/wq8");class v{constructor(e){if(this.loggingService=e,!e)throw"loggingService is required for LoggedExceptionManager."}error(e){throw this.loggingService.error(e),e}fatal(e){throw this.loggingService.fatal(e),e}}var m=i("HDSB");class y{constructor(e,t,i,n,a,r,o){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const s=new v(e);this.logInvalidParams(s,t,i,n,a,o),this.loggingService=e,this.maxRetries=t||y.defaultMaxRetries,this.baseRetryDelayInMs=i||y.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=n||y.maxAllowedRetryDelayInMs,this.factor=a||y.defaultFactor,this.minOffsetInMs=r||y.defaultMinOffsetInMs,this.maxOffsetInMs=o||y.defaultMaxOffsetInMs,Object(m.a)()&&this.loggingService.infoCallback(()=>"ExponentialBackoffRetry has been configured.",null,{maxRetries:t,minTimeout:i,maxTimeout:n,factor:a})}executeRequest(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){return new Promise((a,r)=>Object(n.a)(this,void 0,void 0,(function*(){yield this.tryRequest(e,a,r,0,t,i)})))}))}logInvalidParams(e,t,i,n,a,r){t&&(t<1||t>y.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${y.maxAllowedRetries}.`),i&&i<y.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),i&&r&&i<=r&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),n&&(n<=0||n>y.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${y.maxAllowedRetryDelayInMs}.`),a&&a<=0&&e.fatal("factor has to be a positive value.")}tryRequest(e,t,i,a,r,o){return Object(n.a)(this,void 0,void 0,(function*(){try{const i=1e4,n=yield this.timeoutServiceRequest(i,e());t(n)}catch(n){if(Object(m.a)()&&a<this.maxRetries){const s=3,c=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(s)),u=.5,d=Math.random()<u?-1:1,l=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,a),this.maxRetryDelayInMs)+c*d;this.loggingService.warnCallback(()=>`Retrying the request in ${l} milliseconds.`,o,{error:n,currentRetry:a+1,requestInfo:r}),setTimeout(()=>this.tryRequest(e,t,i,a+1,r,o),l)}else this.loggingService.errorCallback(()=>Object(m.a)()&&a<this.maxRetries?"ExponentialBackoffRetry has exceeded maximum retries "+this.maxRetries:"Request has failed.",o,{error:n,currentRetry:a,requestInfo:r}),i(n)}}))}timeoutServiceRequest(e,t){return Object(n.a)(this,void 0,void 0,(function*(){return new Promise((i,a)=>Object(n.a)(this,void 0,void 0,(function*(){const n=setTimeout(()=>a(new Error("Service Request Timed out!")),e);try{const e=yield t;i(e),clearTimeout(n)}catch(e){a(e),clearTimeout(n)}})))}))}}y.defaultBaseRetryDelayInMs=100,y.defaultFactor=2,y.defaultMaxOffsetInMs=25,y.defaultMaxRetries=5,y.defaultMinOffsetInMs=1,y.maxAllowedRetries=10,y.maxAllowedRetryDelayInMs=2e3;var b,S=i("VOUN"),C=i("hqLi");class O extends o.a{constructor(e,t,i,n,a){super(e,i,c.a.Instrumentation,n,a),this._counterName=e,this.CounterValue=t}get CounterName(){return this._counterName}incrementValue(){if("number"!=typeof this.CounterValue)throw"ERROR: Counter value is never initialized, cannot perform increment action.";this.CounterValue++}}class A extends d.a{constructor(e){super(e)}static getInstance(e){const t=e||"Default";let i=A.InstancesMap[t];if(i)return i;let n=new l.a(t,s.a.Trace);return i=new A(n),A.InstancesMap[t]=i,i}static getDimensionedLogItems(e,t){let i=[],n=new O(e.CounterName,e.CounterValue,Object(g.a)(e.Data),e.ActivityId,e.LogDateTime);if(n.LogLevel=s.a.Trace,i.push(n),t&&!Object(C.a)(t))for(let n of Object.keys(t))for(let a of t[n]){let t=n.indexOf(":")>-1?`${e.CounterName}(${n.replace(":","-")}: ${a})`:`${e.CounterName}(${n}: ${a})`,r=new O(t,e.CounterValue,Object(g.a)(e.Data),e.ActivityId,e.LogDateTime);r.LogLevel=s.a.Trace,i.push(r)}return i}logPerfCounter(e,t,i,n){const a=new O(e,t,n);this.logPerfCounterItem(a,i)}logPerfCounterItem(e,t){const i=A.getDimensionedLogItems(e,t);for(let e of i)this.logger.log(s.a.Trace,e)}}A.InstancesMap={};class L extends o.a{constructor(e,t,i,n,a,r,o,c){super(e,o),this.pageName=e,this.LogLevel=s.a.Activity,this._userActivityType=t,this.correlationVector=i,this.trackingData=n,this.pageTitle=a,this.pageUri=r,this.eventData=c}get userActivityType(){return this._userActivityType}}!function(e){e[e.None=0]="None",e[e.PageAction=1]="PageAction",e[e.PageView=2]="PageView"}(b||(b={}));class w extends d.a{constructor(e){super(e)}static getInstance(e){var t=e||"Default",i=w.InstancesMap[t];if(i)return i;var n=new l.a(t,s.a.Activity);return i=new w(n),w.InstancesMap[t]=i,i}isActivityTrackingEnabled(){return this.logger.isEnabledFor(s.a.Activity)}logPageView(e,t,i,n,a,r){this.isActivityTrackingEnabled()&&this.logger.log(s.a.Activity,this.getUserActivityLogItem(e,t,i,a,r,n))}logPageActionEvent(e,t,i,n,a,r,o){if(this.isActivityTrackingEnabled()){if(!e)throw"''eventData' required for logging page action event.";e.elementTitle&&e.eventType&&e.elementTitle.trim()&&e.eventType.trim()&&this.logger.log(s.a.Activity,this.getUserActivityLogItem(t,i,n,r,o,a,e))}}getUserActivityLogItem(e,t,i,n,a,r,o){if(!e)throw"''pageName' is required for logging user activity.";return o?new L(e,b.PageAction,t,i,n,a,r,o):new L(e,b.PageView,t,i,n,a,r)}}w.InstancesMap={};class k{constructor(e,t,i,n){this.loggingServiceInstance=e||S.a.getInstance(),this.activityServiceInstance=t||p.getInstance(),this.userActivityServiceInstance=i||w.getInstance(),this.perfCounterServiceInstance=n||A.getInstance()}get loggingService(){return this.loggingServiceInstance}get activityLoggingService(){return this.activityServiceInstance}get userActivityTrackingService(){return this.userActivityServiceInstance}get perfCounterLoggingService(){return this.perfCounterServiceInstance}getLoggingServiceByName(e){return this.checkLoggerName(e),S.a.getInstance(e)}getActivityLoggingServiceByName(e){return this.checkLoggerName(e),p.getInstance(e)}getUserActivityTrackingServiceByName(e){return this.checkLoggerName(e),w.getInstance(e)}getPerfCounterLoggingServiceByName(e){return this.checkLoggerName(e),A.getInstance(e)}addActivityLoggingService(e){this.checkServiceInstance(e),p.getInstance(e.getLoggerName())}checkLoggerName(e){if(!e)throw"'loggerName' is required."}checkServiceInstance(e){if(!e)throw"'serviceInstance' is required."}}var T=i("msIb"),D=i("tMmC");let j,I;function P(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){let n,r;try{if(n=yield fetch(e,t),n&&n.ok)return n}catch(t){Object(a.c)(t,i,"Exception calling 1S primary Url: "+e)}return n&&n.headers&&n.headers.get("OneWebServiceLatency")?n:e.indexOf("assets.msn.com/service/")>0?(r=e.replace("assets.msn.com/service/","api.msn.com/"),yield fetch(r,t)):n}))}function F(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i=U().activityLoggingService.createActivity(t);return yield T.a.serviceRequestOnComplete(()=>function(){if(I)return I;return I=new y(U().loggingService,3),I}().executeRequest(e,null,i),()=>U().activityLoggingService.endActivity(i))}))}function U(){if(j)return j;const e=p.getInstance("ExperienceActivityLogger");return Object(m.a)()&&D.a.isDebug()&&e.addAppender(new f.a(s.a.Activity)),j=new k(D.a.getLoggingService(),e),j}},KyXa:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("tZkf"),a=i.n(n),r=i("i3c9"),o=i.n(r),s=i("3s0V"),c=i.n(s),u=i("4a5f"),d=i.n(u),l=i("IKDi"),h=i.n(l),g=i("Ni7E"),p=i.n(g);class f{constructor(e){this.config=e}encrypt(e){const t=a.a.parse(this.config.salt),i=c()(this.config.pass,t,{keySize:8,iterations:1e3}),n=a.a.parse(this.config.ivKey),r=d.a.encrypt(e,i,{iv:n,padding:h.a,mode:p.a.mode.CBC});return o.a.stringify(r.ciphertext)}decrypt(e){const t=a.a.parse(this.config.salt),i=c()(this.config.pass,t,{keySize:8,iterations:1e3}),n=a.a.parse(this.config.ivKey);return d.a.decrypt(e,i,{iv:n,padding:h.a,mode:p.a.mode.CBC}).toString(a.a)}}var v=i("Vy2U"),m=i("tMmC");class y{constructor(e){this.tool=new f(e)}decrypt(e){if(e)try{const t=this.tool.decrypt(e),i=t.split(","),n=t.substring(i[0].length+i[1].length+2),a=v.a.parseDetailShortInfo(n)||{};if(a.latitude=i[0],a.longitude=i[1],v.a.isValid(a))return a}catch(t){m.a.log("decrypt failed, encryptedLocation="+e)}return{}}encrypt(e){try{const t=v.a.toDetailShortInfo(e);return this.tool.encrypt(`${e.latitude},${e.longitude}`+(t?","+t:""))}catch(t){m.a.log("encrypt failed, location="+JSON.stringify(e))}}serialize(e){try{const t=v.a.toDetailShortInfo(e);return a.a.parse(t).toString(o.a)}catch(t){m.a.log("serialize failed, location="+JSON.stringify(e))}}deserialize(e){try{const t=o.a.parse(e).toString(a.a);return v.a.parseDetailShortInfo(t)||{}}catch(t){return m.a.log("deserialize failed, serializedLocation="+e),{}}}}const b=new y({salt:"W3@th3rS@LT",pass:"CSP@5sW@rD",ivKey:"@7C1e2B0s8G3k4V9"})},Ni7E:function(e,t,i){var n;e.exports=(n=n||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),n={},a=n.lib={},r=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,a=e.sigBytes;if(this.clamp(),n%4)for(var r=0;r<a;r++){var o=i[r>>>2]>>>24-r%4*8&255;t[n+r>>>2]|=o<<24-(n+r)%4*8}else for(r=0;r<a;r+=4)t[n+r>>>2]=i[r>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,n=[],a=function(t){t=t;var i=987654321,n=4294967295;return function(){var a=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},r=0;r<t;r+=4){var s=a(4294967296*(i||e.random()));i=987654071*s(),n.push(4294967296*s()|0)}return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],a=0;a<i;a++){var r=t[a>>>2]>>>24-a%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],a=0;a<i;a++){var r=t[a>>>2]>>>24-a%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,a=i.sigBytes,r=this.blockSize,s=a/(4*r),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*r,u=e.min(4*c,a);if(c){for(var d=0;d<c;d+=r)this._doProcessBlock(n,d);var l=n.splice(0,c);i.sigBytes-=u}return new o.init(l,u)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(a.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}}),n.algo={});return n}(Math),n)},Oa3u:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"b",(function(){return d}));var n=i("m2Vd");const a=new RegExp("\\:([\\d]{2})");function r(){return new Date}function o(e){return(r().getTime()-e.getTime())/1e3}function s(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function c(e,t){return new Date(e.valueOf()+60*t*60*1e3)}function u(e,t){const i=parseInt(t),n=parseInt(a.exec(t)[1]),r=i<0?-1:1,o=new Date(e.getTime()+60*(60*i+r*n)*1e3),s=("0"+Math.abs(i)).substr(-2)+":"+("0"+Math.abs(n)).substr(-2);return o.toISOString().replace("Z",(r<0?"-":"+")+s)}function d(e){const t=o(e),i=function(){const e=r();return e.setHours(0,0,0,0),e}(),a=s(i,-1),c=s(i,-6),u=function(){const e=r();return new Date(e.getFullYear(),0,0,0,0,0,0)}();return t>=-3300&&t<-60?n.a.InMinutes:t<0?n.a.None:t<120?n.a.JustNow:t<3600?n.a.LessThanOneHour:e>=i?n.a.Today:e>=a?n.a.Yesterday:e>=c?n.a.ThisWeek:e>=u?n.a.ThisYear:n.a.FullDate}},SHdd:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,a;!function(e){e.AppAnonCookie="appanoncookie",e.MyFeed="myfeed",e.AuthToken="AuthToken",e.UpdateMyFeed="updatemyfeed",e.RefreshConfigs="refreshconfigs",e.DetectConfigChanges="detectconfigchanges",e.ClearConfigCache="clearconfigcache",e.Updatepdp="updatepdp",e.WeatherPdp="weatherpdp",e.MoneyPdp="moneypdp",e.LocalNews="localnews",e.SportsTeamPdp="sportsteampdp",e.SportsPlayerPdp="sportsplayerpdp",e.SportsLeaguePdp="sportsleaguepdp",e.PerfMarkers="perfmarkers",e.ContentPreviewData="ContentPreviewData",e.ContentPreviewCache="ContentPreviewCache",e.PostTtvr="PostTtvr",e.FeedDisplaySetting="FeedDisplaySetting",e.WebWorkerError="WebWorkerError",e.InvalidateWeatherPdp="InvalidateWeatherPdp",e.InvalidateMoneyPdp="InvalidateMoneyPdp",e.StripeMyFeed="StripeMyFeed",e.UpdateMyBriefing="UpdateMyBriefing",e.MyBriefing="MyBriefing",e.WindowsFeed="WindowsFeed",e.IndustryNewsArticles="IndustryNewsArticles",e.AuctionPrefetch="AuctionPrefetch",e.AuctionAPIDuration="AuctionAPIDuration",e.MsnHpStripeFeed="MsnHpStripeFeed"}(n||(n={})),function(e){e[e.Fetching=1]="Fetching",e[e.Fetched=2]="Fetched"}(a||(a={}))},UAwG:function(e,t,i){"use strict";function n(e){return!!e&&-1!==e.indexOf("Googlebot")}i.d(t,"a",(function(){return n}))},UDwi:function(e,t,i){"use strict";i.r(t),i.d(t,"AlertF0ToMapType",(function(){return o})),i.d(t,"WeatherMapType",(function(){return s})),i.d(t,"getTileRange",(function(){return c})),i.d(t,"getRadarSvgLinks",(function(){return u})),i.d(t,"fetchRadarData",(function(){return d})),i.d(t,"readVectorData",(function(){return l})),i.d(t,"parseMapTypeFromFeatures",(function(){return h})),i.d(t,"addMintuesToVersion",(function(){return f})),i.d(t,"DataTileZoomOfRadar",(function(){return v})),i.d(t,"AnimationImgMap",(function(){return m})),i.d(t,"AnimationColorMap",(function(){return y})),i.d(t,"ColorMapRadar",(function(){return b})),i.d(t,"PrecipitationIntensityMap",(function(){return S})),i.d(t,"createPattern",(function(){return C})),i.d(t,"PrecipitationTypeMap",(function(){return O})),i.d(t,"svgCreate",(function(){return A})),i.d(t,"minimapProng1CardWidth",(function(){return L})),i.d(t,"minimapProng1CardFullWidth",(function(){return w})),i.d(t,"minimapProng1CardHeight",(function(){return k})),i.d(t,"minimapProng1CardFullHeight",(function(){return T})),i.d(t,"getSizeOfMiniMap",(function(){return D}));var n=i("D57K"),a=i("8CFJ"),r=i("dMmp");const o=new Map([["SN","winterstorm"],["IC","winterstorm"],["IM","winterstorm"],["FD","wildfire"],["AQ","airqualitystation"],["SM","airqualitystation"],["DU","airqualitystation"],["VO","airqualitystation"],["AS","airqualitystation"]]),s={Temperature:"temperature",Precipitation:"precipitation",Radar:"radar",Wind:"wind",Cloud:"cloud",Winterstorm:"winterstorm",Wildfire:"wildfire",Severeweather:"severeweather"};function c(e,t,i=a.a.widthMap,n=a.a.heightMap,r=a.a.zoomLevelMap,o=30){const s=(i-1)/2+o,c=(n-1)/2+o,u=a.a.getMapSizePixel(r),d=a.a.latlonToPixelXY(e.lat,e.lon,u),l=[d[0]-s,d[1]-c],h=[d[0]+s,d[1]+c],g=r-t+8;return{minTileX:l[0]>>g,maxTileX:h[0]>>g,minTileY:l[1]>>g,maxTileY:h[1]>>g,pixelXY:d,pixelLT:l,pixelRB:h}}function u(e,t,i,n={}){if(!e)return null;const{widthMap:o=a.a.widthMap,heightMap:s=a.a.heightMap,horizon:u=0,defaultPlus:d=30,mapZoom:l=a.a.zoomLevelMap}=n,h=[],g=f(null==i?void 0:i.radarVersion,u),{minTileX:p,maxTileX:v,minTileY:m,maxTileY:y,pixelXY:b}=c(e,t,o,s,l,d);for(let e=m;e<=y;++e){const n=[];for(let a=p;a<=v;++a){const o=r.String.Format(null==i?void 0:i.radarForecast,{time:g,z:t,x:a,y:e});n.push(o.replace(/blc$/,"svg"))}h.push(n)}return{links:h,offset:[b[0]-o/2-256*p,b[1]-s/2-256*m],time:g}}function d(e,t,i,o,s=a.a.widthMap,u=a.a.heightMap,d=0){return Object(n.a)(this,void 0,void 0,(function*(){if(!e)return null;const n=f(null==i?void 0:i.radarVersion,d),{minTileX:a,maxTileX:h,minTileY:g,maxTileY:p}=c(e,t,s,u),v=[];for(let e=a;e<=h;++e)for(let a=g;a<=p;++a){const o=r.String.Format(null==i?void 0:i.radarForecast,{time:n,z:t,x:e,y:a});v.push(fetch(o).then(e=>e.ok?e.arrayBuffer():null))}if(v.length>0){const t=yield Promise.all(v),i=[];for(const n of t)l(n,i,e,o,s,u);return i}return null}))}function l(e,t,i,n,r=a.a.widthMap,o=a.a.heightMap){if(!e)return;const s=a.a.latlonToPixelXY(i.lat,i.lon,32768);s[0]=Math.round(s[0]),s[1]=Math.round(s[1]);const c=new Uint8Array(e);if(0===c[0]){const e=c[1],i=c[2],u=1/(c[3]+256*c[4]);for(let d=5;d<c.length;){const l=c[d++],h=c[d++],f=[],v=[];let m="";do{m=String.fromCharCode(c[d++]),v.push(m),f.push(m);let t=1;"C"===m?t=3:"Z"===m&&(t=0);for(let n=0;n<t;n++){let t=0,n=0,l=1;for(let e=0;e<i;e++)t+=c[d]*l,n+=c[d+++i]*l,l*=256;d+=i,t*=u,n*=u,t>500&&(t=500-t),n>500&&(n=500-n),n>180&&2===e&&(n-=360);const h=a.a.latLonToPixel([t,n],s,r,o);v.push(Math.round(h[0])),v.push(Math.round(h[1]))}}while("Z"!==m);let y="";y=n?p(h):b.get(l.toString()).get(h.toString());const S=v.join(" ");t.push({path:S,color:y,fill:!n||g(l,h)})}}}function h(e,t){if(!e)return null;const i=o.get(e);return(null==t?void 0:t.includes(i))?i:(null==t?void 0:t.includes(s.Severeweather))?s.Severeweather:null}function g(e,t){const i=S.get(t.toString()),n=`${O.get(e.toString())}-${i}`;return m.get(n)}function p(e){const t=S.get(e.toString());return y.get(t)}function f(e,t){const i=parseInt(e.substring(0,4)),n=parseInt(e.substring(4,6))-1,a=parseInt(e.substring(6,8)),r=parseInt(e.substring(8,10)),o=parseInt(e.substring(10,12)),s=new Date(i,n,a,r,o),c=new Date(s);return c.setMinutes(s.getMinutes()+t),c.getFullYear().toString()+String(c.getMonth()+1).padStart(2,"0")+String(c.getDate()).padStart(2,"0")+String(c.getHours()).padStart(2,"0")+String(c.getMinutes()).padStart(2,"0")}const v=3,m=new Map([["rain-low","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-low.png"],["rain-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-avg.png"],["rain-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/rain-hvy.png"],["sleet-low","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-low.png"],["sleet-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-avg.png"],["sleet-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/sleet-hvy.png"],["snow-low","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-low.png"],["snow-avg","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-avg.png"],["snow-hvy","https://assets.msn.com/weathermapdata/1/static/img/animation/snow-hvy.png"]]),y=new Map([["low","#98B2CA"],["avg","#7891B5"],["hvy","#506984"]]),b=new Map([["0",new Map([["89","#001add"],["97","#00cc31"],["105","#00e300"],["113","#00bd00"],["121","#009600"],["129","#99d300"],["137","#f8ec00"],["145","#e7c000"],["153","#f89e00"],["161","#ff5600"],["169","#fb0000"],["177","#de0000"]])],["1",new Map([["89","#79b837"],["105","#078f33"],["121","#014b24"],["137","#eec040"],["153","#d05d2c"],["169","#830826"]])],["2",new Map([["89","#aae1e0"],["105","#5ad2e0"],["121","#249fdb"],["137","#1547bd"],["153","#101e96"],["169","#01016e"]])],["3",new Map([["89","#edb2c7"],["105","#df71a9"],["121","#bb338f"],["137","#8a139b"],["153","#660888"],["169","#470765"]])]]),S=new Map([["89","low"],["105","low"],["121","avg"],["137","hvy"],["153","hvy"],["169","hvy"]]);function C(e,t,i,n){const a=t+i+n;if(e&&!document.getElementById(a)){(new Image).src=t;const n=A("pattern");n.setAttribute("id",a),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("patternUnits","userSpaceOnUse"),n.setAttribute("width","200"),n.setAttribute("height","200");const r=A("rect");r.setAttribute("width","200"),r.setAttribute("height","200"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("fill-opacity",1),r.setAttribute("fill",i),n.appendChild(r),e.appendChild(n);const o=A("image");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttributeNS("http://www.w3.org/1999/xlink","href",t),o.setAttribute("width","3000"),o.setAttribute("height","200"),n.appendChild(o);const s=A("animate");s.setAttribute("attributeType","XML"),s.setAttribute("attributeName","x"),s.setAttribute("calcMode","discrete"),s.setAttribute("values","0;-200;-400;-600;-800;-1000;-1200;-1400;-1600;-1800;-2000;-2200;-2400;-2600;-2800"),s.setAttribute("dur","1s"),s.setAttribute("repeatCount","indefinite"),o.appendChild(s)}}const O=new Map([["1","rain"],["2","snow"],["3","sleet"]]);function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}const L=268,w=300,k=134,T=190;function D(e,t,i,n,r){let o=a.a.widthMap;i?o=i:e&&(o=r?w:L);let s=a.a.heightMap;return n?s=n:t?s=a.a.maxHeightMap:e&&(s=r?T:k),[o,s]}},UQuZ:function(e,t,i){"use strict";i.r(t),i.d(t,"AUTOSUGGEST_TYPE",(function(){return l})),i.d(t,"AUTOSUGGEST_SUBTYPE",(function(){return h})),i.d(t,"isHyperlocal",(function(){return g})),i.d(t,"hyperlocalLabeled",(function(){return p})),i.d(t,"getHyperlocalType",(function(){return f})),i.d(t,"isSameLocationPoint",(function(){return v})),i.d(t,"truncateFloatTo3Decimal",(function(){return m})),i.d(t,"shouldIgnoreSubRegion",(function(){return y})),i.d(t,"distance",(function(){return S})),i.d(t,"toDetailShortInfo",(function(){return C})),i.d(t,"parseDetailShortInfo",(function(){return O})),i.d(t,"reset",(function(){return L})),i.d(t,"isValid",(function(){return w})),i.d(t,"isValidLocationToSuggest",(function(){return k})),i.d(t,"toDebugString",(function(){return T})),i.d(t,"normalizeLatLong",(function(){return D})),i.d(t,"getDisplayName",(function(){return j})),i.d(t,"getAutoSuggestionName",(function(){return I})),i.d(t,"isValidLocationNameStructure",(function(){return P})),i.d(t,"resolveNameFromLocalityRegionCountry",(function(){return F})),i.d(t,"getAutoSuggestLocationFirstLine",(function(){return R})),i.d(t,"getAutoSuggestLocationSecondLine",(function(){return N})),i.d(t,"formatLocation",(function(){return B})),i.d(t,"addLocation",(function(){return M})),i.d(t,"removeLocation",(function(){return x})),i.d(t,"isCurrentLocaleName",(function(){return W})),i.d(t,"extractLanguageTag",(function(){return E})),i.d(t,"headLocation",(function(){return _})),i.d(t,"toLatLong",(function(){return H})),i.d(t,"transformToClientLocation",(function(){return $}));var n=i("rvYQ"),a=i("I6Lx"),r=i("ypwz"),o=i("ssdC");const s=new Set(["CN","JP","TW"]),c=new Set(["ZH-CN","KO-KR","JA-JP"]),u=new Set(["北京市","上海市","重庆市","天津市","香港"]);var d;!function(e){e[e.HYPERLOCAL=101]="HYPERLOCAL",e[e.NONHYPERLOCAL=102]="NONHYPERLOCAL",e[e.UNKNOWN=103]="UNKNOWN"}(d||(d={}));const l={PLACE:"Place",LOCAL_BUSINESS:"LocalBusiness",ADDRESS:"PostalAddress"},h={ADDRESS:"Address",ROAD:"Road"};function g(e){return e.locationType===d.HYPERLOCAL||e.locationType===d.UNKNOWN}function p(e){return!!(null==e?void 0:e.locationType)&&(e.locationType===d.HYPERLOCAL||e.locationType===d.NONHYPERLOCAL||e.locationType===d.UNKNOWN)}function f(e,t){switch(e){case l.PLACE:return d.NONHYPERLOCAL;case l.LOCAL_BUSINESS:return d.HYPERLOCAL;case l.ADDRESS:return t===h.ADDRESS?d.HYPERLOCAL:t===h.ROAD?d.NONHYPERLOCAL:d.UNKNOWN;default:return d.UNKNOWN}}function v(e,t,i=!1){if(e&&t){let n=""+(e[0]||e.latitude),a=""+(t[0]||t.latitude),r=""+(e[1]||e.longitude),o=""+(t[1]||t.longitude);return i&&(n=m(n).toString(),r=m(r).toString(),a=m(a).toString(),o=m(o).toString()),n===a&&r==o}return!1}function m(e){const t="number"==typeof e?e:parseFloat(e);return Math.trunc(1e3*t)/1e3}function y(e){return!s.has((e||"").toUpperCase())}function b(e){return e&&c.has(e.toUpperCase())}function S(e,t){function i(e){const t=Math.sin(e/2);return t*t}function n(e){return e*Math.PI/180}t=t||{};const a=[n(+(e=e||{}).latitude),n(+e.longitude)],r=[n(+t.latitude),n(+t.longitude)],o=i(Math.abs(a[0]-r[0]))+Math.cos(a[0])*Math.cos(r[0])*i(Math.abs(a[1]-r[1]));return 12742*Math.asin(Math.sqrt(o))}function C(e){const t={a:e.addressLine,l:e.locality,r:e.region,r2:e.subRegion,c:e.country,i:e.isoCode,t:e.locationType,g:e.language},i=JSON.stringify(t,(e,t)=>t||void 0);return"{}"!==i?i:void 0}function O(e){if(e)try{const t=JSON.parse(e),i={};return i.addressLine=t.a,i.locality=t.l,i.region=t.r,i.subRegion=t.r2,i.country=t.c,i.isoCode=t.i,i.locationType=t.t,i.language=t.g,i}catch(e){return}}function A(e,t,i){return!isNaN(e)&&e>=t&&e<=i}function L(e){const t=e||{};Object.keys(t).forEach(e=>{t[e]=null})}function w(e){return e&&!!e.latitude&&!!e.longitude&&"null"!==e.latitude&&"null"!==e.longitude&&"undefined"!==e.latitude&&"undefined"!==e.longitude&&"NaN"!==e.latitude&&"NaN"!==e.longitude&&"Infinity"!==e.latitude&&"Infinity"!==e.longitude&&A(parseFloat(e.latitude),-85,85)&&A(parseFloat(e.longitude),-180,180)}function k(e){var t;if("zh-cn"===(null===(t=null==e?void 0:e.language)||void 0===t?void 0:t.toLowerCase()))if(null==e?void 0:e.addressLine){if(!((null==e?void 0:e.locality)||(null==e?void 0:e.subRegion)||(null==e?void 0:e.region)||u.has(e.addressLine)))return!1}else if(!(null==e?void 0:e.subRegion)&&!(null==e?void 0:e.region)&&!u.has(null==e?void 0:e.locality))return!1;return!(!e||!e.addressLine&&!e.locality)}function T(e){if(e)return e.el?`el=[${e.el}]`:`lat=${e.latitude},long=${e.longitude}`}function D(e,t){return{latitude:""+parseFloat(e),longitude:""+parseFloat(t)}}function j(e,t){if(e)return e.displayName?e.displayName:F(e,t)}function I(e){if(e){if(e.autoSuggestionName)return e.autoSuggestionName;return F(e,{enforceSmallLocaleFirst:!0})}}function P(e){const t=n.a.AppType;return[r.a.WindowsShell,r.a.Windows,r.a.NewsAndInterests,r.a.WindowsNewsPlus,r.a.WindowsNewsWidgets].indexOf(t)>=0?!(!e||!(e.addressLine||e.locality||e.region)):"zh-cn"===e.language||"CN"===e.isoCode?!(!e||!(e.addressLine||e.locality||e.subRegion||e.addressLine)):!(!e||!e.locality&&!e.addressLine)}function F(e,t){const i=!t||!t.skipLocale,a=n.a&&n.a.CurrentRequestTargetScope&&n.a.CurrentRequestTargetScope.locale&&n.a.CurrentRequestTargetScope.locale.market,r=(e.isoCode||"").toUpperCase(),o=r&&a&&a.substr(-r.length).toUpperCase()===r,s=y(e.isoCode)?null:e.subRegion,c=[e.addressLine,i?e.locality:"",s,e.region,e.country].filter(e=>!!e);let u=0;for(;c[u+1];)c[u+1]===c[u]?c.splice(u+1,1):u++;const d="CN"==(null==a?void 0:a.toUpperCase())?1:2;return e.country&&o&&c.length>d&&c.splice(-1,1),t&&t.enforceSmallLocaleFirst||b(e.language)&&c.reverse(),c.join(", ")}function U(e,t){var i,a;const r=null===(a=null===(i=null===n.a||void 0===n.a?void 0:n.a.CurrentRequestTargetScope)||void 0===i?void 0:i.locale)||void 0===a?void 0:a.market,o=(e.isoCode||"").toUpperCase(),s=o&&r&&r.substr(-o.length).toUpperCase()===o,c=[e.addressLine,e.locality,!y(e.isoCode)&&e.subRegion,!(null==t?void 0:t.skipRegionAndCountry)&&e.region,!(null==t?void 0:t.skipRegionAndCountry)&&!s&&e.country].filter(e=>!!e);return c.filter((e,t)=>e!==c[t+1])}function R(e){return U(e)[0]}function N(e){return U(e).slice(1).join(", ")}function B(e,t){const i=U(e,t);return b(e.language)&&i.reverse(),i.join(", ")}function M(e,t){if(!t)return e;e=e||[];const i=[Object.assign({},t),...e],n={},a=[];for(let e=0;e<i.length;++e){const t=j(i[e]),r=`${i[e].latitude},${i[e].longitude}`;n[t]||n[r]||(a.push(i[e]),n[t]=e+1,n[r]=e+1)}return a}function x(e,t){if(!e||!t)return e;for(let i=0;i<e.length;++i)if(j(e[i])===j(t)||e[i].latitude===t.latitude&&e[i].longitude===t.longitude){e.splice(i,1);break}return e}function W(e){const t=a.b.Locale;return e&&e.language&&(e.language===t||/en-/i.test(e.language)&&/en-/i.test(t))}function E(e){return(/,g=([a-z]+-[a-z]+)$/i.exec(e)||[])[1]}function _(){if(a.b.ClientSettings&&a.b.ClientSettings.geo_lat&&a.b.ClientSettings.geo_long&&""!==a.b.ClientSettings.geo_lat&&""!==a.b.ClientSettings.geo_long){const e={latitude:a.b.ClientSettings.geo_lat,longitude:a.b.ClientSettings.geo_long,locality:a.b.ClientSettings.geo_city,region:a.b.ClientSettings.geo_subdivision,country:a.b.ClientSettings.geo_countryname,isoCode:a.b.ClientSettings.geo_country,isDetected:!0,language:"en-us"};return e.region=Object(o.abbreviateUSState)(e.region,e.language,e.isoCode),e.displayName=j(e),e}return null}function H(e){return`${e.latitude},${e.longitude}`}function $(e){return e?{country:e.Country,region:e.State,addressLine:e.AddressLine,locality:e.City,subRegion:e.SubRegion,postalCode:e.PostalCode,isoCode:e.CountryCode,latitude:e.Latitude,longitude:e.Longitude,displayName:void 0,language:e.Language||a.b.Locale}:{}}},Vy2U:function(e,t,i){"use strict";var n=i("UQuZ");i.d(t,"a",(function(){return n}));var a=i("ssdC");i.d(t,"b",(function(){return a}))},X9Vi:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"e",(function(){return r})),i.d(t,"d",(function(){return k})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return p}));var n={};i.r(n),i.d(n,"parseWeatherLocation",(function(){return d})),i.d(n,"isValidAqi",(function(){return l})),i.d(n,"parseWeatherData",(function(){return h})),i.d(n,"getFormatedProvider",(function(){return g}));var a={};i.r(a),i.d(a,"decodeCookieValue",(function(){return S})),i.d(a,"buildCookieString",(function(){return A})),i.d(a,"parseCookieString",(function(){return L})),i.d(a,"parseHomeCookieString",(function(){return w}));var r={};i.r(r),i.d(r,"MAX_FAVORITE_COUNT",(function(){return T})),i.d(r,"MAX_RECENT_COUNT",(function(){return D})),i.d(r,"validateFix",(function(){return I})),i.d(r,"favor",(function(){return P})),i.d(r,"disfavor",(function(){return F})),i.d(r,"visit",(function(){return U})),i.d(r,"find",(function(){return R}));var o=i("Vy2U"),s=i("dMmp"),c=i("I6Lx"),u=i("oilT");function d(e){const t={longitude:e.Longitude,latitude:e.Latitude,addressLine:e.AddressLine,locality:e.City,subRegion:e.SubRegion,region:e.State,country:e.Country,isoCode:e.CountryCode,language:e.Language||c.b.Locale};return t.displayName=o.a.getDisplayName(t),t}function l(e){const t=parseInt(e);return!(isNaN(t)||t<=0||t>500)}function h(e,t){return u.b.TranslateToWeatherOverview(e,t)}function g(e,t){return"中国天气网"==e?t&&s.String.Format(t,{provider:e}):null}var p=i("UDwi"),f=i("/FrS"),v=i("i3c9"),m=i.n(v),y=i("tZkf"),b=i.n(y);function S(e){if(e)try{const t=function(e){if(0==e.length)return null;const t=e.slice(-1);e=(e=(e=e.slice(0,-1)).replace(/-/g,"+")).replace(/_/g,"/");for(let i=0;i<t;i++)e+="=";return e}(e),i=b.a.stringify(m.a.parse(t));return JSON.parse(i)}catch(t){console.log("ignore invalid preference object: "+e)}}function C(e){return e&&encodeURIComponent(e)||""}function O(e){if(e&&"undefined"!==e&&"null"!==e)return decodeURIComponent(e)}function A(e){e=e||[];return(Array.isArray(e)?e:[e]).filter(e=>e).map((function(e){const t=[];return t[0]="",t[1]="",t[2]=e.latitude,t[3]=e.longitude,t[4]=C(e.locality),t[5]=C(e.region),t[6]=C(e.country),t[7]=C(e.isoCode),t[8]=C(e.language||c.b.Locale),t[9]="1",t[10]=C(e.subRegion),t[11]=C(e.addressLine),t[12]="",t.join("|")})).join("/")}function L(e,t){const i=[],n=e?e.split("/"):[];for(let e=0;e<n.length;++e){const a=n[e].split("|");if(a.length>3&&a[2]&&a[3]){const e="0"!==a[8]&&O(a[8])?O(a[8]):c.b.Locale,n=O(a[7]),r={displayName:void 0,latitude:a[2],longitude:a[3],locality:O(a[4]),region:o.b.abbreviateUSState(O(a[5]),e,n),country:O(a[6]),isoCode:n,language:e,subRegion:"Address"!==a[10]&&O(a[10])?O(a[10]):void 0,addressLine:O(a[11])};t&&t(r),i.push(r)}}return i}function w(e){return L(e,e=>e.from=f.j.HomeFromCookie)[0]}var k=i("0km5");const T=10,D=10;function j(e){return!!e&&"null"!==e&&"undefined"!==e&&"false"!==e}function I(e,t=T){if(e.home&&(o.a.removeLocation(e.favorites,e.home),o.a.removeLocation(e.recents,e.home)),e.favorites){e.favorites=e.favorites.slice(0,t);for(let t=0,i=e.favorites.length;t<i;++t)o.a.removeLocation(e.recents,e.favorites[t])}else void 0===e.favorites&&(e.favorites=[]);return e.recents?(e.recents=e.recents.filter(e=>"JP"!==e.isoCode||j(e.locality)||j(e.region)),e.recents=e.recents.slice(0,D)):void 0===e.recents&&(e.recents=[]),e}function P(e,t,i=T){let n=o.a.addLocation(e.favorites,t),a=o.a.removeLocation(e.recents,t);return n&&n.length>i&&(n=n.slice(0,i)),a&&a.length>D&&(a=a.slice(0,D)),e.favorites=n,e.recents=a,e}function F(e,t,i=!0){let n=o.a.removeLocation(e.favorites,t),a=e.recents;return i&&(a=o.a.addLocation(e.recents,t)),n&&n.length>T&&(n=n.slice(0,T)),a&&a.length>D&&(a=a.slice(0,D)),e.favorites=n,e.recents=a,e}function U(e,t){return e.recents=o.a.addLocation(e.recents,t),I(e)}function R(e,t,i){const n=[];return e&&(n.push(e.home),Array.prototype.push.apply(n,e.favorites||[]),Array.prototype.push.apply(n,e.recents||[])),n.filter(e=>!!e&&e.latitude===t&&e.longitude===i)[0]}},Xb5i:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var n,a=i("Am8i"),r=i("rvYQ");!function(e){e.WeatherCard="WeatherCard",e.Hovercard="HoverCard",e.Header="weather_header",e.Location="weather_location",e.Current="weather_today",e.UnitSwitch="degreeswitch",e.DailyForecast="dailyforecast",e.SeeForecast="seefullforecast",e.EditLocation="weathercard_header_editloc",e.Customization="weathercard_customization",e.MenuEdit="weathercard_customization_editloc",e.MenuHide="weathercard_customization_hide",e.MenuMore="weathercard_customization_more",e.PrecipitationMap="Precipitation",e.WindMap="Wind",e.RadarMap="Radar",e.CloudMap="Cloud",e.TemperatureMap="Temperatue",e.WeatherMap="Minimap",e.WeatherAlertMap="AlertMinimap",e.AlertArea="AlertArea",e.Winterstorm="Winterstorm",e.Wildfire="Wildfire",e.SevereWeather="SevereWeather",e.Nowcast="Nowcast",e.HourlyTrend="HourlyTrend",e.Vertical="weather",e.Category="weather",e.AirQuality="airQuality",e.WeatherHoverManualRotatePre="rotatepre",e.WeatherHoverManualRotateNext="rotatenext"}(n||(n={}));const o=(e,t,i,o,s=n.WeatherCard)=>{var c;if(!e||!t)return;const u=t.link,d=e.addOrUpdateChild({name:s,content:{type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),l=d.addOrUpdateChild({name:n.Header,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:t.locationName,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),h=d.addOrUpdateChild({name:n.Location,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:t.locationName,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),g=d.addOrUpdateChild({name:n.Current,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:t.temperature,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),p=d.addOrUpdateChild({name:n.UnitSwitch,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:t.unitAlternate,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),f=d.addOrUpdateChild({name:n.DailyForecast,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:"#",type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),v=d.addOrUpdateChild({name:n.AirQuality,behavior:a.b.Navigate,action:a.a.Click,content:{headline:t.aqi,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),m=[];for(let e=1;e<=5;e++){const t=d.addOrUpdateChild({name:n.DailyForecast+e,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:"#",type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,destinationUrl:u});m.push(t.getMetadataTag())}const y=d.addOrUpdateChild({name:n.SeeForecast,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:i.seeFullForecast,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:u}),b=d.addOrUpdateChild({name:n.Customization,behavior:a.b.More,type:a.e.ActionButton,content:{headline:n.Customization,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),S=d.addOrUpdateChild({name:n.EditLocation,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:i.menuEdit,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),C=d.addOrUpdateChild({name:n.MenuEdit,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:i.menuEdit,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),O=d.addOrUpdateChild({name:n.MenuHide,behavior:a.b.Hide,type:a.e.ActionButton,content:{headline:i.menuHideCard,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),A=d.addOrUpdateChild({name:n.MenuMore,behavior:a.b.Navigate,type:a.e.ActionButton,content:{headline:i.moreSettingOptStr,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,overrideDestinationUrl:`https://${r.a.contentLinkHost}/${r.a.CurrentMarket}/feed/personalize/settings`}),L=(null===(c=null==t?void 0:t.minimap)||void 0===c?void 0:c.severeAlertPixelCoordinatesArray)?n.WeatherAlertMap:n.WeatherMap,w=d.addOrUpdateChild({name:L,content:{type:a.c.StructuredData}}),k=w.addOrUpdateChild({name:n.PrecipitationMap,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.precipitationMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),T=w.addOrUpdateChild({name:n.RadarMap,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.radarMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),D=w.addOrUpdateChild({name:n.WindMap,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.windMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),j=w.addOrUpdateChild({name:n.CloudMap,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.cloudMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),I=w.addOrUpdateChild({name:n.TemperatureMap,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.temperatureMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),P=w.addOrUpdateChild({name:n.Wildfire,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.wildfireMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),F=w.addOrUpdateChild({name:n.Winterstorm,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.winterstormMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),U=w.addOrUpdateChild({name:n.SevereWeather,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.severeweatherMapTooltip,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),R=w.addOrUpdateChild({name:n.Nowcast,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.seeFullForecast,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),N=d.addOrUpdateChild({name:n.AlertArea,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:n.AlertArea,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),B=d.addOrUpdateChild({name:n.HourlyTrend,behavior:a.b.Navigate,action:a.a.Click,type:a.e.ActionButton,content:{headline:i.seeFullForecast,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o,destinationUrl:u}),M=d.addOrUpdateChild({name:n.WeatherHoverManualRotatePre,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:n.WeatherHoverManualRotatePre,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o}),x=d.addOrUpdateChild({name:n.WeatherHoverManualRotateNext,behavior:a.b.Customize,type:a.e.ActionButton,content:{headline:n.WeatherHoverManualRotateNext,type:a.c.StructuredData,vertical:n.Vertical,category:n.Category},ext:o});return{componentRoot:e,weatherCard:d,headerAnchor:l,locationAnchor:h,currentAnchor:g,unitSwitch:p,dailyForecast:f,dailyForecasts:m,seeForecastAnchor:y,editLocation:S,actionButton:b,menuEdit:C,menuHide:O,menuMore:A,precipitationMap:k,radarMap:T,windMap:D,cloudMap:j,temperatureMap:I,wildfireMap:P,winterstormMap:F,severeweatherMap:U,minimapTelemetry:w,alertArea:N,nowcastChart:R,hourlyTrend:B,airQuality:v,greetingRotatePre:M,greetingRotateNext:x}}},ZxLh:function(e,t,i){var n,a,r,o;e.exports=(n=i("Ni7E"),r=(a=n).lib.Base,o=a.enc.Utf8,void(a.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),r=this._iKey=t.clone(),s=a.words,c=r.words,u=0;u<i;u++)s[u]^=1549556828,c[u]^=909522486;a.sigBytes=r.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))},cYI1:function(e,t){},dMmp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.IsNullOrWhiteSpace=function(e){try{return null==e||"undefined"==e||e.toString().replace(/\s/g,"").length<1}catch(e){return console.log(e),!1}},e.Join=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];try{var a=i[0];if(Array.isArray(a)||a instanceof Array){for(var r=e.Empty,o=0;o<a.length;o++){var s=a[o];o<a.length-1?r+=s+t:r+=s}return r}if("object"==typeof a){var c=e.Empty,u=a;return Object.keys(a).forEach((function(e){c+=u[e]+t})),c=c.slice(0,c.length-t.length)}var d=i;return e.join.apply(e,[t].concat(d))}catch(t){return console.log(t),e.Empty}},e.Format=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];try{return t.match(e.regexNumber)?e.format(e.regexNumber,t,i):t.match(e.regexObject)?e.format(e.regexObject,t,i,!0):e.Empty}catch(t){return console.log(t),e.Empty}},e.format=function(t,i,n,a){return void 0===a&&(a=!1),i.replace(t,(function(t,i){var r,o=t.split(":");return o.length>1&&(i=o[0].replace("{",""),t=o[1].replace("}","")),null==(r=a?n[0][i]:n[i])||null==r||t.match(/{\d+}/)||void 0!==(r=e.parsePattern(t,r))&&null!=r?r:e.Empty}))},e.parsePattern=function(t,i){switch(t){case"L":return i.toLowerCase();case"U":return i.toUpperCase();case"d":if("string"==typeof i)return e.getDisplayDateFromString(i);if(i instanceof Date)return e.Format("{0:00}.{1:00}.{2:0000}",i.getDate(),i.getMonth(),i.getFullYear());break;case"s":if("string"==typeof i)return e.getSortableDateFromString(i);if(i instanceof Date)return e.Format("{0:0000}-{1:00}-{2:00}",i.getFullYear(),i.getMonth(),i.getDate());break;case"n":"string"!=typeof i&&(i=i.toString());var n=i.replace(/,/g,".");if(isNaN(parseFloat(n))||n.length<=3)break;var a=n.split(/[^0-9]+/g),r=a;a.length>1&&(r=[e.join.apply(e,[""].concat(a.splice(0,a.length-1))),a[a.length-1]]);var o=r[0],s=o.length%3,c=s>0?o.substring(0,s):e.Empty,u=o.substring(s).match(/.{3}/g);return(c=c+"."+e.Join(".",u))+(r.length>1?","+r[1]:"")}return"number"!=typeof i&&isNaN(i)||isNaN(+t)||e.IsNullOrWhiteSpace(i)?i:e.formatNumber(i,t)},e.getDisplayDateFromString=function(e){var t;if((t=e.split("-")).length<=1)return e;var i=t[t.length-1],n=t[t.length-2],a=t[t.length-3];return(i=(i=i.split("T")[0]).split(" ")[0])+"."+n+"."+a},e.getSortableDateFromString=function(t){var i=t.replace(",","").split(".");if(i.length<=1)return t;var n=i[i.length-1].split(" "),a=e.Empty;n.length>1&&(a=n[n.length-1]);var r=i[i.length-1].split(" ")[0]+"-"+i[i.length-2]+"-"+i[i.length-3];return!e.IsNullOrWhiteSpace(a)&&a.length>1?r+="T"+a:r+="T00:00:00",r},e.formatNumber=function(e,t){var i=t.length,n=e.toString();if(i<=n.length)return n;var a=i-n.length;return new Array(a+=1).join("0")+n},e.join=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var a=e.Empty,r=0;r<i.length;r++)if(!("string"==typeof i[r]&&e.IsNullOrWhiteSpace(i[r])||"number"!=typeof i[r]&&"string"!=typeof i[r])){a+=""+i[r];for(var o=r+1;o<i.length;o++)if(!e.IsNullOrWhiteSpace(i[o])){a+=t,r=o-1;break}}return a},e.regexNumber=/{(\d+(:\w*)?)}/g,e.regexObject=/{(\w+(:\w*)?)}/g,e.Empty="",e}();t.String=n;var a=function(){function e(e){void 0===e&&(e=n.Empty),this.Values=[],this.Values=new Array(e)}return e.prototype.ToString=function(){return this.Values.join("")},e.prototype.Append=function(e){this.Values.push(e)},e.prototype.AppendFormat=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.Values.push(n.Format.apply(n,[e].concat(t)))},e.prototype.Clear=function(){this.Values=[]},e}();t.StringBuilder=a},foc0:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const n={1:["#1360A7","linear-gradient(150.64deg, #1B7BC1 0%, #1360A7 100%)"],4:["#1C54A7","linear-gradient(150.64deg, #4177C1 0%, #1C54A7 100%)"],8:["#2A5194","linear-gradient(150.64deg, #5173AF 0%, #2A5194 100%)"],27:["#37368F","linear-gradient(150.64deg, #6B6DC0 0%, #37368F 100%)"],7:["#4F598D","linear-gradient(150.64deg, #6974A7 0%, #4F598D 100%)"],9:["#5D5B75","linear-gradient(150.64deg, #73738D 0%, #5D5B75 100%)"],6:["#68553C","linear-gradient(150.64deg, #846D4D 0%, #68553C 100%)"]},a={1:["#FFECB1","linear-gradient(315deg, #FFECB1 0%, rgba(255, 236, 177, 0) 100%)"],4:["#DFF9FF","linear-gradient(320.01deg, #DFF9FF 0%, rgba(223, 249, 255, 0) 100%)"],8:["#BFE0FF","linear-gradient(320.01deg, #BFE0FF 0%, rgba(191, 224, 255, 0) 100%)"],27:["#C4D4FE","linear-gradient(313.85deg, #C4D4FE 0%, rgba(196, 212, 254, 0) 112.31%)"],7:["#C1BAD1","linear-gradient(320.01deg, #C1BAD1 0%, rgba(193, 186, 209, 0) 100%)"],9:["#E5CFAD","linear-gradient(320.01deg, #E5CFAD 0%, rgba(229, 207, 173, 0) 100%)"],6:["#F2E8FF","linear-gradient(318.98deg, #F2E8FF 6.05%, rgba(242, 232, 255, 0) 100%)"]},r={1:["#565138","linear-gradient(315deg, #565138 0%, rgba(86, 81, 56, 0) 100%)"],4:["#253539","linear-gradient(320.01deg, #253539 0%, rgba(37, 53, 57, 0) 100%)"],8:["#2F3F48","linear-gradient(320.01deg, #2F3F48 0%, rgba(47, 63, 72, 0) 100%)"],27:["#2A3342","linear-gradient(313.85deg, #2A3342 0%, rgba(42, 51, 66, 0) 112.31%)"],7:["#434453","linear-gradient(320.01deg, #434453 0%, rgba(67, 68, 83, 0) 100%)"],9:["#403737","linear-gradient(320.01deg, #403737 0%, rgba(64, 55, 55, 0) 100%)"],6:["#342D3A","linear-gradient(318.98deg, #342D3A 6.05%, rgba(52, 45, 58, 0) 100%)"]},o={1:"1",2:"1",3:"1",4:"4",5:"4",6:"6",7:"7",8:"8",9:"9",10:"8",11:"8",12:"9",13:"8",14:"8",15:"7",16:"7",17:"8",18:"9",19:"8",20:"7",21:"9",22:"8",23:"8",24:"7",25:"7",26:"7",27:"27",28:"1",29:"1",30:"4",31:"4",32:"4",33:"6",34:"7",35:"8",36:"9",37:"8",38:"8",39:"9",40:"8",41:"8",42:"7",43:"7",44:"8",45:"9",46:"8",47:"7",48:"9",49:"8",50:"8",51:"8",52:"7",53:"7",54:"27",57:"7",58:"7",59:"7",60:"7",61:"6",62:"6",63:"9",64:"9",65:"9",66:"9",67:"27",68:"27",69:"8",70:"8",71:"8",72:"8",73:"9",74:"9",75:"8",76:"8",77:"8",78:"8",79:"8",80:"8",81:"7",82:"7",83:"8",84:"8",85:"8",86:"8",87:"6",88:"6",89:"9",90:"9",91:"6",92:"6",93:"6",94:"6",95:"9",96:"9",101:"1",102:"1"};class s{static getSkyCodeBackgroundGradientColors(e){const t=Object.prototype.hasOwnProperty.call(o,e)?o[e]:e;return n[t]}static getSkyCodeLightBackgroundGradientColors(e){const t=Object.prototype.hasOwnProperty.call(o,e)?o[e]:e;return a[t]}static getSkyCodeDarkBackgroundGradientColors(e){const t=Object.prototype.hasOwnProperty.call(o,e)?o[e]:e;return r[t]}static getAlertIconSvgFillColors(e){return"Y"===e?["#FFD02C","#795700"]:"O"===e?["#E67E22","white"]:"R"===e?["#E74C3C","white"]:"B"===e?["#3967E4","white"]:["#FFD02A","#795700"]}static getAlertIconSvgString(e){const t=this.getAlertIconSvgFillColors(e);return`\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n                <path d="M6.77446 3.44842C7.16811 2.79728 8.11588 2.80686 8.49628 3.46584L13.1341 11.5001C13.519 12.1667 13.0379 13 12.2681 13H2.7731C1.99431 13 1.51441 12.1491 1.91733 11.4826L6.77446 3.44842Z" fill="${t[0]}"/>\n                <rect x="7.01489" y="6" width="1" height="4" rx="0.5" fill="${t[1]}"/>\n                <rect x="7.01489" y="11" width="1" height="1" rx="0.5" fill="${t[1]}"/>\n            </svg>\n        `}}},hSGL:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("D57K"),a=i("tERu"),r=i("ypwz"),o=i("tMmC"),s=i("HxRh"),c=i("XlyT"),u=i("rvYQ"),d=i("zfSW"),l=i("msIb"),h=i("6ADy"),g=i("KETb"),p=i("u8F0"),f=i("CgWR"),v=i("u5KZ"),m=i("l+Jz"),y=i("HDSB"),b=i("/+Un");const S=new class extends class{constructor(e){this.fetchImpl=e,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.locationsServiceEndPoint="v1/news/users/me/locations",this.ocid="Peregrine",this.ocidOverride=!1}getUserDefaultLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"GET",headers:yield l.a.getOneServiceHeaders(),credentials:"include"},i=Object(h.c)(this.locationsServiceEndPoint);let a;[...l.a.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:e&&""+e}].forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{a=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(i.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: getUserDefaultLocation}`;throw new Error(t)}return e})),"getUserDefaultLocation")}catch(e){return a}return a}))}addToFavoriteLocation(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:"Location",definitionName:t,degree:"FavoriteLocation",metaData:e}),headers:yield l.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.pdpServiceEndpoint);let o;((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{o=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: Location`;throw new Error(t)}return e.json()})),"addToFavoriteLocation")}catch(e){return!1}return!0}))}removeFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){return yield this.deleteFromPdp(p.a.Location,"definitionName",[e])}))}updatePdpHomeLocation(e,t,i={},r){return Object(n.a)(this,void 0,void 0,(function*(){const o=p.a.Location,s=yield this.getRequestInit({method:"POST"},i);s.body=JSON.stringify({actionType:"Follow",targetType:o,definitionName:t,degree:"DefaultLocation",metaData:e});const c=Object(h.c)(this.pdpServiceEndpoint);return((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(null!=r?r:Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(null!=r?r:Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&c.searchParams.set(e.key,e.value)}),yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(c.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${o}`;throw new Error(t)}return e})),"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(o),!0}))}updateTrafficMyRoutes(e,t,i,a,r){return Object(n.a)(this,void 0,void 0,(function*(){const s=p.a.Traffic,c={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:s,targetId:i,degree:e,definitionName:t,metadata:a}),headers:yield l.a.getOneServiceHeaders(),credentials:"include"},u=yield this.getTrafficPdpUrl(null,null,r);try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(u.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${s}`;throw new Error(t)}return e.json()})),"updateTrafficMyRoutes");this.tryInvalidateBulkFetchedPdpTargetType(s)}catch(e){return o.a.logError(e.message),!1}return!0}))}deleteTrafficMyRoutes(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){const a={method:"DELETE",headers:yield this.getOneserviceHeaders(),credentials:"include"},r=yield this.getTrafficPdpUrl(e,t,i);try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,a);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${p.a.Traffic}`;throw new Error(t)}return e})),"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(p.a.Traffic)}catch(e){return!1}return!0}))}getTrafficMyRoutes(e,t){var i;return Object(n.a)(this,void 0,void 0,(function*(){const a={method:"GET",headers:yield this.getOneserviceHeaders(),credentials:"include"},r=yield this.getTrafficPdpUrl(e,null,t);try{const e=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,a);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${p.a.Traffic}`;throw new Error(t)}return e})),"getTrafficFromPdp");return null===(i=yield e.json())||void 0===i?void 0:i.value}catch(e){return null}}))}getTrafficPdpUrl(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){const n=Object(h.c)(this.pdpServiceEndpoint),r=(yield Object(b.d)())===a.c.SignedIn,o=Object(u.b)().UserId,s=r?l.a.getOneServiceParamsWithAuth(o,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(o,this.ocid,!this.ocidOverride);if(e||t){const i=`targetType eq '${p.a.Traffic}'`,a=e?`degree eq '${e}'`:"",r=t?`definitionName eq '${t}'`:"";n.searchParams.set("$filter",`actionType eq 'Follow' and (${i})${a?` and (${a})`:""}${r?` and (${r})`:""}`)}return[...s,...i||[]].forEach(e=>{e.value&&n.searchParams.set(e.key,e.value)}),n}))}addToWatchList(e,t=0,i={}){return Object(n.a)(this,void 0,void 0,(function*(){const r=p.a.Finance,o={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:r,targetId:e,metadata:{securityType:t,tickerId:this.generateUUID()}}),headers:yield this.getOneserviceHeaders(i),credentials:"include"},s=Object(h.c)(this.pdpServiceEndpoint),c="zh-cn"!==Object(u.b)().CurrentMarket;let d;((yield Object(b.d)())===a.c.SignedIn&&c?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&s.searchParams.set(e.key,e.value)});try{d=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(s.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${r}`;throw new Error(t)}return e.json()})),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(r)}catch(e){return!1}return!0}))}generateUUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))}sortWatchList(e,t={}){return Object(n.a)(this,void 0,void 0,(function*(){const i=p.a.Finance,r=yield S.readPdpWithTargetType(p.a.Finance,!0,200,t),o=r&&r.value;if(o.length!=e.length)return!1;const s={};e.forEach((e,t)=>{const n=o.filter(t=>t.targetId===e)[0];if(!n)return!1;s[e]=JSON.stringify({actionType:"Follow",targetId:e,targetType:i,rank:t,metadata:n.metadata})});const c={method:"PUT",body:JSON.stringify(s),headers:yield this.getOneserviceHeaders(t),credentials:"include"},d=Object(h.c)(this.pdpServiceEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&d.searchParams.set(e.key,e.value)});try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${i}`;throw new Error(t)}return e.json()})),"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(p.a.Finance)}catch(e){return!1}return!0}))}updateWeatherSettings(e,t,i={},r){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!t)return!0;let n="";n=e&&!t?'{"weatherDisplayUnit":"'+e+'"}':!e&&t?'{"userSettings":{"weatherLocationSettingMode":"'+t+'"}}':'{"weatherDisplayUnit":"'+e+'","userSettings":{"weatherLocationSettingMode":"'+t+'"}}';const o=yield this.getRequestInit({method:"POST"},i);o.body=n;const s=Object(h.c)(this.userUpdateEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(null!=r?r:Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(null!=r?r:Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&s.searchParams.set(e.key,e.value)});const c=yield this.fetchImpl(s.href,o);if(c.status>=400){const e=`OneService returned error response. Status: ${c.status} for update weather setting call`;throw new Error(e)}return!0}))}updateUserSettings(e,t={},i){return Object(n.a)(this,void 0,void 0,(function*(){if(!e)return!0;const n=[];let r;for(r in e)null!=e[r]&&n.push('"'+r+'": '+JSON.stringify(e[r]));const s='{"userSettings":{'+n.join(", ")+"}}",c=yield this.getRequestInit({method:"POST"},t);c.body=s;const d=Object(h.c)(this.userUpdateEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(null!=i?i:Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(null!=i?i:Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&d.searchParams.set(e.key,e.value)});try{const e=yield this.fetchImpl(d.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather setting call`;throw new Error(t)}}catch(e){return o.a.logError(e.message),!1}return!0}))}getPdpUserPreference(e={}){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit({method:"GET"},e),i=Object(h.c)(this.userUpdateEndpoint);[...(yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(i.href,t);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e})),"readPDPData");if(!e.ok)throw Error(`code=${e.status}, ${e.statusText}`);return yield e.json()}catch(e){return o.a.logError(e.message),null}}))}updatePdpLayoutPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:e}})},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield this.fetchImpl(i.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update layout preference setting call`;throw new Error(t)}}catch(e){return o.a.logError(e.message),!1}return!0}))}updateSegmentCardsEnableStatus(e,t=null){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const i=[];if(t){let e;for(e in t)null!=t[e]&&i.push('"'+e+'": '+JSON.stringify(t[e]))}const n=e.map(e=>e.cardType!=f.a.TopStoriesCard?`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`:"").join(","),a=i.length>0?'{"segmentCardSettings":"{'+n+'}","userSettings":{'+i.join(", ")+"}}":'{"segmentCardSettings":"{'+n+'}"}';return this.updateUserPreference(a)}))}updateProductivityCardsEnableStatus(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t='{"productivityCardSettings":"{'+e.map(e=>`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`).join(",")+'}"}';return this.updateUserPreference(t)}))}updateCommunitySettingsOptOutStatus(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t={};e.forEach(e=>{t[e.settingType]=e.optedOut?"1":"0"});const i={communitySettings:t};return this.updateUserPreference(JSON.stringify(i))}))}updateUserPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"POST",body:e,credentials:"include"},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const n=yield this.fetchImpl(i.href,t);if(n.status>=400){const t=`OneService returned error response while updating user preference. Status: ${n.status}, payload: ${e}`;throw new Error(t)}}catch(e){return!1}return!0}))}setPdpTargetTypesForBulkLoad(e){e&&e.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=e)}readPdpWithTargetType(e,t=!1,i,a={},r=!0){return Object(n.a)(this,void 0,void 0,(function*(){if(r){const t=yield this.getFromWebWorker(e);if(t)return t}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(e)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||(yield this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,t,i)));const n=this.bulkGraphActionResultCache.get(e);if(n)return{value:n}}else v.a.sendAppErrorEvent(Object.assign(Object.assign({},s.Ri),{message:`Received an unknown target type "${e}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`}));const n=(yield this.fetchPdpWithTargetTypes([e],t,i,a)).get(e);if(n)return{value:n}}))}deleteFromPdp(e,t,i,r={},o){return Object(n.a)(this,void 0,void 0,(function*(){const s={method:"DELETE",headers:yield this.getOneserviceHeaders(r),credentials:"include"},c=Object(h.c)(this.pdpServiceEndpoint),d=(yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride),p=`targetType eq '${e}'`;let f=`actionType eq 'Follow' and (${i.map(e=>`${t} eq '${e}'`).join(" or ")}) and (${p})`;o&&(f+=` and (degree eq '${o}')`),c.searchParams.set("$filter",f),d.forEach(e=>{e.value&&c.searchParams.set(e.key,e.value)});try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(c.href,s);if(t.status>=400){const i=`OneService returned error response. Status: ${t.status} for actionType: Follow, targetType: ${e}`;throw new Error(i)}return t})),"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(e)}catch(e){return!1}return!0}))}tryInvalidateBulkFetchedPdpTargetType(e){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(e)}fetchPdpWithTargetTypes(e,t=!1,i,r={}){return Object(n.a)(this,void 0,void 0,(function*(){if(!e.length)return new Map;const o=e.map(e=>`targetType eq '${e}'`).join(" or "),s=[{key:"$top",value:""+(i=i||10*e.length*2)},{key:"$filter",value:`actionType eq 'Follow' and (${o})`}],c=yield this.getRequestInit({method:"GET"},r);!0===t&&(c.cache="no-store");const d=Object(h.c)(this.pdpServiceEndpoint);[...s,...(yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&d.searchParams.set(e.key,e.value)});const p=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,c);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e})),"readPDPData");if(!p.ok)throw Error(`code=${p.status}, ${p.statusText}`);const f=new Map,v=yield p.json();if(!v)return f;if(v.value)for(const e of v.value){let t=f.get(e.targetType);t||f.set(e.targetType,t=[]),t.push(e)}for(const t of e)f.get(t)||f.set(t,[]);return f}))}updateMarketPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:e}})},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield this.fetchImpl(i.href,t);if(!e.ok)throw new Error("Failed to update market preference: Status: "+e.status);return!0}catch(e){return o.a.logError(e.message),!1}}))}getFromWebWorker(e){return Object(n.a)(this,void 0,void 0,(function*(){let t=null;if(d.c){const i=this.maptoWebWorkerId(e);if(i&&i.trim()){const i=yield Object(d.b)({id:this.maptoWebWorkerId(e)});i.fetched&&(t=i.payload)}}return t}))}maptoWebWorkerId(e){switch(e){case p.a.Location:return m.a.WeatherPdp;case p.a.League:return m.a.SportsLeaguePdp;case p.a.Player:return m.a.SportsPlayerPdp;case p.a.Team:return m.a.SportsTeamPdp;case p.a.Finance:return m.a.MoneyPdp;default:return""}}getRequestInit(e={method:"GET"},t={}){return Object(n.a)(this,void 0,void 0,(function*(){const i=yield l.a.getOneServiceHeaders();return e.headers=Object.assign(Object.assign({},i),t),e.credentials="include",e}))}getOneserviceHeaders(e={}){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield l.a.getOneServiceHeaders();return Object.assign(Object.assign({},t),e)}))}getFollowedLists(){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.getRequestInit({method:"GET"}),t=Object(h.c)(this.userUpdateEndpoint);[...(yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&t.searchParams.set(e.key,e.value)});try{const i=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.fetchImpl(t.href,e);if(!i.ok){if(i.status>=400&&i.status<500&&408!=i.status)return i;Object(c.c)(null,s.bd,"Error get followed list")}return i})),"getFollowedLists");return i.ok||Object(c.c)(null,s.bd,"Error get followed list"),yield i.json()}catch(e){return o.a.logError(e.message),null}}))}addToFollowedLists(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=p.a.Finance,i={method:"POST",body:JSON.stringify({financeListIds:e}),headers:yield l.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.userUpdateEndpoint);let o;((yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{o=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const i=`OneService returned error response. Status: ${e.status} for actionType: FollowList, targetType: ${t}`;throw new Error(i)}return e.json()})),"addToFollowedLists")}catch(e){return!1}return!0}))}deleteFromFollowedLists(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=p.a.Finance,i={method:"DELETE",body:null,headers:yield l.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.userUpdateEndpoint);let o;[...(yield Object(b.d)())===a.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride):l.a.getOneServiceParamsWithoutAuth(Object(u.b)().UserId,this.ocid,!this.ocidOverride),...[{key:"financeListIds",value:e.toString()}]].forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{o=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const i=`OneService returned error response. Status: ${e.status} for actionType: UnFollowList, targetType: ${t}`;throw new Error(i)}return e.json()})),"deleteFromFollowedLists")}catch(e){return!1}return!0}))}}{constructor(){super(Object(y.a)()?window.fetch.bind(window):fetch),u.a.AppType!==r.a.WindowsNewsPlus&&u.a.AppType!==r.a.NewsAndInterests&&u.a.AppType!==r.a.WindowsNewsWidgets||(this.ocid="winp2",this.ocidOverride=!0),u.a.AppType===r.a.SharedWidgets&&(this.ocid="BingHp01",this.ocidOverride=!0)}}},heQk:function(e,t,i){var n,a,r,o,s,c,u,d,l,h,g,p,f,v,m,y,b,S,C;e.exports=(n=i("Ni7E"),void(n.lib.Cipher||(a=n,r=a.lib,o=r.Base,s=r.WordArray,c=r.BufferedBlockAlgorithm,u=a.enc,u.Utf8,d=u.Base64,l=a.algo.EvpKDF,h=r.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?C:b}return function(t){return{encrypt:function(i,n,a){return e(n).encrypt(t,i,n,a)},decrypt:function(i,n,a){return e(n).decrypt(t,i,n,a)}}}}()}),r.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),g=a.mode={},p=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=g.CBC=function(){var e=p.extend();function t(e,t,i){var n=this._iv;if(n){var a=n;this._iv=void 0}else a=this._prevBlock;for(var r=0;r<i;r++)e[t+r]^=a[r]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,a=n.blockSize;t.call(this,e,i,a),n.encryptBlock(e,i),this._prevBlock=e.slice(i,i+a)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,a=n.blockSize,r=e.slice(i,i+a);n.decryptBlock(e,i),t.call(this,e,i,a),this._prevBlock=r}}),e}(),v=(a.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,a=n<<24|n<<16|n<<8|n,r=[],o=0;o<n;o+=4)r.push(a);var c=s.create(r,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:f,padding:v}),reset:function(){h.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else n=i.createDecryptor,this._minBufferSize=1;this._mode=n.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),m=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(a.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=s.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(d)},parse:function(e){var t=d.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=s.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:n})}},b=r.SerializableCipher=o.extend({cfg:o.extend({format:y}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var a=e.createEncryptor(i,n),r=a.finalize(t),o=a.cfg;return m.create({ciphertext:r,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),S=(a.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=s.random(8));var a=l.create({keySize:t+i}).compute(e,n),r=s.create(a.words.slice(t),4*i);return a.sigBytes=4*t,m.create({key:a,iv:r,salt:n})}},C=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:S}),encrypt:function(e,t,i,n){var a=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=a.iv;var r=b.encrypt.call(this,e,t,a.key,n);return r.mixIn(a),r},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var a=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=a.iv,b.decrypt.call(this,e,t,a.key,n)}}))))},i3c9:function(e,t,i){var n,a,r;e.exports=(r=i("Ni7E"),a=(n=r).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var a=[],r=0;r<i;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<i;s++)a.push(n.charAt(o>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var r=0;r<i.length;r++)n[i.charCodeAt(r)]=r}var o=i.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,i){for(var n=[],r=0,o=0;o<t;o++)if(o%4){var s=i[e.charCodeAt(o-1)]<<o%4*2,c=i[e.charCodeAt(o)]>>>6-o%4*2;n[r>>>2]|=(s|c)<<24-r%4*8,r++}return a.create(n,r)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},ilNR:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=["1","2","3","4","6","7","8","9","10","13","17","19","20","24","28","29","30","31","32","34","35","37","40","41","42","44","47","51","80","15","25","26","59","22","23","79","11","69","71","14","27","67","81","75","77","83","85","38","70","72","54","68","52","53","60","46","49","50","82","76","78","84","86","33","61","62","87","88","93","94","95","96","12","18","21","36","39","45","48","63","64","89","90"]},irMn:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("D57K"),a=i("6ADy"),r=i("msIb"),o=i("KETb"),s=i("B9v6"),c=i("Uw7R"),u=i("HxRh"),d=i("XlyT");class l{constructor(){this.FEED_API_PATH="news/feed/segments/weather",this.DEFAULT_URL="https://assets.msn.com/service/news/feed/segments/weather"}fetchWeatherFeed(e="weather-peregrine",t=null){return Object(n.a)(this,void 0,void 0,(function*(){const i=Object(a.a)(this.FEED_API_PATH),l=(null==i?void 0:i.href)||this.DEFAULT_URL,h=new URL(l);r.a.getCommonParams2(e,!1).forEach(e=>{h.searchParams.set(e.key,e.value)});const g=yield r.a.getOneServiceHeaders(),p={method:"GET",headers:Object.assign(Object.assign({},g),t)};Object(s.a)("WeatherRequest.Start",Object(c.a)());try{const e=yield Object(o.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield Object(o.a)(decodeURIComponent(h.href),p,u.lj);return e&&e.json()})),"FetchWeatherFeed");return Object(s.a)("WeatherRequest.End",Object(c.a)()),e}catch(e){Object(d.c)(e,u.lj,"Exception while calling fetch weather feed data","Url: "+h.href)}return null}))}}},lVeH:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("D57K"),a=i("hSGL"),r=i("XlyT"),o=i("HxRh"),s=i("I6Lx"),c=i("rvYQ"),u=i("xYH4"),d=i("54Lz"),l=i("Vy2U");var h;!function(e){e[e.AutoDetectLoc=1]="AutoDetectLoc",e[e.SpecifyLoc=2]="SpecifyLoc"}(h||(h={}));class g{constructor(){this.instance=a.a}getUserDefaultLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){let t,i;try{t=yield(yield this.instance.getUserDefaultLocation(e)).json()}catch(i){Object(r.c)(i,o.Si,"User's default location fetch request failed. Autodetect forced: "+(!0===e)),t=null}return t&&t.length&&(i={latitude:t[0].latitude,longitude:t[0].longitude,isDetected:e,locality:t[0].city,region:l.b.abbreviateUSState(t[0].state,s.b.Locale,t[0].countryCode),country:t[0].country,isoCode:t[0].countryCode,language:c.a.CurrentMarket},i.displayName=l.a.getDisplayName(i)),i}))}updateUserSettings(e,t,i={},a){return Object(n.a)(this,void 0,void 0,(function*(){let n=!1;try{n=yield this.instance.updateWeatherSettings(e,t,i,a)}catch(e){Object(r.c)(e,o.zj,"Weather or location user settings update failed"),n=!1}return n}))}setHomeLocation(e,t={},i){return Object(n.a)(this,void 0,void 0,(function*(){let n=!1;try{n=yield this.instance.updatePdpHomeLocation(g.buildMetaData(e),`${e.latitude},${e.longitude}`,t,i)}catch(e){Object(r.c)(e,o.wj,"Home Location Update Failed"),n=!1}return n&&Object(d.a)(e),n}))}setSpecifyLocationMode(){return Object(n.a)(this,void 0,void 0,(function*(){let e=!1;try{e=yield this.instance.updateWeatherSettings(null,""+h.SpecifyLoc)}catch(t){Object(r.c)(t,o.zj,"Weather user settings update failed"),e=!1}return e}))}addFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=`${e.latitude},${e.longitude}`;return yield this.instance.addToFavoriteLocation(g.buildMetaData(e),t)}))}removeFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=e.definitionName||`${e.latitude},${e.longitude}`,i=yield this.instance.removeFavoriteLocation(t);return i&&(e.definitionName=null),i}))}static buildMetaData(e){const t=e.language||s.b.Locale||"";return JSON.parse(JSON.stringify({geoCoordinates:{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)},addressLine:e.addressLine,subRegion:e.subRegion,readLink:e.readLink,city:e.locality,state:e.region,countryRegion:e.country,postalCode:e.postalCode,isoCode:e.isoCode,locationType:"number"==typeof e.locationType?e.locationType||1:Object(u.a)(""+e.locationType,1),locationTypeId:[e.locality,e.region,e.country].filter(e=>!!e).join(","),language:t||void 0}))}}},m2Vd:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.None=0]="None",e[e.JustNow=1]="JustNow",e[e.LessThanOneHour=2]="LessThanOneHour",e[e.Today=3]="Today",e[e.Yesterday=4]="Yesterday",e[e.ThisWeek=5]="ThisWeek",e[e.ThisYear=6]="ThisYear",e[e.FullDate=7]="FullDate",e[e.InMinutes=8]="InMinutes"}(n||(n={}))},msIb:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,a=i("D57K"),r=i("rvYQ"),o=i("y+Kz"),s=i("I6Lx"),c=i("wBSZ"),u=i("ax+D"),d=i("BQg2"),l=i("kN1G"),h=i("/+Un"),g=i("HDSB"),p=i("NIfb"),f=i("MptA");!function(e){function t(e=null,t,i=!0,a=null,c=!1,u=Object(l.j)()){const d=Object(r.b)(),h=[{key:o.s.apiKey,value:d.OneServiceApiKey},{key:o.s.activityId,value:d.ActivityId},{key:o.s.ocid,value:i?n(d.TrackInfo,t):t},{key:o.s.market,value:d.CurrentMarket}];e&&h.push({key:o.s.user,value:e});let g=Object(s.a)().CurrentFlights;if(a){g=g?`${g},${a}`:a;const e="prg-bngimg-t";-1===g.indexOf(e)&&(g+=","+e),!0===c&&(g=a)}return g&&h.push({key:o.s.fdhead,value:g}),u&&h.push({key:l.c,value:l.d}),s.b.IsBlendedEnterprise&&h.push({key:"audienceMode",value:"enterprise"}),h}function i(e=Object(l.j)(),t){return Object(a.a)(this,void 0,void 0,(function*(){const i={};if(e&&!(yield Object(l.g)())){const e=yield Object(l.e)(c.c,c.f,c.e);e&&e.token&&t?i[o.r.entAuthorization]=e.token:e&&e.token&&(i[o.r.authorization]="Bearer "+e.token)}if(!Object(g.a)()){const e=Object(p.a)().cookie;e&&(i.Cookie=e);const t=Object(p.a)().referer;t&&(i.Referer=t)}return i}))}function n(e,t){return u.a.isNonNullObject(e)&&u.a.isNonNullObject(e.sitePage)&&Object(f.a)(e.sitePage.page_product)&&Object(f.a)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.authenticationTicketType="10",e.signedInCookieNameHeader="signedInCookieName",e.userLocationHeader="user-location",e.serviceRequestOnComplete=function(e,t){return Object(a.a)(this,void 0,void 0,(function*(){try{const i=yield e();return t(),i}catch(e){throw t(),e}}))},e.getOneServiceParamsWithoutAuth=t,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!0){const i=Object(r.b)(),a=[{key:o.s.apiKey,value:i.OneServiceApiKey},{key:o.s.ocid,value:t?n(i.TrackInfo,e):e},{key:o.s.market,value:i.CurrentMarket}];return Object(l.j)()&&a.push({key:l.c,value:l.d}),a},e.getOneServiceParamsWithAuth=function(e=null,i,n=!0,a=null,s=!1){const c=Object(r.b)().AuthCookieName,u=[...t(e,i,n,a,s)];return c&&u.push({key:o.s.signInCookieName,value:c.toUpperCase()}),u},e.getOneServiceHeaders=i,e.getOneServiceFeedCallHeaders=function(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const n=yield i(e,t),a=Object(r.b)(),s=a.ActivityId;return a.SendFeedCallActivityIdInHeader&&s&&(n[o.r.activityId]=s),n}))},e.getLocationParams=function(e,t){const i=Object(r.b)(),n=e||i.Latitude,a=t||i.Longitude;return n&&a?{key:o.s.location,value:`${n}|${a}`}:null},e.getOneServiceOCID=n,e.getBaseRequestData=function(t){return Object(a.a)(this,void 0,void 0,(function*(){return{headers:yield e.getOneServiceHeaders(),method:t}}))},e.getCommonParams=function(e,t=!1){return Object(s.a)().UserIsSignedIn?this.getOneServiceParamsWithAuth(Object(r.b)().UserId,e,t):this.getOneServiceParamsWithoutAuth(Object(r.b)().UserId,e,t)},e.getCommonParams2=function(e,t=!0,i=!1){return Object(h.e)()?this.getOneServiceParamsWithAuth(Object(r.b)().UserId,e,t,i):this.getOneServiceParamsWithoutAuth(Object(r.b)().UserId,e,t,i)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const i=t[1].split("#")[0];return!!new d.a(i).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const i=t[1].split("#")[0],n=new d.a(i);if(n.get("ocid")){n.delete("ocid");let t=e.replace(i,n.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach(t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach(t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})})},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach(t=>{t.subCards.forEach(t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach(t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))})})})}}(n||(n={}))},nwfF:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("VbA2"),a=i("HDSB");function r(){return Object(a.a)()?window.fetch.bind(window):n.b}},oilT:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f}));var n=i("GFO5"),a=i("I6Lx"),r=i("/FrS"),o=i("Y7RG"),s=i("F+I8"),c=i("Oa3u");const u={"Aachen, Germany":"3","Abilene, TX":"2","Acworth, GA":"29","Tokyo, Japan":"1","Afton, WY":"28","Ahmedabad, Gujarat, India":"30","Kanagawa, Japan":"4","Ajaccio, France":"31","Akron, OH":"32","Albuquerque, NM":"8","Appleton, WI":"22","Aquebogue, NY":"23","Arlington, TX":"79","Asheville, NC":"35","Atlanta, GA":"17","Austin, TX":"44","Avignon, France":"13","Awendaw, SC":"40","Axminster, England, United Kingdom":"10","Aylesbury, England, United Kingdom":"37","Azle, TX":"19","Bakersfield, CA":"41","BB Rd, Lebanon, Kansas":"80","Barcelona, Spain":"20","Bellevue, WA":"47","BF Homes Parañaque, National Capital Region, Philippines":"42","Bg Pierce Ln, Normangee, Texas":"7","Bhubaneswar, Orissa, India":"34","Billings, MT":"24","Bjelovar, Croatia":"51","Bloomington, IN":"6","Greenville, NC":"9"};function d(e,t){return u[e.displayName]||t}var l=i("0km5"),h=i("XlyT"),g=i("HxRh");class p{constructor(e,t){this.truncateTimezone=e,this.locationHref=t}setLocationHref(e){this.locationHref=e}static isValidWeatherSummaryResponse(e){return e&&e.responses&&e.responses[0]&&e.responses[0].weather&&e.responses[0].weather[0]&&e.responses[0].weather[0].forecast&&e.responses[0].weather[0].forecast.days&&e.responses[0].weather[0].forecast.days.length>0}TranslateToWeatherForecast(e,t){var i,r,o,c,u,d,l;if(!p.isValidWeatherSummaryResponse(e))throw new Error("Weather Service response schema validation error: no summary found!");const h=t.latitude||(null===(o=null===(r=null===(i=e.responses[0])||void 0===i?void 0:i.source)||void 0===r?void 0:r.coordinates)||void 0===o?void 0:o.lat),g=t.longitude||(null===(d=null===(u=null===(c=e.responses[0])||void 0===c?void 0:c.source)||void 0===u?void 0:u.coordinates)||void 0===d?void 0:d.lon),{degree:f,unit:v}=p.getStandardDegree(e.units.temperature),m=e.responses[0].weather[0],y=e.responses[0].weather[0].provider,b={isAlert:m.alerts>0,normalizedSkyCode:s.a.getWeatherNormalizedSkyCode(m.current.pvdrIcon),currentTemperature:m.current.temp&&m.current.temp.toString(),feels:m.current.feels&&m.current.feels.toString(),pvdrIcon:m.current&&m.current.pvdrIcon,aqi:m.current.aqi&&m.current.aqi.toString(),image:{src:n.c.getSkyCodeUrl(m.current&&m.current.pvdrIcon,n.a.Size50),alt:m.current&&m.current.cap},shortCap:m.current&&m.current.capAbbr,skycode:{children:m.current&&m.current.cap},precipitation:{children:m.forecast&&m.forecast.days&&m.forecast.days[0]&&null!=m.forecast.days[0].precip?m.forecast.days[0].precip+"%":void 0},windDir:m.current.windDir,windSpeed:m.current.windSpd&&e.units.speed&&`${m.current.windSpd} ${e.units.speed}`,deepLink:`https://a.msn.com/54/${Object(a.a)().Locale}/ct${h},${g}?weadegreetype=${f.replace("°","")}`,degreeSetting:f,alternateDegreeSetting:f.includes("C")?"°F":"°C",comingWeather:null===(l=null==m?void 0:m.current)||void 0===l?void 0:l.comingWeather},S=m.forecast.days.map((e,t)=>({id:Math.random().toString(24).substring(2),day:e.valid&&new Date(e.valid),highTemperature:e.tempHi+"°",lowTemperature:e.tempLo+"°",image:{src:n.c.getSkyCodeUrl(e.icon&&e.icon.toString()||e.pvdrIcon,n.a.Size30),alt:e.cap},pvdrIcon:e.pvdrIcon||""+e.icon,deepLink:`https://a.msn.com/54/${Object(a.a)().Locale}/ct${h},${g}?day=${t+1}&weadegreetype=${f.replace("°","")}`}));return{lastUpdated:m.current&&m.current.created,currentCondition:b,forecast:S,unit:v,provider:y}}TranslateToHourlyForecast(e){const{unit:t}=p.getStandardDegree(e.units.temperature),i=e.responses[0].weather[0],n=[];for(let t=0;t<i.days.length;++t){const a=i.days[t],r={hourly:[]};if(a.hourly)for(let t=0;t<a.hourly.length;++t)r.hourly.push(p.GenerateHourlySnapshot(a.hourly[t],e.units));n.push(r)}return{forecast:n,unit:t,source:e.responses[0].source,isPartialHour:!1}}TranslateToWeatherOverview(e,t,i,a=!1,r=!1){var o,c,u,h,g,f;if(!p.isValidWeatherSummaryResponse(e)||!e.responses[0].weather[0].current)throw new Error("Weather Service response schema validation error: no summary found!");const v=e.responses[0].weather[0],m="n"===v.current.daytime,{degree:y,unit:b}=p.getStandardDegree(e.units.temperature),S=v.current,C=this.locationHref?{locationHref:this.locationHref}:void 0,O=Object(l.buildLink)(t,b,C),A=null===(g=null===(h=null===(u=null===(c=null===(o=e.responses)||void 0===o?void 0:o[0])||void 0===c?void 0:c.weather)||void 0===u?void 0:u[0])||void 0===h?void 0:h.regiondata)||void 0===g?void 0:g.alert;let L=0,w="";(null==A?void 0:A[0])&&(null==A?void 0:A.some(e=>e.dist<=0))&&(L=A.filter(e=>e.dist<=0).length,w=A[0].significance);const k={isAlert:v.alerts&&v.alerts.length>0,currentTemperature:S.temp&&S.temp.toString(),pvdrIcon:S.pvdrIcon,normalizedSkyCode:(null==i?void 0:i.useMockSkyCode)?d(t,S.pvdrIcon):s.a.getWeatherNormalizedSkyCode(S.pvdrIcon,i&&i.enableAppImages),image:{src:n.c.getSkyCodeUrl(S.pvdrIcon,n.a.Size50),alt:S.cap},shortCap:S.capAbbr,skycode:{children:S.cap},precipitation:{children:v.forecast&&v.forecast.days&&v.forecast.days[0]&&v.forecast.days[0].daily&&null!=v.forecast.days[0].daily.precip?v.forecast.days[0].daily.precip+"%":void 0},deepLink:O,degreeSetting:y,alternateDegreeSetting:y.includes("C")?"°F":"°C",uv:Math.floor(S.uv),uvDescription:S.uvDesc,feels:S.feels+"°",humidity:Math.floor(S.rh)+"%",windDesc:`${S.pvdrWindDir} ${S.pvdrWindSpd}`,windSpeed:`${S.windSpd} ${e.units.speed}`,windDir:S.windDir,dewPoint:null!=S.dewPt?S.dewPt+"°":"N/A",baro:`${v.current.baro} ${e.units.pressure}`,visiblity:`${v.current.vis} ${e.units.distance}`,richCaps:v.current.richCaps,aqi:""+v.current.aqi,aqiSeverity:v.current.aqiSeverity,primaryPollutant:v.current.primaryPollutant,isNight:m,currentRaw:S,unitsRaw:e.units,alertCount:L,alertSignificance:w,comingWeather:null===(f=null==v?void 0:v.current)||void 0===f?void 0:f.comingWeather},T=[];let D=null;for(let t=0;t<v.forecast.days.length;++t){const i=v.forecast.days[t],a=i.daily,r=m?a.night:a.day,o=0===t?r:a.day;let c;if(this.truncateTimezone&&a.valid&&a.valid.includes("T")){const e=a.valid.split("T")[0].split("-");c=new Date(Number(e[0]),Number(e[1])-1,Number(e[2]))}else c=a.valid&&new Date(a.valid);const u={id:Math.random().toString(24).substring(2),day:c,highTemp:a.tempHi,lowTemp:a.tempLo,highTemperature:a.tempHi+"°",lowTemperature:a.tempLo+"°",image:{src:n.c.getSkyCodeUrl(a.pvdrIcon||a.icon&&a.icon.toString(),n.a.Size30),alt:a.pvdrCap},pvdrIcon:a.pvdrIcon||""+a.icon,glyphCode:s.a.getWeatherGlyphCode(a.pvdrIcon),normalizedSkyCode:s.a.getWeatherNormalizedSkyCode(a.pvdrIcon),precipitation:null!=a.precip?""+a.precip:"N/A",humidity:""+a.rhLo,humidityLow:""+a.rhLo,humidityHi:""+a.rhHi,windSpeed:r?""+r.windSpd:"N/A",windSpeedUnit:e.units.speed,airPressure:"N/A",summaries:o?o.summaries:[],almanac:i.almanac,deepLink:`${O}&day=${t+1}`,hourly:[],uv:a.uv,uvDesc:a.uvDesc,windMax:null!=a.windMax?`${a.windMax} ${e.units.speed}`:`${a.pvdrWindDir} ${a.pvdrWindSpd}`,windMaxDir:null!=a.windMax?a.windMaxDir:null,cap:a.pvdrCap,rainAmount:null!=a.rainAmount&&`${a.rainAmount} ${e.units.height}`};if(i.hourly)for(let t=0;t<i.hourly.length;++t){const n=i.hourly[t];D||(D=n),u.hourly.push(p.GenerateHourlySnapshot(n,e.units))}T.push(u)}if(i&&i.weatherApi&&D&&!r){const t=this.getHistoryData(i.weatherApi.history,e,D);t&&t.length>0&&(T[0].hourly=t.concat(T[0].hourly))}const j=this.translateToAlertsDetail(e),I=this.translateToRegionData(e),P=this.translateToContentData(e),F=this.translateToMapsMetaData(e);return{lastUpdated:this.evaluteCreatedTime(v.current&&v.current.created,e.responses[0].source),currentCondition:k,forecast:T,nowcasting:p.translateToNowcastData(v.nowcasting),source:e.responses[0].source,provider:v.provider,aqiProvider:v.aqiProvider,alertsInfo:j,regionData:I,contentData:P,mapsMetaData:F,unit:b,isPartialHour:a}}static translateToNowcastData(e){let t;if(e){const i=Object(o.a)(e.precipitation,e=>e>=r.l.RainThreshold);t=Object.assign(Object.assign({},e),{isRaining:i,useNowcastSummary:i&&e.summary&&e.shortSummary})}return t}translateToAlertsDetail(e){var t,i,n,a,r,o,s,c,u;const d=null===(a=null===(n=null===(i=null===(t=null==e?void 0:e.responses)||void 0===t?void 0:t[0])||void 0===i?void 0:i.weather)||void 0===n?void 0:n[0])||void 0===a?void 0:a.alerts,l=null===(u=null===(c=null===(s=null===(o=null===(r=null==e?void 0:e.responses)||void 0===r?void 0:r[0])||void 0===o?void 0:o.weather)||void 0===s?void 0:s[0])||void 0===c?void 0:c.regiondata)||void 0===u?void 0:u.alert;if(!d||!d[0])return;if(!l||!l.length)return d[0];let h;for(let e=0;e<l.length;e++)if(l[e].dist<=0){h=Object.assign({},d[e]);break}return h}translateToRegionData(e){var t,i,n,a,r,o,s,c,u;const d=null===(r=null===(a=null===(n=null===(i=null===(t=null==e?void 0:e.responses)||void 0===t?void 0:t[0])||void 0===i?void 0:i.weather)||void 0===n?void 0:n[0])||void 0===a?void 0:a.regiondata)||void 0===r?void 0:r.alert,l=null===(u=null===(c=null===(s=null===(o=null==e?void 0:e.responses)||void 0===o?void 0:o[0])||void 0===s?void 0:s.weather)||void 0===c?void 0:c[0])||void 0===u?void 0:u.alerts;if(d&&(null==l?void 0:l[0])&&(null==d?void 0:d.some(e=>e.dist<=0))&&d.length==l.length){for(let e=0;e<d.length;++e)d[e].localizedTitle=null==l?void 0:l[e].title;return d}return null}translateToContentData(e){var t,i,n,a;try{const r=null===(a=null===(n=null===(i=null===(t=null==e?void 0:e.responses)||void 0===t?void 0:t[0])||void 0===i?void 0:i.weather)||void 0===n?void 0:n[0])||void 0===a?void 0:a.contentdata,o=[];return(null==r?void 0:r.length)>0&&r.forEach(e=>{var t;if(!(null==e?void 0:e.contenttype))return;const i={id:e.id,ranking:e.ranking?e.ranking:0,contenttype:e.contenttype,content:[]};(null===(t=e.content)||void 0===t?void 0:t.length)>0&&e.content.forEach(e=>{if(!e)return;const t={title:e.title,imgUrl:e.imgUrl,destUrl:e.destUrl,metadata:e.metadata,displayType:e.displayType,renderPlaces:e.renderPlaces};i.content.push(t)}),o.push(i)}),o.length>0?o:null}catch(e){return null}}translateToMapsMetaData(e){var t,i,n,a;return null===(a=null===(n=null===(i=null===(t=null==e?void 0:e.responses)||void 0===t?void 0:t[0])||void 0===i?void 0:i.weather)||void 0===n?void 0:n[0])||void 0===a?void 0:a.mapsmetadata}getHistoryData(e,t,i){var n;if(-1===e){const e=t.responses[0].weather[0],a=e.current,r=t.responses[0].source.utcOffset,o=(null==i?void 0:i.valid)?Object(c.a)(new Date(i.valid),-1):new Date;let u,d=e.forecast&&e.forecast.days&&e.forecast.days[0];return d&&(d=d,u=null===(n=null==d?void 0:d.daily)||void 0===n?void 0:n.precip,d.hourly&&d.hourly[0]&&(u=d.hourly[0].precip)),[{temperature:a.temp,cap:a.cap,airPressure:null!=a.baro?""+a.baro:"N/A",pressureUnit:t.units.pressure,humidity:null!=a.rh?a.rh+"%":"N/A",windGust:null!=a.windGust?`${a.windGust} ${t.units.speed}`:"N/A",dewPt:null!=a.dewPt?a.dewPt+"°":"N/A",cloudCover:null!=a.cloudCover?a.cloudCover+"%":"N/A",vis:null!=a.vis?`${a.vis} ${t.units.distance}`:"N/A",glyphCode:s.a.getWeatherGlyphCode(a.pvdrIcon),pvdrIcon:a.pvdrIcon,normalizedSkyCode:s.a.getWeatherNormalizedSkyCode(a.pvdrIcon),feels:a.feels,precipitation:null!=u?""+u:"N/A",uv:""+(a.uv||0),time:o,timeStr:o&&Object(c.d)(o,r),windSpeed:a.windSpd+"",windSpeedUnit:t.units.speed,windDir:a.windDir,windDesc:a.pvdrWindDir,pvdrWindSpd:a.pvdrWindSpd}]}return[]}static getStandardDegree(e){return"°ฟาเรนไฮด์"===e||"‎°ف"===e||e===r.m.Fahrenheit?{degree:"°F",unit:r.m.Fahrenheit}:"°เซลเซียส"===e||"‎°م"===e||e===r.m.Celsius?{degree:"°C",unit:r.m.Celsius}:(""+e).replace(/\u200e/g,"").includes("F")?{degree:"°F",unit:r.m.Fahrenheit}:{degree:"°C",unit:r.m.Celsius}}static GenerateHourlySnapshot(e,t){return{temperature:e.temp,cap:e.cap,airPressure:null!=e.baro?""+e.baro:"N/A",pressureUnit:t.pressure,humidity:null!=e.rh?e.rh+"%":"N/A",windGust:null!=e.windGust?`${e.windGust} ${t.speed}`:"N/A",dewPt:null!=e.dewPt?e.dewPt+"°":"N/A",cloudCover:null!=e.cloudCover?e.cloudCover+"%":"N/A",vis:null!=e.vis?`${e.vis} ${t.distance}`:"N/A",glyphCode:s.a.getWeatherGlyphCode(e.pvdrIcon),normalizedSkyCode:s.a.getWeatherNormalizedSkyCode(e.pvdrIcon),pvdrIcon:e.pvdrIcon,feels:e.feels,precipitation:null!=e.precip?""+e.precip:"N/A",uv:null!=e.uv?""+e.uv:"N/A",time:new Date(e.valid),timeStr:e.valid,windSpeed:e.windSpd+"",windSpeedUnit:t.speed,windDir:e.windDir,windDesc:e.pvdrWindDir,pvdrWindSpd:e.pvdrWindSpd,summary:e.summary}}evaluteCreatedTime(e,t){var i,n;if(e)try{const a=Date.now()-new Date(e).getTime();if(a>=36e5){const r=`id: ${null==t?void 0:t.id}, lat: ${null===(i=null==t?void 0:t.coordinates)||void 0===i?void 0:i.lat}, lon: ${null===(n=null==t?void 0:t.coordinates)||void 0===n?void 0:n.lon}, created: ${e}, requested: ${(new Date).toLocaleString()}, latency: ${a}`;Object(h.c)(Error(r),g.kj,"Weather data stale more than 1 hour")}}catch(t){Object(h.c)(Error("created:"+e),g.kj,"Weather data created time invalid")}return e}}const f=new p(!0)},ssdC:function(e,t,i){"use strict";i.r(t),i.d(t,"abbreviateUSState",(function(){return a})),i.d(t,"toCamelCase",(function(){return r}));const n={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","American Samoa":"AS","District of Columbia":"DC",Guam:"GU","Marshall Islands":"MH","Northern Mariana Island":"MP","Puerto Rico":"PR","Virgin Islands":"VI"};function a(e,t,i){return"US"!==i&&"us"!==i||"en-us"!==t?e:n[e]||e}function r(e,t){return e&&JSON.parse(JSON.stringify(e,(function(e,i){if(i&&"object"==typeof i&&!Array.isArray(i)){const e={};for(const n in i)if(Object.hasOwnProperty.call(i,n)){e[t&&t[n]||n&&n.charAt(0).toLowerCase()+n.substring(1)]=i[n]}return e}return i})))}},tZkf:function(e,t,i){var n;e.exports=(n=i("Ni7E"),n.enc.Utf8)},u8F0:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.Location="Location",e.Finance="Finance",e.Team="Team",e.League="League",e.Player="Player",e.Traffic="Traffic"}(n||(n={}))},vLdU:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("HDSB"),a=i("D57K"),r=i("I6Lx"),o=i("ADRF"),s=i("XlyT"),c=i("HxRh"),u=i("tMmC"),d=i("Vy2U");class l{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=t||l.defaultConfig,this.cfg.appId=this.cfg.appId||l.defaultConfig.appId,this.cfg.num=this.cfg.num||l.defaultConfig.num}geocodeSuggestion(e){return Promise.resolve(null)}getAutoSuggestResponse(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const i=[{key:"appid",value:this.cfg.appId},{key:"mr",value:""+this.cfg.num},{key:"q",value:e},{key:"setmkt",value:!this.cfg.redirectZhCnJaJpMarket||"ja-jp"!==r.b.Locale&&"zh-cn"!==r.b.Locale?r.b.Locale:"en-us"},{key:"setlang",value:r.b.Locale},{key:"ul",value:r.b.ClientSettings?`${r.b.ClientSettings.geo_lat},${r.b.ClientSettings.geo_long},100`:""}];let n=[];if(!e||!e.trim||!e.trim().length)return n;const a=new URL(l.bingAutosuggestApi,l.bingAutoSuggestServiceHost);return a.search=o.a.keyValueArrayToQueryString(i),n=yield this.fetchImpl(a.href,{jsonpCallback:"cb"}).then(e=>e.json()).then(e=>this.getLocationFromResponse(e)).catch(e=>(t&&Object(s.b)(c.tf,"Autosuggest request failed for client v1",JSON.stringify({urlWithoutQuery:this.getLoggableUrlString(a)})),u.a.log("failed: "+e),null)),n}))}getLocationFromResponse(e){const t=[];if(e&&e["@graph"]){const i=e["@graph"];for(let e=0;e<i.length;e++){const n=i[e];if(n){switch(n["b:stype"]){case"Island":case"PopulatedPlace":case"Postcode1":case"Other":{const e=n["s:address"]||{},i=n["s:geo"]||{},a=i["s:latitude"],o=i["s:longitude"];if("number"==typeof a&&"number"==typeof o){const i={locality:e["s:addressLocality"]||e["s:name"]||"",region:d.b.abbreviateUSState(e["s:addressRegion"]||"",r.b.Locale,e["b:countryIso"]||""),subRegion:e["b:addressSubregion"]||"",country:e["s:addressCountry"]||"",latitude:Number(a).toString(),longitude:Number(o).toString(),isoCode:e["b:countryIso"]||"",language:r.b.Locale};d.a.isValidLocationToSuggest(i)&&t.push(i)}}}}}}return t}getLoggableUrlString(e){return e?(e.searchParams&&e.searchParams.delete&&e.searchParams.delete("q"),e.href):""}getLocationSearchResponse(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=[{key:"appid",value:this.cfg.appId},{key:"locale",value:r.b.Locale},{key:"query",value:e}],i=[];if(!e||!e.trim||!e.trim().length)return i;const n=new URL(l.msnLocationSearchApi,l.msnApiServiceHost);n.search=o.a.keyValueArrayToQueryString(t);(new Headers).append("contentType","application/json");const a=yield(this.xhrFetch?this.xhrFetch:fetch)(n.href,{method:"GET",headers:{"Content-Type":"application/json"}});return a.ok||500===a.status?this.getLocationFromSearchResponse(yield a.json()):null}))}isSameLocation(e,t){return e==t||null!=e&&null!=t&&(e.locationType==t.locationType&&(Math.abs(parseFloat(e.latitude)-parseFloat(t.latitude))<.001&&Math.abs(parseFloat(e.longitude)-parseFloat(t.longitude))<.001||(this.distance(e,t)<150||void 0)))}distance(e,t){const i=parseFloat(e.latitude)*Math.PI/180,n=parseFloat(e.longitude)*Math.PI/180,a=parseFloat(t.latitude)*Math.PI/180,r=a-i,o=parseFloat(t.longitude)*Math.PI/180-n,s=Math.sin(r/2)*Math.sin(r/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(i)*Math.cos(a);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}getLocationFromSearchResponse(e){if(!(e.value&&e.value[0]&&e.value[0].responses&&e.value[0].responses[0]))return[];const t=e.value[0].responses[0];if(t.error)return[];const i=t.locations.filter(e=>("admindivision1"!==e.entityType.toLowerCase()||"jp"===e.countryCode.toLowerCase())&&e.coordinates&&e.coordinates.lat&&e.coordinates.lon).map(e=>({isoCode:e.countryCode,locality:e.locality,region:e.state||e.adminDistrict,country:e.countryRegion,latitude:e.coordinates.lat.toString(),longitude:e.coordinates.lon.toString(),displayName:e.displayName})),n=[];return i.forEach(e=>{0==n.map(t=>this.isSameLocation(t,e)).filter(e=>e).values.length&&n.push(e)}),n}populateSearchMoreResponse(){}}l.bingAutoSuggestServiceHost="https://platform.bing.com",l.bingAutosuggestApi="geo/AutoSuggest/v1",l.defaultConfig={num:4,appId:"C98EA5B0842DBB9405BBF071E1DA76512D21FE36"},l.msnLocationSearchApi="/v0/weather/locations/search",l.msnApiServiceHost="https://api.msn.com";var h=i("UQuZ"),g=i("ssdC"),p=i("y+Kz"),f=i("rvYQ"),v=i("6ADy"),m=i("msIb");class y{constructor(e,t,i,n,a,r,o,s,c){this.fetchImpl=e,this.host=t,this.api=i,this.appId=n,this.excludeSubTypes=a,this.includeSubTypes=r,this.escapeISO=o,this.flightId=s,this.useOneService=c,this.filterSuggestion=e=>-1===this.excludeSubTypes.indexOf(e.subType)&&(-1!==this.escapeISO.indexOf(e.address&&e.address.countryIso&&e.address.countryIso.toLowerCase())||-1!==this.includeSubTypes.indexOf(e.subType)),this._parseLocationFromAS=!0}addExtraASParams(e,t){return e}_getDefaultSuggestions(){return[]}getSuggestions(e,t){return Object(a.a)(this,void 0,void 0,(function*(){if(e.disableThisRequest)return null;if((!e.searchText||""===e.searchText.trim())&&(e.disableFavorites||!this._useFavoriteSuggestions))return{suggestions:[]};const i=this._constructASRequestUrl(e);return this.fetchImpl(i.href).then(e=>e.json()).then(t=>{const i=this.useOneService?this._parseOneServiceSuggestions(t):this._parseSuggestionsV6(t),n=e.searchText&&""!==e.searchText.trim()?[]:this._getDefaultSuggestions();return i.suggestions=this._combineSuggestions(i.suggestions,n),this._updateSuggestionsRank(i.suggestions),i}).catch(i=>{if(t){const t=this._constructASRequestUrl(Object.assign(Object.assign({},e),{searchText:""}));Object(s.b)(c.tf,"Autosuggest request failed for client v6",JSON.stringify({urlWithoutQuery:t&&t.href,error:i}))}return null})}))}getHistorySuggestions(e){return[]}_constructASRequestUrl(e){let t,i;return this.useOneService?(t=this.getOneServiceQueryParams(e),i=Object(v.c)(this.api,Object(v.b)())):(t=this.getBingQueryParams(e),i=new URL(this.api,this.host)),i.search=o.a.keyValueArrayToQueryString(t),i}getBingQueryParams(e){return[{key:"appid",value:this.appId},{key:"count",value:""+e.maxResults},{key:"q",value:e.searchText},{key:"localcircularview",value:e.userLocation&&e.userLocation+",100"},{key:"setmkt",value:r.b.Locale},{key:"setlang",value:r.b.Locale},{key:"types",value:e.suggestionTypes||""},{key:"abbrtext",value:e.abbrSuggestions?"1":""},{key:"structuredaddress",value:"true"},{key:"strucaddrread",value:"1"},{key:"setflight",value:this.flightId}]}getOneServiceQueryParams(e){return[{key:p.s.apiKey,value:f.a.OneServiceApiKey},{key:p.s.type,value:e.suggestionTypes||""},{key:p.s.top,value:""+e.maxResults},{key:"q",value:e.searchText},{key:p.s.location,value:e.userLocation&&""+e.userLocation},{key:p.s.market,value:r.b.Locale},{key:"setflight",value:this.flightId},{key:"qscope",value:"locations"},{key:"activityId",value:f.a.ActivityId},{key:"ocid",value:m.a.getOneServiceOCID(f.a.TrackInfo,"feeds")}]}_combineSuggestions(e,t){let i=[];if(t&&t.length){i=t;let n=!1;for(let a=0;a<e.length;a++){e[a].root;const r=e[a].address,o=r&&r.streetAddress,s=r&&r.addressLocality,c=e[a].name;for(let e=0;e<t.length;e++){const i=t[e];if(o&&i.formatedAddress&&i.formatedAddress.indexOf(o)>-1&&(s&&i.formatedAddress.indexOf(s)>-1||c&&i.title&&i.title.indexOf(c)>-1)){n=!0;break}}n?n=!1:i.push(e[a])}}else i=e;return i}_updateSuggestionsRank(e){for(let t=0;t<e.length;t++)e[t].suggestionRank=t}_parseSuggestionsV6(e){const t={},i=[];if(e){const n=e.instrumentation;t.formattingRules=this._createFormattingRulesV6(e.formattingRules);const a=this._getDefaultFormattingRuleV6(t.formattingRules),o=e.value;for(let e=0;e<o.length;e++){const s={},c=o[e];try{s.root=c,s.type=c._type,s.readLink=c.readLink,s.readLinkPingSuffix=c.readLinkPingSuffix,s.instrumentationInfo=n,s.suggestionRank=e,s.formattingRuleId=c.formattingRuleId,s.formattingRule=s.formattingRuleId&&t.formattingRules[s.formattingRuleId]||a,s.entityId=c.id,s.name=c.name,s.query=c.query;const o=c.categories;s.primaryCategoryPath=o&&o.length&&o[0],s.entityId&&0===s.entityId.indexOf("local_geoid")&&(s.geoId=s.entityId,s.entityId="");const u=c.entityPresentationInfo;u&&u.entitySubTypeHints&&u.entitySubTypeHints.length&&(s.subType=u.entitySubTypeHints[0]);const l=c.geo;if(l&&this._parseLocationFromAS){const e=l.latitude,t=l.longitude;e&&t&&(s.location={latitude:e,longitude:t})}c.address?(s.address=c.address,s.address.addressRegion=d.b.abbreviateUSState(s.address.addressRegion,r.b.Locale,s.address.countryIso)):c.location&&c.location.length?s.address=c.location[0].address:"PostalAddress"===s.type&&(s.address=c),"Favorite"==s.type&&(s.alternateName=c.alternateName,s.subType=c.subType,this._processFavoriteItemId(c,s)),i.push(s)}catch(e){}}}return t.suggestions=i.filter(this.filterSuggestion),t}_parseOneServiceSuggestions(e){const t={},i=e.value[0].groups[0].suggestionItems;for(let e=0;e<i.length;e++){const t={},n=i[e];try{t.readLink=n.dataUrl,t.suggestionRank=e,t.name=n.name,t.entityId=n.id,t.formattingRuleId=n.metadata.formattingRuleId,t.formattingRule=n.metadata.formattingRules&&JSON.parse(n.metadata.formattingRules),t.address=n.metadata,t.address.addressRegion=d.b.abbreviateUSState(n.metadata.addressRegion,r.b.Locale,n.metadata.countryIso);const a=n.metadata.latitude,o=n.metadata.longitude;a&&o&&(t.location={latitude:a,longitude:o}),t.subType=n.metadata.entitySubTypeHints,i[e]=t}catch(e){}}return t.suggestions=i.filter(this.filterSuggestion),t}_createFormattingRulesV6(e){const t={};if(e)for(let i=0;i<e.length;i++){const n=JSON.parse(e[i]);t[n.identifier]=n}return t}_getDefaultFormattingRuleV6(e){let t=e&&e.Default||null;for(const i in e){t||(t=e[i]);if(r.b.Locale.indexOf(i.toLowerCase())>-1){t=e[i];break}}return t}_processFavoriteItemId(e,t){const i=e.bingId;!i||0!==i.indexOf("local_ypid:")&&0!==i.indexOf("sid")&&0!==i.indexOf("local_vdpid")||(t.entityId=i),t.bingId=i}}y.autosuggestCallerId="autosug";class b{constructor(e,t){this.key=e,this.fetchImpl=t,this.geocode=(e,t,i,n,s)=>Object(a.a)(this,void 0,void 0,(function*(){const a={success:!1,statusCode:null,authenticationResultCode:null,statusDescription:null,name:e,results:null};if(!location)return null;const c=i&&i<=b._maxNumberOfResults?i:b._defaultResultCount,u=[{key:"key",value:this.key},{key:"maxResults",value:""+c},{key:"q",value:encodeURIComponent(e)},{key:"inclnb",value:n?"1":"0"},{key:"incl",value:s?"ciso2":""},{key:"userMapView",value:b._getBoundsString(t)},{key:"culture",value:r.b.Locale}],d=new URL(b.geoApi,b.geoHost);return d.search=o.a.keyValueArrayToQueryString(u),this.fetchImpl(d.href).then(e=>e.json()).then(e=>{if(e&&e.authenticationResultCode===b._validAuthenticationCode&&e.statusCode===b._validStatusCode&&e.statusDescription===b._validStatusDescription&&e.resourceSets&&0!==e.resourceSets.length){let t;a.success=!0,a.statusCode=b._validStatusCode,a.authenticationResultCode=b._validAuthenticationCode,a.statusDescription=b._validStatusDescription;for(let i=0,n=e.resourceSets.length;i<n;i++)if(t=e.resourceSets[i].resources,t&&0!==t.length){a.results=t;break}a.traceId=e.traceId}else e?(a.statusCode=e.statusCode,a.authenticationResultCode=e.authenticationResultCode,a.statusDescription=e.statusDescription,a.errorMessage=e.errorDetails&&e.errorDetails.length>0&&e.errorDetails[0],a.traceId=e.traceId):(a.statusCode=400,a.authenticationResultCode="Unknown",a.statusDescription="Unknown");return a}).catch(e=>(a.authenticationResultCode="Unknown",a.statusCode=404,a.statusDescription="Http Error",a))}))}static _getBoundsString(e){return e?e.south+","+e.west+","+e.north+","+e.east:""}}b._validAuthenticationCode="ValidCredentials",b._validStatusCode=200,b._validStatusDescription="OK",b._defaultResultCount=5,b._maxNumberOfResults=20,b.geoHost="https://dev.virtualearth.net",b.geoApi="/REST/v1/Locations";class S{constructor(e){this.suggestion=e,this._formatSuggestion(this.suggestion),this.setSimpleSearchText(),this._setDisplayName()}_setDisplayName(){const e=this._formattingRule&&this._formattingRule["b:groupSeparator"]||", ";this.suggestionTextLine2?this.suggestion.displayName=this.suggestionTextLine1+e+this.suggestionTextLine2:this.suggestion.displayName=this.suggestionTextLine1}setSimpleSearchText(){const e=this._formattingRule&&this._formattingRule["b:groupSeparator"]||", ";if("Favorite"===this.suggestion.type){const t=this.suggestion,i=t.name,n=t.address&&t.address.streetAddress;this._searchText=i!==n&&n?i+e+n:i}else this.suggestionTextLine2?this._searchText=this.suggestionTextLine2+e+this.suggestionTextLine1:this._searchText=this.suggestionTextLine1;this.suggestion&&(this.suggestion.searchText=this._searchText)}_removeCountry(e){let t=", ";this._formattingRule&&(t=this._formattingRule["b:groupSeparator"]||this._formattingRule.groupSeparator||", ");const i=this.suggestion.address||this.suggestion.root,n=i&&i.addressCountry;if(n&&e&&e.slice(e.length-n.length)===n){const i=e.slice(0,e.length-n.length);return i.slice(i.length-t.length)===t?i.slice(0,i.length-t.length):i}return e}_formatSuggestion(e){const t=this.suggestion.formattingRule,i=e;if("Favorite"===e.type)return i.alternateName?this.suggestionTextLine1=i.alternateName:this.suggestionTextLine1=i.name,this.suggestionTextLine2=i.address&&i.address.streetAddress,this.suggestion.formatedAddress=i.address&&i.address.streetAddress,void(this.suggestion.title=i.name);i.name&&(this.suggestionTextLine1=i.name,e.title=i.name),i.query&&(this.suggestionTextLine1=i.query),t?(this._formattingRule=t,this.suggestion.address?this._applyFormattingRule(this.suggestion.address):this._applyFormattingRule(e.root)):(this.suggestionTextLine1=e.title,this.suggestionTextLine2=e.formatedAddress),this.suggestion.formatedLine1=this.suggestionTextLine1,this.suggestion.formatedLine2=this.suggestionTextLine2,this.suggestion.formatedLine2WithoutCountry=this._removeCountry(this.suggestionTextLine2)}_applyFormattingRule(e){let t=0;const i=this._formattingRule["b:fieldGroups"]||this._formattingRule.fieldGroups;if(!this.suggestionTextLine1)for(;t<i.length;t++){const n=this._getFormattedGroupString(e,i[t]);if(n){this.suggestionTextLine1=n,this.suggestion.title=n,++t;break}}const n=[];for(;t<i.length;t++){const a=this._getFormattedGroupString(e,i[t]);a&&n.push(a)}const a=this._formattingRule["b:groupSeparator"]||this._formattingRule.groupSeparator||", ";this.suggestionTextLine2=n.join(a),this.suggestion.formatedAddress=this.suggestionTextLine2}_getFormattedGroupString(e,t){const i=[];let n;const a=t.fields;for(let t=0;t<a.length;t++)n=this._getPrimaryField(e,a[t]),n||(n=this._getAlternateField(e,a[t])),n&&i.push(n);const r=t.fieldSeparator||" ";return i.join(r)}_getPrimaryField(e,t){let i;return e&&t&&(i=e[t.name]),i}_getAlternateField(e,t){let i;if(e&&t){const n=t.alternateField;if(n){const t=n.split(",");for(let n=0;n<t.length&&(i=e[t[n]],!i);n++);}}return i}}S.HistorySuggestionType="history";const C=["us","cz","dk","at","ch","de","gb","ie","es","fi","be","fr","hu","no","nl","pl","pt","se"];class O{constructor(e,t,i=null,n=null){var a,o,s;this.fetchImpl=e,this.userLocation=i,this.xhrFetch=n,this._translateSuggestion=e=>{var t,i;const n=e.suggestion.address||e.suggestion.root,a=null===(t=e.suggestion.location)||void 0===t?void 0:t.latitude,o=null===(i=e.suggestion.location)||void 0===i?void 0:i.longitude,s={language:r.b.Locale,addressLine:e.suggestion.name||(null==n?void 0:n.streetAddress)||(null==n?void 0:n.postalCode),locality:null==n?void 0:n.addressLocality,region:Object(g.abbreviateUSState)(null==n?void 0:n.addressRegion,r.b.Locale,null==n?void 0:n.countryIso),subRegion:null==n?void 0:n.addressSubregion,country:n&&(n.addressCountry||""),latitude:a&&Number(a).toString(),longitude:o&&Number(o).toString(),typeV6:e.suggestion.type,searchText:e.suggestion.searchText,formatedAddress:e.suggestion.formatedAddress,readLink:e.suggestion.readLink,locationType:h.getHyperlocalType(e.suggestion.type,e.suggestion.subType),isoCode:n&&(n.countryIso||""),entityId:e.suggestion.entityId,geoId:e.suggestion.geoId};return!s.locality&&s.addressLine&&(s.locality=s.addressLine,s.addressLine=void 0),s.firstLine=h.getAutoSuggestLocationFirstLine(s),s.secondLine=h.getAutoSuggestLocationSecondLine(s),s},this.cfg=Object.assign(Object.assign({},O.defaultConfig),t||{}),"CN"==(null==i?void 0:i.isoCode)&&(this.cfg.endpoint="https://cn.bing.com"),this.cfg.enableHyperlocal&&C.includes(null===(s=null===(o=null===(a=null===f.a||void 0===f.a?void 0:f.a.CurrentRequestTargetScope)||void 0===a?void 0:a.locale)||void 0===o?void 0:o.market)||void 0===s?void 0:s.toLowerCase())&&(this.cfg.escapeISO=C,this.cfg.suggestionTypes="Place,Address,Business"),this._extraResult=this.cfg.latinPercentageLimit>0?5:0,this._geocoder=new b(this.cfg.geocoderKey,e),this.cfg.escapeISO=this.cfg.escapeISO.map(e=>e.toLowerCase()),this._autoSuggestModel=new y(e,this.cfg.endpoint,O[this.cfg.useOneServiceProxy?"oneServiceAutosuggestApi":"bingAutosuggestApi"],this.cfg.appId,this.cfg.excludeSubTypes,this.cfg.includeSubTypes,this.cfg.escapeISO,this.cfg.flightId,this.cfg.useOneServiceProxy)}getLocationSearchResponse(e){return Promise.resolve(null)}getAutoSuggestResponse(e,t){var i,n,o;return Object(a.a)(this,void 0,void 0,(function*(){if(e){const a="zh-cn"===(null===(i=null===r.b||void 0===r.b?void 0:r.b.Locale)||void 0===i?void 0:i.toLowerCase())&&"zh"!==(null===(o=null===(n=null===r.b||void 0===r.b?void 0:r.b.ClientSettings)||void 0===n?void 0:n.geo_country)||void 0===o?void 0:o.toLowerCase())?"40,116":this.userLocation&&`${this.userLocation.latitude},${this.userLocation.longitude}`,s={searchText:e,maxResults:this.cfg.num+this._extraResult,userLocation:a,suggestionTypes:this.cfg.suggestionTypes,abbrSuggestions:!0,localMapView:null},c=yield this._autoSuggestModel.getSuggestions(s,t);return this._parseSuggestions(c)}}))}_latinPercentage(e){const t=e.locality+e.country+e.region+e.subRegion;if(!t)return 0;return t.match(O.latinParttern).join("").length/t.length}_parseSuggestions(e){const t=[],i=null==e?void 0:e.suggestions;if(i&&i.length>0)for(let e=0;e<i.length;e++)t.push(this._getSuggestionResult(i[e]));let n=t.map(this._translateSuggestion);return this.cfg.latinPercentageLimit>0&&(n=n.filter(e=>this._latinPercentage(e)>this.cfg.latinPercentageLimit).slice(0,this.cfg.num)),n=n.filter(e=>h.isValidLocationToSuggest(e)),n}_getSuggestionResult(e){return new S(e)}_getLatLongFromReadLink(e){return Object(a.a)(this,void 0,void 0,(function*(){if(!e.readLink)return null;const t=new URL(e.readLink);return t.searchParams.append("appid",this.cfg.appId),this.fetchImpl(t.href).then(e=>e.json()).then(t=>{var i,n;const a=t.geo||(null===(n=null===(i=t.value)||void 0===i?void 0:i[0])||void 0===n?void 0:n.geo);if(a&&a.latitude&&a.longitude)return Object.assign(Object.assign({},e),{latitude:a.latitude.toString(),longitude:a.longitude.toString()})}).catch(e=>null)}))}geocodeSuggestion(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e;if(t.longitude&&t.latitude)return t;const i=yield this._getLatLongFromReadLink(e);if(i)return i;const n=this._getSuggestionAddress(t);return this._geocoder.geocode(n,null,1).then(e=>{if(e.success&&e.results&&e.results.length>0){const i=e.results[0];i.bbox;if(i.point){const e=i.point.coordinates;return t.latitude=e[0].toString(),t.longitude=e[1].toString(),t}}return null})}))}_getSuggestionAddress(e){return e&&"LocalBusiness"===e.typeV6&&e.formatedAddress?e.formatedAddress:e&&e.searchText}}O.bingAutosuggestApi="/api/v6/Places/AutoSuggest",O.oneServiceAutosuggestApi="msn/suggestions",O.defaultConfig={num:5,appId:"D41D8CD98F00B204E9800998ECF8427E1FBE79C2",geocoderKey:"AnTcaqBi2ypp0xI-OZNi4W_ik2KhjgpqioTAtXLC8GzkMBQRMlyxvxyTnd5b73im ",suggestionTypes:"",endpoint:"https://www.bing.com",excludeSubTypes:["CountryRegion","AdminDivision1"],includeSubTypes:["PopulatedPlace","AdminDivision2","Other","Island"],escapeISO:["us"],flightId:""},O.latinParttern=/[\u00C0-\u00ff\w\s\p{Number}.,/#!$%^&*;:{}=\-_`~()]+/gu;var A=i("VbA2"),L=i("5xIM"),w=i.n(L);function k(e){if(e&&e.useV6){const t=Object(n.a)()?window.fetch.bind(window):A.b;return new O(t,e,d.a.headLocation())}return new l(w.a,e)}},"x/PH":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("D57K"),a=i("rvYQ"),r=i("msIb"),o=i("KETb"),s=i("XlyT"),c=i("HxRh"),u=i("ypwz"),d=i("Vy2U");class l{constructor(e,t){this.fetchImpl=e,this.config=t,this.ocid="Peregrine",this.localizeLocationApi="weather/locations/search"}getLocalisedLocationDetails(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!d.a.isValid(e))return;const t=yield r.a.getBaseRequestData("GET"),i=[...a.a.AppType===u.a.WindowsNewsPlus||a.a.AppType===u.a.NewsAndInterests||a.a.AppType===u.a.WindowsNewsWidgets?r.a.getCommonParams2("winp2",!1):r.a.getCommonParams2(this.ocid),{key:"lat",value:e.latitude},{key:"lon",value:e.longitude},{key:"locale",value:a.a.CurrentMarket}],h=new URL(`${this.localizeLocationApi}${a.a.ServiceUrlBase.search}`,a.a.ServiceUrlBase);let g;i.forEach(e=>{e.value&&h.searchParams.set(e.key,e.value)}),h.searchParams.delete("fdhead"),this.config&&this.config.noDynamicQueryParams&&(h.searchParams.delete("user"),h.searchParams.delete("activityId"));try{const i=yield Object(o.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(h.href,t);if(!e.ok){if(g=`code=${e.status}, ${e.statusText}`,e.status>=400&&e.status<500&&408!=e.status)return{isError:!0};throw Error(e.statusText)}return e.json()})),"getLocalizedLocation");if(null==i?void 0:i.isError)throw Error(g);return l.convertResponse(i,e,h.href)}catch(e){g||(g=e&&e.toString()),Object(s.c)(e,c.qj,g+","+this.localizeLocationApi,h.href)}}))}static convertResponse(e,t,i){const n=e&&e.value&&e.value[0]&&e.value[0].responses||[],r=n[0]&&n[0].locations[0];let o=void 0;if(r&&(o={latitude:t.latitude,longitude:t.longitude,isDetected:t.isDetected,locality:r.locality,region:r.adminDistrict,subRegion:r.adminDistrict2,country:r.countryRegion,isoCode:r.countryCode,language:a.a.CurrentMarket},o.displayName=d.a.getDisplayName(o)),o&&o.displayName)return o;Object(s.b)(c.qj,"unable to construct valid display name",i)}}},yewK:function(e,t,i){"use strict";var n,a;i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),function(e){e[e.None=0]="None",e[e.LocationAndUnit=1]="LocationAndUnit",e[e.Unit=2]="Unit",e[e.Location=3]="Location"}(n||(n={})),function(e){e[e.Unit=2]="Unit",e[e.Location=3]="Location"}(a||(a={}));class r{constructor(){}usePreference(e){this.read=e}savePreference(e){this.save=e}setClientRequestInfo(e){this.requestInfo=e}setFilterRule(e){this.filterRule=e}get readChoice(){return this.read}get saveChoice(){return this.save}get clientRequestInfo(){return this.requestInfo}get filterRuleValue(){return this.filterRule}}}}]);